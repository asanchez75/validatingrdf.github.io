<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="hevea 2.23">
<link rel="stylesheet" type="text/css" href="bookHtml.css">
<title>SHACL</title>
</head>
<body>
<a href="bookHtml011.html"><img src="previous_motif.gif" alt="Previous"></a>
<a href="index.html"><img src="contents_motif.gif" alt="Up"></a>
<a href="bookHtml013.html"><img src="next_motif.gif" alt="Next"></a>
<hr>
<h1 class="chapter" id="sec119">Chapter 5  SHACL</h1>
<p> 
<a id="hevea_default463"></a>
<a id="ch5"></a>
<a id="ch050SHACL"></a>

</p><p><a id="hevea_default464"></a>
Shapes Constraint Language (SHACL) has been developed by the W3C RDF Data Shapes Working Group, 
which was chartered in 2014 with the goal to 
“produce a language for defining structural constraints on RDF graphs [<a href="bookHtml019.html#SHACLCharter">6</a>].” </p><p><a id="hevea_default465"></a>
The first public working draft was published in October 2015 and it was proposed as a W3C Recommendation in June 2017.<sup><a id="text14" href="#note14">1</a></sup></p><p><a id="hevea_default466"></a> <a id="hevea_default467"></a> <a id="hevea_default468"></a> 
SHACL was influenced by SPIN, and some parts from OSLC resource shapes and ShEx. 
At the beginning of the Working Group activity it was considered that SHACL was going to be 
an integration of all the validation approaches into a unified language.
However, due to core differences, SHACL and ShEx did not converge. 
Chapter <a href="bookHtml014.html#ch070Comparing">7</a> contains a comparison of both languages and 
describes the main differences. </p><p><a id="hevea_default469"></a> <a id="hevea_default470"></a> 
SHACL is divided in two parts. 
The first part, called SHACL Core, describes a core RDF vocabulary to define common shapes and constraints while 
the second part describes an extension mechanism in terms of SPARQL and has been called: SHACL-SPARQL. </p><p>Two working group notes have been published to extend SHACL with 
(a) advanced features such as rules and complex expressions<sup><a id="text15" href="#note15">2</a></sup> and 
(b) to enable the definition of constraint components in Javascript (called SHACL-Javascript).<sup><a id="text16" href="#note16">3</a></sup></p><p><a id="hevea_default471"></a>
A W3C SHACL community group<sup><a id="text17" href="#note17">4</a></sup> has been created to continue working on SHACL preparing educational contents and 
supporting SHACL adoption. 
A working group note was also suggested for a SHACL Compact 
Syntax<sup><a id="text18" href="#note18">5</a></sup>
but it was decided to postpone it for the W3C community group.</p>
<h2 class="section" id="sec120">5.1  Simple Example</h2>
<p>
<a id="ch5.sec1"></a></p><p><a id="hevea_default472"></a> 
SHACL groups the information and constraints that apply to data nodes into some constructs called shapes. 
<a id="hevea_default473"></a>
SHACL shapes differ from ShEx shapes in the sense that they also contain information about the target nodes or set of nodes to which they can be applied.</p><p><a id="hevea_default474"></a>
<a id="hevea_default475"></a>
<a id="hevea_default476"></a>
The syntax of SHACL is defined in terms of RDF so we will use Turtle in this book although it is possible to employ other RDF serialization formats such as JSON-LD or 
RDF/XML. </p><div class="example"><div class="theorem"><span class="c013">Example 94</span>  <em>UserShape example in SHACL</em><em> </em><a id="ch050SHACLExample"></a><p><em>The following example is similar to the ShEx definition in 
Example </em><a href="bookHtml011.html#ch040%3AShExSimpleExample"><em>26</em></a><em>.</em><sup><a id="text19" href="#note19"><em>6</em></a></sup><em> 
</em><a id="hevea_default477"></a><em>
It defines a shape </em><em>
</em><code><em>:UserShape</em></code><em> of type </em><em>
</em><code><em>sh:NodeShape</em></code><em>.
</em><a id="hevea_default478"></a><em>
It has target class declaration pointing to </em><em>
</em><code><em>:User</em></code><em> which means that it applies to all nodes that are instances of </em><em>
</em><code><em>:User</em></code><em> (see Section </em><a href="#ch050targetClass"><em>5.7.2</em></a><em>).
The next lines declare that nodes conforming to </em><em>
</em><code><em>:UserShape</em></code><em> must satisfy the following constraints.</em></p><ul class="itemize"></em><li class="li-itemize"><em> <em><em>They must have exactly one property </em></em><em><em>
</em></em><code><em><em>schema:name</em></em></code><em><em> with values of type </em></em><em><em>
</em></em><code><em><em>xsd:string</em></em></code><em><em> (lines 3–8).</em></em></li><li class="li-itemize"><em><em>They must have exaclty one property </em></em><em><em>
</em></em><code><em><em>schema:gender</em></em></code><em><em> whose value must be either 
</em></em><em><em>
</em></em><code><em><em>schema:Male</em></em></code><em><em> or </em></em><em><em>
</em></em><code><em><em>schema:Female</em></em></code><em><em> or any </em></em><em><em>
</em></em><code><em><em>xsd:string</em></em></code><em><em> literal (lines 9–17).</em></em></li><li class="li-itemize"><em><em>They have zero or one </em></em><em><em>
</em></em><code><em><em>schema:birthDate</em></em></code><em><em> property whose datatype must be </em></em><em><em>
</em></em><code><em><em>xsd:date</em></em></code><em><em> (lines 18–22).</em></em></li><li class="li-itemize"><em><em>They have zero or more </em></em><em><em>
</em></em><code><em><em>schema:knows</em></em></code><em><em> properties whose nodes must be IRIs and have type </em></em><em><em>
</em></em><code><em><em>:User</em></em></code><em><em> (lines 23–27).</em></em></li></ul><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:UserShape</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:targetClass</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [                  </span></em><span class="c011"><em><span class="c011"># Blank node 1</span></em></span><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:maxCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011"> </span></em><em><span class="c011">xsd:string</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [                   </span></em><span class="c011"><em><span class="c011"># Blank node 2</span></em></span><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:path</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:gender</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:maxCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:or</span></em><em><span class="c011"> (</span></em><em><span class="c011">
</span></em><em><span class="c011">    [ </span></em><em><span class="c011">sh:in</span></em><em><span class="c011"> (</span></em><em><span class="c011">schema:Male</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:Female</span></em><em><span class="c011">) ]</span></em><em><span class="c011">
</span></em><em><span class="c011">    [ </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011"> </span></em><em><span class="c011">xsd:string</span></em><em><span class="c011">]</span></em><em><span class="c011">
</span></em><em><span class="c011">   )</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [                   </span></em><span class="c011"><em><span class="c011"># Blank node 3  </span></em></span><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:birthDate</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:maxCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011"> </span></em><em><span class="c011">xsd:date</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [                   </span></em><span class="c011"><em><span class="c011"># Blank node 4 </span></em></span><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:knows</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:nodeKind</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:IRI</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:class</span></em><em><span class="c011">    </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] .</span></em></td></tr>
</table></div></div><p>SHACL defines shapes as a conjunction of constraints that nodes must satisfy. 
A SHACL processor checks each of the constraints and returns validation errors for every constraint that is not satisfied.</p><p>When no error is reported, it is assumed that the RDF graph has been validated. </p><div class="example"><div class="theorem"><span class="c013">Example 95</span>  <em>RDF graph conforming to Example </em><a href="#ch050SHACLExample"><em>94</em></a><em> 
</em><a id="ch050GoodRDFGraph"></a><p><em>The following RDF data graph conforms to the previous example: </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:alice</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011">;                             </span></em><span class="c011"><em><span class="c011">#\Passes{:UserShape} *)     </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011">           </span></em><em><span class="c011"><em><span class="c011">"Alice"</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:gender</span></em><em><span class="c011">         </span></em><em><span class="c011">schema:Female</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:knows</span></em><em><span class="c011">          </span></em><em><span class="c011">:bob</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:bob</span></em><em><span class="c011">   </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011">;                             </span></em><span class="c011"><em><span class="c011">#\Passes{:UserShape} *)     </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:gender</span></em><em><span class="c011">         </span></em><em><span class="c011">schema:Male</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011">           </span></em><em><span class="c011"><em><span class="c011">"Robert"</span></em></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:birthDate</span></em><em><span class="c011">      </span></em><em><span class="c011"><em><span class="c011">"1980-03-10"</span></em></span></em><em><span class="c011">^^</span></em><em><span class="c011">xsd:date</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:carol</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011">;                             </span></em><span class="c011"><em><span class="c011">#\Passes{:UserShape} *)     </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011">           </span></em><em><span class="c011"><em><span class="c011">"Carol"</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:gender</span></em><em><span class="c011">         </span></em><em><span class="c011">schema:Female</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">foaf:name</span></em><em><span class="c011">             </span></em><em><span class="c011"><em><span class="c011">"Carol"</span></em></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>When an RDF graph conforms to a shapes graph, SHACL processors return a validation report with no errors.
The validation report contains the declaration:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">[ </span></em><em><span class="c011">a</span></em><em><span class="c011">            </span></em><em><span class="c011">sh:ValidationReport</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:conforms</span></em><em><span class="c011">  </span></em><em><span class="c011">true</span></em><em><span class="c011">
</span></em><em><span class="c011">].</span></em></td></tr>
</table></div></div><div class="example"><div class="theorem"><span class="c013">Example 96</span>  <em>Example of non conforming RDF graph</em><em> 
</em><a id="ch050SHACLBadDataGraph"></a><p><a id="hevea_default479"></a><em>
The following RDF graph does not conform to the shapes graph declared in 
Example </em><a href="#ch050SHACLExample"><em>94</em></a><em>.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:dave</span></em><em><span class="c011">  </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;                        </span></em><span class="c011"><em><span class="c011">#\Fails{:UserShape} *)     </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011">       </span></em><em><span class="c011"><em><span class="c011">"Dave"</span></em></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:gender</span></em><em><span class="c011">     </span></em><em><span class="c011">:Unknown</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:birthDate</span></em><em><span class="c011">  1980 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:knows</span></em><em><span class="c011">      </span></em><em><span class="c011">:grace</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:emily</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;                        </span></em><span class="c011"><em><span class="c011">#\Fails{:UserShape} *)          </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011">       </span></em><em><span class="c011"><em><span class="c011">"Emily"</span></em></span></em><em><span class="c011">,</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Emilee"</span></em></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:gender</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:Female</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:frank</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;                        </span></em><span class="c011"><em><span class="c011">#\Fails{:UserShape} *)     </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">foaf:name</span></em><em><span class="c011">         </span></em><em><span class="c011"><em><span class="c011">"Frank"</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:gender</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:Male</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">_:x</span></em><em><span class="c011">    </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011">;                         </span></em><span class="c011"><em><span class="c011">#\Fails{:UserShape} *)          </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011">       </span></em><em><span class="c011"><em><span class="c011">"Unknown"</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:gender</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:Male</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:knows</span></em><em><span class="c011">      </span></em><em><span class="c011">_:x</span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>A SHACL processor reports the following errors.</em></p><ul class="itemize"><li class="li-itemize"><em>
</em><code><em>:dave</em></code><em> has value different from </em><em>
</em><code><em>schema:Male</em></code><em>, </em><em>
</em><code><em>schema:Female</em></code><em> or string for property </em><em>
</em><code><em>schema:gender</em></code><em> (the allowed values).</em></li><li class="li-itemize"><em>
</em><code><em>:dave</em></code><em> has value </em><em>
</em><code><em>1980</em></code><em> for property </em><em>
</em><code><em>schema:birthDate</em></code><em> which is of datatype integer when it should be of datatype </em><em>
</em><code><em>xsd:date</em></code><em>.</em></li><li class="li-itemize"><em>
</em><code><em>:dave</em></code><em> has value </em><em>
</em><code><em>:grace</em></code><em> for property </em><em>
</em><code><em>schema:knows</em></code><em> which is not an instance of </em><em>
</em><code><em>:User</em></code><em>.</em></li><li class="li-itemize"><em>
</em><code><em>:emily</em></code><em> has 2 values for property </em><em>
</em><code><em>schema:name</em></code><em> when the maximum count is 1.</em></li><li class="li-itemize"><em>
</em><code><em>:frank</em></code><em> does not have value for property </em><em>
</em><code><em>schema:name</em></code><em>.</em></li><li class="li-itemize"><em>
</em><code><em>_:x</em></code><em> fails because the value of </em><em>
</em><code><em>schema:knows</em></code><em> is a blank node and must be an IRI.
</em></li></ul></div></div><p>When an RDF graph does not conform to a shapes graph, SHACL processors return a validation report that contains several errors. 
Section <a href="#ch050ValidationReport">5.5</a> describes the validation report structure.</p>
<h2 class="section" id="sec121">5.2  SHACL Implementations</h2>
<p> <a id="ch05SHACLImplementations"></a>
<a id="ch5.sec2"></a></p><p>At the time of this writing, there are several implementations of SHACL.</p><ul class="itemize"><li class="li-itemize"><p><a id="hevea_default480"></a> 
<a id="hevea_default481"></a> 
<a id="hevea_default482"></a>
<a id="hevea_default483"></a>
<a id="hevea_default484"></a>
<a id="hevea_default485"></a>
</p>TopQuadrant has an open source implementation in Java 
(using the Apache Jena Library) called TopBraid SHACL API<sup><a id="text20" href="#note20">7</a></sup>. 
<a id="hevea_default486"></a> <a id="hevea_default487"></a>
It implements SHACL Core, SHACL-SPARQL, and SHACL rules (see <a href="#ch5.sec19">5.19</a>) and 
also offers a command line tool.
TopQuadrant is the company behind TopBraid Composer, which is a commercial interactive development environment for semantic web and linked data applications. 
TopBraid Composer (including the free edition) includes a version of the API for RDF validation. <p><a id="hevea_default488"></a> <a id="hevea_default489"></a>
</p></li><li class="li-itemize">SHACL Playground,<sup><a id="text21" href="#note21">8</a></sup> an online SHACL demo implemented in Javascript by TopQuadrant.<p><a id="hevea_default490"></a>
</p></li><li class="li-itemize">SHACLex<sup><a id="text22" href="#note22">9</a></sup> implements SHACL Core (it also implements ShEx). 
It has been written in Scala based on a simple and generic RDF Library 
(currently it works on top of Apache Jena library but there are plans to use other libraries). 
SHACLex can be used to deploy an online validator service and an online demo is deployed in Heroku.<sup><a id="text23" href="#note23">10</a></sup>
<p><a id="hevea_default491"></a> <a id="hevea_default492"></a> <a id="hevea_default493"></a>
</p></li><li class="li-itemize">Corese STTL SHACL validator. Implemented by Olivier Corby. 
It is an implementation of SHACL Core using STTL (SPARQL Template Transformation language), which is a generic transformation language for 
RDF.<sup><a id="text24" href="#note24">11</a></sup> 
STTL is itself implemented in Java.
An online demo of the validator is also available.<sup><a id="text25" href="#note25">12</a></sup> <p><a id="hevea_default494"></a> <a id="hevea_default495"></a>
</p></li><li class="li-itemize">Netage SHACL Engine<sup><a id="text26" href="#note26">13</a></sup> implemented in Java (using the Jena Library) by Nicky van Oorschot. 
It has support for SHACL-SPARQL.<p><a id="hevea_default496"></a>
</p></li><li class="li-itemize">SHACL-Check a prototype implemented by Tim Berners-Lee to check the 
specification.<sup><a id="text27" href="#note27">14</a></sup><p><a id="hevea_default497"></a>
</p></li><li class="li-itemize">RDFUnit.<sup><a id="text28" href="#note28">15</a></sup> 
A test driven data-debugging framework that runs test cases against RDF data and records any violations in structured form. 
Besides its SPARQL-based constraint definition language, RDFUnit supports rule translation from multiple formats i.e. OWL under closed world semantics, OSLC and DSP.
At the time of this writing, RDFUnit supports a very big part of SHACL-Core and SHACL-SPARQL<sup><a id="text29" href="#note29">16</a></sup>.
One of the future plans for RDFUnit is to support ShEx through the SHACLex implementation.<p><a id="hevea_default498"></a>
</p></li><li class="li-itemize">Alternative SHACL implementation, by Peter F. Patel-Schneider in 
Python.<sup><a id="text30" href="#note30">17</a></sup> <p><a id="hevea_default499"></a>
</p></li><li class="li-itemize">ELI Validator, by the ELI (European Legislation Identifier) Initiative<sup><a id="text31" href="#note31">18</a></sup> which is 
based on the TopBraid SHACL API.</li><li class="li-itemize">SHACL for rdf4j<sup><a id="text32" href="#note32">19</a></sup> (formerly Sesame) developed as a Google Summer of Code
2017 project.</li></ul>
<h2 class="section" id="sec122">5.3  Basic Definitions: Shapes Graphs, Node, and Property Shapes</h2>
<p>
<a id="ch5.sec3"></a></p><p><a id="hevea_default500"></a> <a id="hevea_default501"></a>
A SHACL processor has two inputs: a data graph that contains the RDF data to validate and a shapes graph that contains the shapes. 
Example <a href="#ch050SHACLExample">94</a> contains a shapes graph and 
Examples <a href="#ch050GoodRDFGraph">95</a> and <a href="#ch050SHACLBadDataGraph">96</a> contain two possible RDF data graphs. 
It is possible to use a single graph that contains both the data and shapes graph merged.</p><p><a id="hevea_default502"></a> <a id="hevea_default503"></a>
There are two main types of shapes: node shapes and property shapes.
Node shapes declare constraints directly on a node. 
Property shapes declare constraints on the values associated with a node through a path. </p><p><a id="hevea_default504"></a>
Property shapes have a property 
<code>sh:path</code> that declares the path that goes from the focus node to the value that they describe. 
The most frequent paths are predicate paths which are formed by a single IRI. </p><p>A node shape usually contains several property shapes which are declared through the 
<code>sh:property</code> predicate. </p><p>Example <a href="#ch050SHACLExample">94</a> contained four such property shape declarations.
The first one was defined as:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:UserShape</span><span class="c011"> ...</span><span class="c011">
</span><span class="c011">   </span><span class="c011">sh:property</span><span class="c011"> [                  </span><span class="c011"><em><span class="c011"># Blank node 1</span></em></span><span class="c011">
</span><span class="c011">    </span><span class="c011">sh:path</span><span class="c011"> </span><span class="c011">schema:name</span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">    </span><span class="c011">sh:minCount</span><span class="c011"> 1;</span><span class="c011">
</span><span class="c011">    </span><span class="c011">sh:maxCount</span><span class="c011"> 1;</span><span class="c011">
</span><span class="c011">    </span><span class="c011">sh:datatype</span><span class="c011"> </span><span class="c011">xsd:string</span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  ] ;</span><span class="c011">
</span><span class="c011"> ...</span></td></tr>
</table><p>Which means that nodes that conform to 
<code>:UserShape</code> must also conform to the property shape identified by blank node 1.
The path of that property shape (line 3) is the predicate 
<code>schema:name</code> which is, in this case, a single IRI.
The property shape contains several components that declare that there can be a minimum and a maximum of one values that can be accessed through that path (lines 4 and 5) 
and that they must belong to the 
<code>xsd:string</code> datatype (line 6).</p><p>Notice that in Example <a href="#ch050SHACLExample">94</a> we used blank nodes for property shapes and enumerated them from 1–4 because we will refer to them when we describe the validation report in next section. 
<a id="hevea_default505"></a>
Although using blank nodes may be more readable, sometimes, it may be better to declare an IRI for the property shapes so they can be referenced from other shapes graphs when they are imported (see the next section).</p><div class="example"><div class="theorem"><span class="c013">Example 97</span>  <em>Declaring IRIs for property shapes</em><p><em>Example </em><a href="#ch050SHACLExample"><em>94</em></a><em> could be rewritten as:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:UserShape</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:targetClass</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:nodeKind</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:IRI</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> </span></em><em><span class="c011">:HasEmail</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> </span></em><em><span class="c011">:HasGender</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> </span></em><em><span class="c011">:MaybeBirthDate</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> </span></em><em><span class="c011">:KnowsUsers</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:HasEmail</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:path</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:maxCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011"> </span></em><em><span class="c011">xsd:string</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:HasGender</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:path</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:gender</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:maxCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:or</span></em><em><span class="c011"> (</span></em><em><span class="c011">
</span></em><em><span class="c011">    [ </span></em><em><span class="c011">sh:in</span></em><em><span class="c011"> (</span></em><em><span class="c011">schema:Male</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:Female</span></em><em><span class="c011">) ]</span></em><em><span class="c011">
</span></em><em><span class="c011">    [ </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011"> </span></em><em><span class="c011">xsd:string</span></em><em><span class="c011">]</span></em><em><span class="c011">
</span></em><em><span class="c011">   ) .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:MaybeBirthDate</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:path</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:birthDate</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:maxCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011"> </span></em><em><span class="c011">xsd:date</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:KnowsUsers</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">  </span></em><em><span class="c011">schema:knows</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:class</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> .</span></em></td></tr>
</table></div></div>
<h2 class="section" id="sec123">5.4  Importing other Shapes Graphs</h2>
<p> 
<a id="ch050ImportingShapes"></a>
<a id="ch5.sec4"></a></p><p><a id="hevea_default506"></a>
<a id="hevea_default507"></a>
A shapes graph contains shapes definitions that will be passed to the SHACL validation process. 
Shapes graphs can be reusable modules that can be referenced by other shapes graphs with the predicate 
<code>owl:imports</code>.
As a pre-validation step, SHACL processors should extend the original shapes graph by following and importing all referenced shapes graphs through 
<code>owl:imports</code> declarations. 
The resulting graph will be the input shapes graph that will be used for validation. </p><div class="example"><div class="theorem"><span class="c013">Example 98</span>  <em>Importing shapes graphs</em><em> 
</em><a id="ch050ImportingShapesGraphs"></a><p><em>If we assume that Example </em><a href="#ch050SHACLExample"><em>94</em></a><em> is available at 
IRI </em><code><em>http://example.org/UserShapes</em></code><em>, then, the following shapes graph imports its shapes and uses them to declare that nodes that conform to </em><em>
</em><code><em>:TeacherShape</em></code><em> must also conform to </em><em>
</em><code><em>:UserShape</em></code><em> (line 5) and have the predicate </em><em>
</em><code><em>:teaches</em></code><em> with a value of datatype </em><em>
</em><code><em>xsd:string</em></code><em>.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">&lt;&gt; </span></em><em><span class="c011"><span class="c009">owl:imports</span></span></em><em><span class="c011"> &lt;</span></em><em><span class="c011">http:</span></em><em><span class="c011">//</span></em><em><span class="c011">example</span></em><em><span class="c011">.</span></em><em><span class="c011">org</span></em><em><span class="c011">/</span></em><em><span class="c011">UserShapes</span></em><em><span class="c011">&gt; .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:TeacherShape</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:targetClass</span></em><em><span class="c011"> </span></em><em><span class="c011">:Teacher</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:node</span></em><em><span class="c011"> </span></em><em><span class="c011">:UserShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:path</span></em><em><span class="c011"> </span></em><em><span class="c011">:teaches</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011"> </span></em><em><span class="c011">xsd:string</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ]</span></em><em><span class="c011">
</span></em><em><span class="c011">.</span></em></td></tr>
</table><p><em>Given the following data:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:alice</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:Teacher</span></em><em><span class="c011">;                         </span></em><span class="c011"><em><span class="c011">#\Passes{:TeacherShape} *)     </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011">           </span></em><em><span class="c011"><em><span class="c011">"Alice"</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:gender</span></em><em><span class="c011">         </span></em><em><span class="c011">schema:Female</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:knows</span></em><em><span class="c011">          </span></em><em><span class="c011">:bob</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">:teaches</span></em><em><span class="c011">              </span></em><em><span class="c011"><em><span class="c011">"Algebra"</span></em></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:bob</span></em><em><span class="c011">   </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;                           </span></em><span class="c011"><em><span class="c011">#\Passes{:UserShape} *)     </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:gender</span></em><em><span class="c011">         </span></em><em><span class="c011">schema:Male</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011">           </span></em><em><span class="c011"><em><span class="c011">"Robert"</span></em></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:carol</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:Teacher</span></em><em><span class="c011"> ;                        </span></em><span class="c011"><em><span class="c011">#\Fails{:TeacherShape} *)     </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:gender</span></em><em><span class="c011"> 23 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">:teaches</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Logic"</span></em></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>A SHACL processor validates that </em><em>
</em><code><em>:alice</em></code><em> conforms to </em><em>
</em><code><em>:TeacherShape</em></code><em>, and </em><em>
</em><code><em>:bob</em></code><em> to </em><em>
</em><code><em>:UserShape</em></code><em> but reports that </em><em>
</em><code><em>:carol</em></code><em> does not conform to </em><em>
</em><code><em>:TeacherShape</em></code><em>.</em></p></div></div><p><a id="hevea_default508"></a>
</p>
<h2 class="section" id="sec124">5.5  Validation Report</h2>
<p> 
<a id="ch050ValidationReport"></a>
<a id="ch5.sec5"></a></p><p>As we said, SHACL processors take as input a data graph and a shapes graph and return a validation report. </p><p>The validation report is defined as an RDF graph with the following structure.
If the data graph conforms to the shapes graph, the report contains a 
<code>sh:conforms</code> declaration with the value 
<code>true</code>:</p><p><a id="hevea_default509"></a>


</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:report</span><span class="c011"> </span><span class="c011">a</span><span class="c011"> </span><span class="c011">sh:ValidationReport</span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011">sh:conforms</span><span class="c011"> </span><span class="c011">true</span><span class="c011"> .</span></td></tr>
</table><p><a id="hevea_default510"></a>
<a id="hevea_default511"></a>
<a id="hevea_default512"></a>
If the data graph does not conform to the shapes graph, the validation report will have a value 
<code>false</code> for the property 
<code>sh:conforms</code> and a set of validation errors of type 
<code>sh:ValidationResult</code> linked by the property 
<code>sh:result</code>. </p><p><a id="hevea_default513"></a>
Each validation result contains metadata about the cause of the error such as 
<code>sh:focusNode</code>, 
<code>sh:value</code>, 
<code>sh:resultPath</code>, etc.
Table <a href="#ch050.ValidationReportProperties">5.1</a> describes the properties of validation results.</p><p><a id="hevea_default514"></a>
<a id="hevea_default515"></a>
<a id="hevea_default516"></a>
<a id="hevea_default517"></a>
<a id="hevea_default518"></a>
<a id="hevea_default519"></a>
<a id="hevea_default520"></a>
<a id="hevea_default521"></a></p><blockquote class="table"><div class="center"><hr class="c021"></div>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Table 5.1: SHACL validation result properties</td></tr>
</table></div>
<a id="ch050.ValidationReportProperties"></a> 
<div class="center">
<table class="c000 cellpadding1" border=1><tr><td class="c017"> Property</td><td class="c019">Description
</td></tr>
<tr><td class="c017"> 
<code>sh:focusNode</code></td><td class="c019">The focus node that was being validated when the error happened
</td></tr>
<tr><td class="c017"> 
<code>sh:resultPath</code></td><td class="c019">The path from the focus node. This property is optional usually corresponds to the 
<code>sh:path</code> declaration of property shapes
</td></tr>
<tr><td class="c017"> 
<code>sh:value</code></td><td class="c019">The value that violated the constraint, when available
</td></tr>
<tr><td class="c017"> 
<code>sh:sourceShape</code></td><td class="c019">The shape that the focus node was validated against when the constraint was violated. 
</td></tr>
<tr><td class="c017"> 
<code>sh:sourceConstraintComponent</code></td><td class="c019">The IRI that identifies the component that caused the violation. 
</td></tr>
<tr><td class="c017"> 
<code>sh:detail</code></td><td class="c019">May point to further details about the cause of the error. 
This property can be used for reporting errors in nested nested shapes. 
</td></tr>
<tr><td class="c017"> 
<code>sh:resultMessage</code></td><td class="c019">Textual details about the error. This message can be affected by the 
<code>sh:message</code> property (see section <a href="#ch050shMessage">5.6.4</a>)
</td></tr>
<tr><td class="c017"> 
<code>sh:resultSeverity</code></td><td class="c019">A value which is equal to the 
<code>sh:severity</code> value of the shape that caused the violation error. If the shape doesn’t have 
<code>sh:severity</code> declaration then the default value will be 
<code>sh:Violation</code>.</td></tr>
</table>
</div>
<div class="center"><hr class="c021"></div></blockquote><div class="example"><div class="theorem"><span class="c013">Example 99</span>  <p><em>The validation report generated by a SHACL processor when trying to validate the shapes graph in Example </em><a href="#ch050SHACLExample"><em>94</em></a><em> with 
the data graph from Example </em><a href="#ch050SHACLBadDataGraph"><em>96</em></a><em> could be:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:report</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:ValidationReport</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:conforms</span></em><em><span class="c011"> </span></em><em><span class="c011">false</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:result</span></em><em><span class="c011">
</span></em><em><span class="c011"> [ </span></em><em><span class="c011">a</span></em><em><span class="c011">                            </span></em><em><span class="c011">sh:ValidationResult</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:resultSeverity</span></em><em><span class="c011">            </span></em><em><span class="c011">sh:Violation</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:sourceConstraintComponent</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:InConstraintComponent</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:sourceShape</span></em><em><span class="c011"> ... ;         </span></em><span class="c011"><em><span class="c011"># blank node 2</span></em></span><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:focusNode</span></em><em><span class="c011">                 </span></em><em><span class="c011">:dave</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:value</span></em><em><span class="c011">                     </span></em><em><span class="c011">:Unknown</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:resultPath</span></em><em><span class="c011">                </span></em><em><span class="c011">schema:gender</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:resultMessage</span></em><em><span class="c011">  </span></em><em><span class="c011"><em><span class="c011">"Value has none of the shapes from the or list"</span></em></span></em><em><span class="c011">]</span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011"> [ </span></em><em><span class="c011">a</span></em><em><span class="c011">                            </span></em><em><span class="c011">sh:ValidationResult</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:resultSeverity</span></em><em><span class="c011">            </span></em><em><span class="c011">sh:Violation</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:sourceConstraintComponent</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:DatatypeConstraintComponent</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:sourceShape</span></em><em><span class="c011"> ... ;         </span></em><span class="c011"><em><span class="c011"># blank node 3</span></em></span><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:focusNode</span></em><em><span class="c011">                 </span></em><em><span class="c011">:dave</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:value</span></em><em><span class="c011">                     1980 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:resultPath</span></em><em><span class="c011">                </span></em><em><span class="c011">schema:birthDate</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:resultMessage</span></em><em><span class="c011">  </span></em><em><span class="c011"><em><span class="c011">"Value does not have datatype xsd:date"</span></em></span></em><em><span class="c011"> ]</span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011"> [ </span></em><em><span class="c011">a</span></em><em><span class="c011">                            </span></em><em><span class="c011">sh:ValidationResult</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:resultSeverity</span></em><em><span class="c011">            </span></em><em><span class="c011">sh:Violation</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:sourceConstraintComponent</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:ClassConstraintComponent</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:sourceShape</span></em><em><span class="c011"> ... ;         </span></em><span class="c011"><em><span class="c011"># blank node 4</span></em></span><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:focusNode</span></em><em><span class="c011">                 </span></em><em><span class="c011">:dave</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:value</span></em><em><span class="c011">                     </span></em><em><span class="c011">:grace</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:resultPath</span></em><em><span class="c011">                </span></em><em><span class="c011">schema:knows</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:resultMessage</span></em><em><span class="c011">  </span></em><em><span class="c011"><em><span class="c011">"Value is not an instance of User"</span></em></span></em><em><span class="c011"> ]</span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011"> [ </span></em><em><span class="c011">a</span></em><em><span class="c011">                            </span></em><em><span class="c011">sh:ValidationResult</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:resultSeverity</span></em><em><span class="c011">            </span></em><em><span class="c011">sh:Violation</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:sourceConstraintComponent</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:MaxCountConstraintComponent</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:sourceShape</span></em><em><span class="c011"> ... ;         </span></em><span class="c011"><em><span class="c011"># blank node 1</span></em></span><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:focusNode</span></em><em><span class="c011">                 </span></em><em><span class="c011">:emily</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:resultPath</span></em><em><span class="c011">                </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:resultMessage</span></em><em><span class="c011">  </span></em><em><span class="c011"><em><span class="c011">"More than 1 values"</span></em></span></em><em><span class="c011"> ]</span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011"> [ </span></em><em><span class="c011">a</span></em><em><span class="c011">                            </span></em><em><span class="c011">sh:ValidationResult</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:resultSeverity</span></em><em><span class="c011">            </span></em><em><span class="c011">sh:Violation</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:sourceConstraintComponent</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:MinCountConstraintComponent</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:sourceShape</span></em><em><span class="c011"> ...;          </span></em><span class="c011"><em><span class="c011"># blank node 1</span></em></span><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:focusNode</span></em><em><span class="c011">                 </span></em><em><span class="c011">:frank</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:resultPath</span></em><em><span class="c011">                </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:resultMessage</span></em><em><span class="c011">  </span></em><em><span class="c011"><em><span class="c011">"Less than 1 values"</span></em></span></em><em><span class="c011"> ]</span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011"> [ </span></em><em><span class="c011">a</span></em><em><span class="c011">                            </span></em><em><span class="c011">sh:ValidationResult</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:resultSeverity</span></em><em><span class="c011">            </span></em><em><span class="c011">sh:Violation</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:sourceConstraintComponent</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeKindConstraintComponent</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:sourceShape</span></em><em><span class="c011">               </span></em><em><span class="c011">:UserShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:focusNode</span></em><em><span class="c011">                 </span></em><em><span class="c011">_:x</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:value</span></em><em><span class="c011">                     </span></em><em><span class="c011">_:x</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:resultMessage</span></em><em><span class="c011">  </span></em><em><span class="c011"><em><span class="c011">"Value does not have node kind sh:IRI"</span></em></span></em><em><span class="c011">]</span></em><em><span class="c011">
</span></em><em><span class="c011"> .</span></em></td></tr>
</table></div></div><p>Although in the rest of this chapter we will describe the different errors in natural language for simplicity, 
the validation results returned by SHACL processors will have the structure above.</p>
<h2 class="section" id="sec125">5.6  Shapes</h2>
<p>
<a id="ch5.sec6"></a></p><p>There are two types of shapes in SHACL: node shapes and property shapes.
Node shapes specify constraints about a node while 
property shapes specify constraints about the values that can be reached from a node by a path.</p><blockquote class="figure"><div class="center"><hr class="c021"></div> 
<div class="center">
<img src="SHACL_Shapes.png">
</div>

<a id="ch050.SHACLShapes"></a>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Figure 5.1: Shapes in SHACL.</td></tr>
</table></div>
<div class="center"><hr class="c021"></div></blockquote><p><a id="hevea_default522"></a>
</p>
<h3 class="subsection" id="sec126">5.6.1  Node shapes</h3>
<p>
<a id="ch5.sec6.1"></a></p><p>Node shapes directly specify constraints about a focus node. </p><div class="example"><div class="theorem"><span class="c013">Example 100</span>  <em>Node shape example</em><p><em>The following shapes graph declares a node shape </em><em>
</em><code><em>:UserShape</em></code><em> 
which applies to all nodes that are instances of </em><em>
</em><code><em>:User</em></code><em>
and the constraint that nodes conforming to </em><em>
</em><code><em>:UserShape</em></code><em> must be IRIs. </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:UserShape</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011">              </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">           </span></em><em><span class="c011">sh:targetClass</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">           </span></em><em><span class="c011">sh:nodeKind</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:IRI</span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>Given the following RDF graph: </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:alice</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> .                     </span></em><span class="c011"><em><span class="c011">#\Passes{:UserShape} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">&lt;</span></em><em><span class="c011">http:</span></em><em><span class="c011">//</span></em><em><span class="c011">other</span></em><em><span class="c011">.</span></em><em><span class="c011">uri</span></em><em><span class="c011">.</span></em><em><span class="c011">com</span></em><em><span class="c011">/</span></em><em><span class="c011">bob</span></em><em><span class="c011">&gt; </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> . </span></em><span class="c011"><em><span class="c011">#\Passes{:UserShape} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">_:1</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> .                        </span></em><span class="c011"><em><span class="c011">#\Fails{:UserShape} *) </span></em></span></td></tr>
</table><p><em>A SHACL processor checks that </em><em>
</em><code><em>:alice</em></code><em> and </em><em>
</em><code><em>&lt;</em></code><code><em>http:</em></code><code><em>//</em></code><code><em>other</em></code><code><em>.</em></code><code><em>uri</em></code><code><em>.</em></code><code><em>com</em></code><code><em>/</em></code><code><em>bob</em></code><code><em>&gt;</em></code><em> conform to shape </em><em>
</em><code><em>:User</em></code><em> and returns the error:</em></p><ul class="itemize"><li class="li-itemize"><em>
</em><em>
</em><code><em>_:1</em></code><em> is not an IRI
</em></li></ul></div></div><p><a id="hevea_default523"></a>
</p>
<h3 class="subsection" id="sec127">5.6.2  Property Shapes</h3>
<p>
<a id="ch5.sec6.2"></a></p><p><a id="hevea_default524"></a>
Property shapes specify constraints about the values that can be reached from a focus node by some path. 

<code>sh:property</code> associates a shape with a property shape.</p><p>The nodes that are affected by a property shape are specified using 
<code>sh:path</code> property 
that can take as value IRIs or SHACL paths.</p><p><a id="hevea_default525"></a>
<a id="hevea_default526"></a>
SHACL paths are semantically equivalent to a subset of the SPARQL 1.1 property paths but they use an RDF encoding based on the following rules.</p><ul class="itemize"><li class="li-itemize">Direct predicates use a single IRI.<p><a id="hevea_default527"></a>
</p></li><li class="li-itemize">Inverse paths are declared by a blank node with the property 
<code>sh:inversePath</code>.<p><a id="hevea_default528"></a>
</p></li><li class="li-itemize">Sequence paths are encoded by RDF lists whose values are SHACL paths themselves.<p><a id="hevea_default529"></a>
</p></li><li class="li-itemize">Alternative paths are declared by a blank node with the property 
<code>sh:alternativePath</code> whose value is an RDF list with the different alternatives.<p><a id="hevea_default530"></a>
<a id="hevea_default531"></a>
<a id="hevea_default532"></a>
</p></li><li class="li-itemize">The path modifiers 
<code>?</code>, 
<code>*</code>, and 
<code>+</code> are encoded by a blank node with the corresponding 
properties 
<code>sh:zeroOrOnePath</code>, 
<code>sh:zeroOrMorePath</code> or 
<code>oneOrMorePath</code>.
</li></ul><p>Table <a href="#ch050.SHACLPaths">5.2</a> presents some examples of SHACL paths and their corresponding SPARQL paths.</p><blockquote class="table"><div class="center"><hr class="c021"></div>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Table 5.2: SHACL and SPARQL paths</td></tr>
</table></div>
<a id="ch050.SHACLPaths"></a> 
<div class="center">
<table class="c000 cellpadding1" border=1><tr><td class="c020"> SHACL path</td><td class="c020">SPARQL path
</td></tr>
<tr><td class="c020"> 
<code>schema:name</code></td><td class="c020">
<code>schema:name</code>
</td></tr>
<tr><td class="c020"> 
<code>[</code><code>sh:inversePath</code><code> </code><code>schema:knows</code><code>]</code></td><td class="c020">
<code>^</code><code>schema:knows</code>
</td></tr>
<tr><td class="c020"> 
<code>(</code><code>schema:knows</code><code> </code><code>schema:name</code><code>)</code></td><td class="c020">
<code>schema:knows</code><code>/</code><code>schema:name</code>
</td></tr>
<tr><td class="c020"> 
<code>[</code><code>sh:alternativePath</code><code> (</code><code>schema:knows</code><code> </code><code>schema:follows</code><code>)]</code></td><td class="c020">
<code>schema:knows</code>|
<code>schema:follows</code> 
</td></tr>
<tr><td class="c020"> 
<code>[</code><code>sh:zeroOrOnePath</code><code> </code><code>schema:knows</code><code>]</code></td><td class="c020">
<code>schema:knows</code><code>?</code>
</td></tr>
<tr><td class="c020"> 
<code>[</code><code>sh:oneOrMorePath</code><code> </code><code>schema:knows</code><code>]</code></td><td class="c020">
<code>schema:knows</code><code>+</code>
</td></tr>
<tr><td class="c020"> 
<code>([</code><code>sh:zeroOrMorePath</code><code> </code><code>schema:knows</code><code>] </code><code>schema:name</code><code>)</code></td><td class="c020">
<code>schema:knows</code><code>*/</code><code>schema:name</code>
</td></tr>
</table>
</div>
<div class="center"><hr class="c021"></div></blockquote><div class="example"><div class="theorem"><span class="c013">Example 101</span>  <em>SHACL paths example</em><p><em>The following shape declares that nodes that are instances of </em><em>
</em><code><em>:User</em></code><em> 
must satisfy that they must have a value for property </em><em>
</em><code><em>schema:knows</em></code><em> or </em><em>
</em><code><em>schema:follows</em></code><em>, 
which must be an IRI and 
that any node linked to users by the transitive closure of the </em><em>
</em><code><em>schema:knows</em></code><em> property 
must have a </em><em>
</em><code><em>schema:email</em></code><em> whose value must also be an IRI.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:UserShape</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:targetClass</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     [</span></em><em><span class="c011">sh:alternativePath</span></em><em><span class="c011"> (</span></em><em><span class="c011">schema:knows</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:follows</span></em><em><span class="c011">)] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:nodeKind</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:IRI</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011"> ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     ([</span></em><em><span class="c011">sh:oneOrMorePath</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:knows</span></em><em><span class="c011">] </span></em><em><span class="c011">schema:email</span></em><em><span class="c011">) ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:nodeKind</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:IRI</span></em><em><span class="c011">
</span></em><em><span class="c011"> ].</span></em></td></tr>
</table><p><em>Given the following RDF data:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:alice</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011">              </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;                 </span></em><span class="c011"><em><span class="c011">#\Passes{:UserShape} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:follows</span></em><em><span class="c011"> &lt;</span></em><em><span class="c011">mailto:alice@mail</span></em><em><span class="c011">.</span></em><em><span class="c011">org</span></em><em><span class="c011">&gt;;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:knows</span></em><em><span class="c011">   </span></em><em><span class="c011">:bob,</span></em><em><span class="c011"> </span></em><em><span class="c011">:carol</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:bob</span></em><em><span class="c011">   </span></em><em><span class="c011">schema:email</span></em><em><span class="c011"> &lt;</span></em><em><span class="c011">mailto:bob@mail</span></em><em><span class="c011">.</span></em><em><span class="c011">org</span></em><em><span class="c011">&gt;;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:knows</span></em><em><span class="c011"> </span></em><em><span class="c011">:carol</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:carol</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:email</span></em><em><span class="c011"> &lt;</span></em><em><span class="c011">mailto:carol@mail</span></em><em><span class="c011">.</span></em><em><span class="c011">org</span></em><em><span class="c011">&gt; .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:dave</span></em><em><span class="c011">  </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;                              </span></em><span class="c011"><em><span class="c011">#\Fails{:UserShape} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:knows</span></em><em><span class="c011"> &lt;</span></em><em><span class="c011">mailto:dave@mail</span></em><em><span class="c011">.</span></em><em><span class="c011">org</span></em><em><span class="c011">&gt; ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:knows</span></em><em><span class="c011"> </span></em><em><span class="c011">:carol,</span></em><em><span class="c011"> </span></em><em><span class="c011">:emily</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:emily</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:email</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Unknown"</span></em></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>A SHACL processor verifies that </em><em>
</em><code><em>:alice</em></code><em> conforms to shape </em><em>
</em><code><em>:UserShape</em></code><em> because it has </em><em>
</em><code><em>schema:email</em></code><em> with an IRI value and 
all the nodes that can be reached by the property </em><em>
</em><code><em>schema:knows</em></code><em> one or more times followed by the property </em><em>
</em><code><em>schema:email</em></code><em> 
(which is equivalent to </em><em>
</em><code><em>schema:knows</em></code><code><em>+/</em></code><code><em>schema:email</em></code><em> using SPARQL notation) are also IRIs. </em></p><p><em>The SHACL processor would return error for </em><em>
</em><code><em>:dave</em></code><em> because one of the values of </em><em>
</em><code><em>schema:knows</em></code><em> has an </em><em>
</em><code><em>schema:email</em></code><em> that is not an IRI (</em><em>
</em><code><em>:emily</em></code><em>).</em></p></div></div>
<h3 class="subsection" id="sec128">5.6.3  Constraint Components</h3>
<p>
<a id="ch5.sec6.3"></a></p><p><a id="hevea_default533"></a>
SHACL defines the concept of constraint components which are associated with shapes to declare constraints. 
Each node or property shape can be associated with several constraint components. </p><p>Constraint components are identified by an IRI and have two types of parameters: mandatory and optional. 
The association between a shape and a constraint component is made by declaring values for the parameters. 
The parameters are also identified by IRIs and have values. 
Most of the constraint components in SHACL Core have a single parameter and follow the convention that 
if the parameter is named 
<code>sh:p</code>, the corresponding constraint component is named 
<code>sh:pConstraintComponent</code>.</p><div class="example"><div class="theorem"><span class="c013">Example 102</span>  <em>Shape with two constraints</em><p><em>The following code:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:UserShape</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011">           </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">           </span></em><em><span class="c011">sh:nodeKind</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:IRI</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">           </span></em><em><span class="c011">sh:class</span></em><em><span class="c011">    </span></em><em><span class="c011">schema:Person</span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>declares a node shape </em><em>
</em><code><em>:UserShape</em></code><em> with two constraints which are associated with the following constraint components:</em></p><ul class="itemize"><li class="li-itemize"><p><a id="hevea_default534"></a><em>
</em></p><em>
</em><code><em>sh:NodeKindConstraintComponent</em></code><em> with the value </em><em>
</em><code><em>sh:IRI</em></code><em> for the parameter </em><em>
</em><code><em>sh:nodeKind</em></code><em>. 
The constraint means that nodes that conform to </em><em>
</em><code><em>:UserShape</em></code><em> must be IRIs; and</em><p><a id="hevea_default535"></a><em>
</em></p></li><li class="li-itemize"><em>
</em><code><em>sh:ClassConstraintComponent</em></code><em> with the value </em><em>
</em><code><em>schema:Person</em></code><em> for the parameter </em><em>
</em><code><em>sh:class</em></code><em>. 
The constraint means that nodes conforming to </em><em>
</em><code><em>:UserShape</em></code><em> must be instances of </em><em>
</em><code><em>schema:Person</em></code><em>.
</em></li></ul><p><em>Given the following data:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:alice</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:Person</span></em><em><span class="c011"> .   </span></em><span class="c011"><em><span class="c011">#\Passes{:UserShape} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:bob</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:Product</span></em><em><span class="c011"> .    </span></em><span class="c011"><em><span class="c011">#\Fails{:UserShape} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">_:x</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:Person</span></em><em><span class="c011"> .      </span></em><span class="c011"><em><span class="c011">#\Fails{:UserShape} *)</span></em></span></td></tr>
</table></div></div><p>When a constraint component declares a single parameter, 
the parameter may be used several times in the same shape. 
Each value of the parameter declares a different constraint. 
The interpretations of such declarations is conjunctive, i.e., all constraints apply. </p><div class="example"><div class="theorem"><span class="c013">Example 103</span>  <em>Shape with two constraints with the same parameter</em><p><em>The following code:</em></p><p><a id="hevea_default536"></a><em>
</em><em>

</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:UserShape</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011">        </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">           </span></em><em><span class="c011">sh:class</span></em><em><span class="c011"> </span></em><em><span class="c011">foaf:Person</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">           </span></em><em><span class="c011">sh:class</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:Person</span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>Declares two constraints with the parameter </em><em>
</em><code><em>sh:class</em></code><em> that means that nodes conforming to </em><em>
</em><code><em>:UserShape</em></code><em> must be instances of both </em><em>
</em><code><em>foaf:Person</em></code><em> and </em><em>
</em><code><em>schema:Person</em></code><em>.</em></p></div></div><p>Constraint components are associated with validators which define the behavior of the constraint. </p><p>SHACL Core contains a list of built-in constraint components that are classified in 
Table <a href="#ch050CoreConstraintComponents">5.3</a>.
In the table, we included the parameter names because they are shorter than the component IRIs.
Those components will be described in more detail in their corresponding sections later in this chapter. </p><p><a id="hevea_default537"></a> <a id="hevea_default538"></a> 
<a id="hevea_default539"></a> <a id="hevea_default540"></a> <a id="hevea_default541"></a> 
<a id="hevea_default542"></a> <a id="hevea_default543"></a> 
<a id="hevea_default544"></a> 
<a id="hevea_default545"></a> 
<a id="hevea_default546"></a> 
<a id="hevea_default547"></a> 
<a id="hevea_default548"></a> 
<a id="hevea_default549"></a> 
<a id="hevea_default550"></a> 
<a id="hevea_default551"></a> 
<a id="hevea_default552"></a> 
<a id="hevea_default553"></a> 
<a id="hevea_default554"></a> <a id="hevea_default555"></a> <a id="hevea_default556"></a> <a id="hevea_default557"></a> 
<a id="hevea_default558"></a> 
<a id="hevea_default559"></a> 
<a id="hevea_default560"></a> 
<a id="hevea_default561"></a> 
<a id="hevea_default562"></a> 
<a id="hevea_default563"></a> 
<a id="hevea_default564"></a> <a id="hevea_default565"></a> <a id="hevea_default566"></a> <a id="hevea_default567"></a> 
<a id="hevea_default568"></a> <a id="hevea_default569"></a> <a id="hevea_default570"></a> <a id="hevea_default571"></a>
</p><blockquote class="table"><div class="center"><hr class="c021"></div>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Table 5.3: SHACL core constraint components</td></tr>
</table></div>
<a id="ch050CoreConstraintComponents"></a> 
<div class="center">
<table class="c000 cellpadding1" border=1><tr><td class="c020"> Operation</td><td class="c019">Parameters</td><td class="c017">Section 
</td></tr>
<tr><td class="c020"> Cardinality constraints</td><td class="c019">
<code>sh:minCount</code>, 
<code>sh:maxCount</code></td><td class="c017"><a href="#ch050Cardinalities">5.8</a> 
</td></tr>
<tr><td class="c020"> Value types</td><td class="c019">
<code>sh:class</code>, 
<code>sh:datatype</code>, 
<code>sh:nodeKind</code> <br>

<code>sh:in</code>, 
<code>sh:hasValue</code></td><td class="c017"><a href="#ch050ValueTypes">5.9</a>
</td></tr>
<tr><td class="c020"> Value range constraints</td><td class="c019">
<code>sh:minInclusive</code>, 
<code>sh:maxInclusive</code> <br>

<code>sh:minExclusive</code>, 
<code>sh:maxExclusive</code></td><td class="c017"><a href="#ch050ValueRanges">5.10.1</a>
</td></tr>
<tr><td class="c020"> String based constraints</td><td class="c019">
<code>sh:minLength</code>, 
<code>sh:maxLength</code> <br>

<code>sh:length</code> 
<code>sh:pattern</code></td><td class="c017"><a href="#ch040Stringbased">5.10.2</a>
</td></tr>
<tr><td class="c020"> Language based</td><td class="c019">
<code>sh:uniqueLang</code>, 
<code>sh:languageIn</code></td><td class="c017"><a href="#ch050LanguageBased">5.10.3</a>
</td></tr>
<tr><td class="c020"> Logical constraints</td><td class="c019">
<code>sh:and</code>, 
<code>sh:or</code>, 
<code>sh:xone</code>, 
<code>sh:not</code></td><td class="c017"><a href="#ch050logicalConstraints">5.11</a>
</td></tr>
<tr><td class="c020"> Shape-based constraints</td><td class="c019">
<code>sh:node</code>, 
<code>sh:property</code> <br>

<code>sh:qualifiedValueShape</code>, 
<code>sh:qualifiedValueShapesDisjoint</code> <br>

<code>sh:qualifiedMinCount</code> 
<code>sh:qualifiedMaxCount</code></td><td class="c017"><a href="#ch050shapeBasedConstraints">5.12</a>
</td></tr>
<tr><td class="c020"> Closed shapes</td><td class="c019">
<code>sh:closed</code>, 
<code>sh:ignoredProperties</code></td><td class="c017"><a href="#ch050Closed">5.13</a>
</td></tr>
<tr><td class="c020"> Property pair constraints</td><td class="c019">
<code>sh:equals</code>, 
<code>sh:disjoint</code> <br>

<code>sh:lesThan</code>, 
<code>sh:lessThanOrEquals</code></td><td class="c017"><a href="#ch050propertyPairConstraints">5.14</a>
</td></tr>
<tr><td class="c020"> Non-validating constraints</td><td class="c019">
<code>sh:name</code>, 
<code>sh:description</code>, 
<code>sh:order</code>, 
<code>sh:group</code></td><td class="c017"><a href="#ch050NonValidating">5.15</a>
</td></tr>
</table>
</div>
<div class="center"><hr class="c021"></div></blockquote><p><a id="hevea_default572"></a>
As we will show in Section <a href="#ch050SHACLSPARQL">5.16</a>, SHACL-SPARQL can be used to declare other constraint components.</p>
<h3 class="subsection" id="sec129">5.6.4  Human Friendly Messages</h3>
<p> 
<a id="ch050shMessage"></a>
<a id="ch5.sec6.4"></a></p><p><a id="hevea_default573"></a>
<a id="hevea_default574"></a>
The property <span class="c007"><span class="c011"><span class="c010">sh:message</span></span></span> can be used to associate a human-friendly message
with a shape. 
If there is a violation that affects that shape, a SHACL processor can include 
the value of <span class="c007"><span class="c011"><span class="c010">sh:message</span></span></span> as the value of 
<code>sh:resultMessage</code> 
in the validation report. </p><div class="example"><div class="theorem"><span class="c013">Example 104</span>  <em>
</em><code><em>sh:message</em></code><em> example</em><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:UserShape</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:targetClass</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [             </span></em><span class="c011"><em><span class="c011"># Blank node 1</span></em></span><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">      </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011">  1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c009">sh:message</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><em><span class="c011">"Where is the name?"</span></em></span></em><em><span class="c011">
</span></em><em><span class="c011">  ] .</span></em></td></tr>
</table><p><em>Given the following RDF graph: </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:alice</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;                </span></em><span class="c011"><em><span class="c011">#\Passes{:UserShape} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Alice"</span></em></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:bob</span></em><em><span class="c011">   </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;                </span></em><span class="c011"><em><span class="c011">#\Fails{:UserShape} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">foaf:name</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Bob"</span></em></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>A SHACL processor would return the following validation report:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:report</span></em><em><span class="c011">      </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:ValidationReport</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:conforms</span></em><em><span class="c011"> </span></em><em><span class="c011">false</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:result</span></em><em><span class="c011"> [ </span></em><em><span class="c011">a</span></em><em><span class="c011">                 </span></em><em><span class="c011">sh:ValidationResult</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:resultSeverity</span></em><em><span class="c011">            </span></em><em><span class="c011">sh:Violation</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:sourceConstraintComponent</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:MinCountConstraintComponent</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:sourceShape</span></em><em><span class="c011"> ... ;         </span></em><span class="c011"><em><span class="c011"># Blank node 1</span></em></span><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:focusNode</span></em><em><span class="c011">                </span></em><em><span class="c011">:bob</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:resultPath</span></em><em><span class="c011">               </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c009">sh:resultMessage</span></span></em><em><span class="c011">            </span></em><em><span class="c011"><em><span class="c011">"Where is the name?"</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">] .</span></em></td></tr>
</table></div></div>
<h3 class="subsection" id="sec130">5.6.5  Declaring Shape Severities</h3>
<p> 
<a id="ch050severity"></a>
<a id="ch5.sec6.5"></a></p><p><a id="hevea_default575"></a>
The property <span class="c007"><span class="c011"><span class="c010">sh:severity</span></span></span> can be used to declare a severity value for a shape. 
If there is a violation that affects that shape, a SHACL processor can include the value of <span class="c007"><span class="c011"><span class="c010">sh:severity</span></span></span> as the value of 

<code>sh:resultSeverity</code> in the validation report. 
<a id="hevea_default576"></a>
<a id="hevea_default577"></a>
<a id="hevea_default578"></a>
SHACL describes three kinds of severity levels: 
<span class="c007"><span class="c011"><span class="c010">sh:Info</span></span></span>, <span class="c007"><span class="c011"><span class="c010">sh:Warning</span></span></span>, and <span class="c007"><span class="c011"><span class="c010">sh:Violation</span></span></span>. 
If the shape does not declare a severity value, the default one is 
<code>sh:Violation</code>.</p><div class="example"><div class="theorem"><span class="c013">Example 105</span>  <em>
</em><code><em>sh:severity</em></code><em> example</em><p><em>Given the following shapes graph: </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:UserShape</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:targetClass</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [             </span></em><span class="c011"><em><span class="c011"># Blank node 1</span></em></span><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011"> </span></em><em><span class="c011">xsd:string</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c009">sh:severity</span></span></em><em><span class="c011"> </span></em><em><span class="c011">sh:Warning</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] .</span></em></td></tr>
</table><p><em>and the RDF graph: </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:alice</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;                   </span></em><span class="c011"><em><span class="c011">#\Passes{:UserShape} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Alice"</span></em></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:bob</span></em><em><span class="c011">   </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;                   </span></em><span class="c011"><em><span class="c011">#\Fails{:UserShape} *)  </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> 23 .</span></em></td></tr>
</table><p><em>A SHACL processor returns the following validation report:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:report</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011">                      </span></em><em><span class="c011">:ValidationReport</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:conforms</span></em><em><span class="c011">                   </span></em><em><span class="c011">false</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:result</span></em><em><span class="c011"> [ </span></em><em><span class="c011">a</span></em><em><span class="c011">                 </span></em><em><span class="c011">sh:ValidationResult</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c009">sh:resultSeverity</span></span></em><em><span class="c011">            </span></em><em><span class="c011"><span class="c009">sh:Warning</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:sourceConstraintComponent</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:DatatypeConstraintComponent</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:sourceShape</span></em><em><span class="c011"> ... ;         </span></em><span class="c011"><em><span class="c011"># Blank node 1</span></em></span><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:focusNode</span></em><em><span class="c011">                 </span></em><em><span class="c011">:bob</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:resultPath</span></em><em><span class="c011">                </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:resultMessage</span></em><em><span class="c011">             </span></em><em><span class="c011"><em><span class="c011">"Datatype should be xsd:string"</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:value</span></em><em><span class="c011">                     23</span></em><em><span class="c011">
</span></em><em><span class="c011">] .</span></em></td></tr>
</table></div></div>
<h3 class="subsection" id="sec131">5.6.6  Deactivating Shapes</h3>
<p> 
<a id="ch050deactivate"></a>
<a id="ch5.sec6.6"></a></p><p><a id="hevea_default579"></a>
If a shape has the property 
<code>sh:deactivated</code> with the value 
<code>true</code> then it is deactivated and all RDF terms will conform to it.</p><p>A typical use case for deactivated shapes is when one 
imports shapes from another graph by a third party and wants to deactivate some of the shapes in the local shapes graph that do not apply in the current context. </p><p>Notice that if the author of a shapes library anticipates that a shape may need to be disabled or modified by others, 
it may be better to use IRIs instead of blank nodes, so they can be referenced later.</p><div class="example"><div class="theorem"><span class="c013">Example 106</span>  <em>Deactivating shapes</em><em> 
</em><a id="ch050DeactivatingShapes"></a><p><em>Let’s assume that there is a shapes library available at IRI 
</em><a href="http://example.org/UserShapes"><em><span class="c010">http://example.org/UserShapes</span></em></a><em> with the following shapes graph:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:UserShape</span></em><em><span class="c011">        </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:targetClass</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:property</span></em><em><span class="c011">    </span></em><em><span class="c011">:HasName</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:property</span></em><em><span class="c011">    </span></em><em><span class="c011">:HasEmail</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:HasName</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">      </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">         </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011">  1;</span></em><em><span class="c011">
</span></em><em><span class="c011">         </span></em><em><span class="c011">sh:maxCount</span></em><em><span class="c011">  1;</span></em><em><span class="c011">
</span></em><em><span class="c011">         </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011">  </span></em><em><span class="c011">xsd:string</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:HasEmail</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:email</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">          </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">          </span></em><em><span class="c011">sh:nodeKind</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:IRI</span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>And we define a shapes graph importing the previous shapes and adding a declaration for </em><em>
</em><code><em>:TeacherShape</em></code><em> that deactivates the property </em><em>
</em><code><em>:HasEmail</em></code><em>:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">&lt;&gt; </span></em><em><span class="c011">owl:imports</span></em><em><span class="c011"> &lt;</span></em><em><span class="c011">http:</span></em><em><span class="c011">//</span></em><em><span class="c011">example</span></em><em><span class="c011">.</span></em><em><span class="c011">org</span></em><em><span class="c011">/</span></em><em><span class="c011">UserShapes</span></em><em><span class="c011">&gt; .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:TeacherShape</span></em><em><span class="c011">  </span></em><em><span class="c011">a</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:targetClass</span></em><em><span class="c011"> </span></em><em><span class="c011">:Teacher</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:node</span></em><em><span class="c011">        </span></em><em><span class="c011">:UserShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">      </span></em><em><span class="c011">:teaches</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011">  1;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011">  </span></em><em><span class="c011">xsd:string</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:HasEmail</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c009">sh:deactivated</span></span></em><em><span class="c011"> </span></em><em><span class="c011">true</span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>The merged shapes graph deactivates the property shape </em><em>
</em><code><em>:HasEmail</em></code><em> so nodes that conform to </em><em>
</em><code><em>:TeacherShape</em></code><em> need to conform to </em><em>
</em><code><em>:UserShape</em></code><em> but do not need to have </em><em>
</em><code><em>schema:email</em></code><em> property.</em></p><p><em>Given the following RDF data:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:alice</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:Teacher</span></em><em><span class="c011"> ;                      </span></em><span class="c011"><em><span class="c011">#\Passes{:TeacherShape} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Alice"</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:email</span></em><em><span class="c011"> &lt;</span></em><em><span class="c011">mailto:alice@example</span></em><em><span class="c011">.</span></em><em><span class="c011">org</span></em><em><span class="c011">&gt;;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">:teaches</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Logic"</span></em></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:bod</span></em><em><span class="c011">   </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:Teacher</span></em><em><span class="c011"> ;                      </span></em><span class="c011"><em><span class="c011">#\Passes{:TeacherShape} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Robert"</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:email</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"This email is not an IRI"</span></em></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">:teaches</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Algebra"</span></em></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:carol</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:Teacher</span></em><em><span class="c011"> ;                      </span></em><span class="c011"><em><span class="c011">#\Fails{:TeacherShape} *)   </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> 23 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">:teaches</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Logic"</span></em></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>A SHACL processor checks that </em><em>
</em><code><em>:alice</em></code><em> and </em><em>
</em><code><em>:bob</em></code><em> conform to </em><em>
</em><code><em>:TeacherShape</em></code><em> even if </em><em>
</em><code><em>:bob</em></code><em> does not conform to the </em><em>
</em><code><em>:HasEmail</em></code><em> shape. 
It returns the following error:</em></p><ul class="itemize"><li class="li-itemize"><em>
</em><code><em>:carol</em></code><em> does not conform to </em><em>
</em><code><em>:TeacherShape</em></code><em> because it does not conform to </em><em>
</em><code><em>:UserShape</em></code><em> as the value of property </em><em>
</em><code><em>schema:name</em></code><em> does not have datatype </em><em>
</em><code><em>xsd:string</em></code><em>.
</em></li></ul></div></div><p><a id="hevea_default580"></a>
</p>
<h2 class="section" id="sec132">5.7  Target Declarations</h2>
<p> 
<a id="ch050TargetNodes"></a>
<a id="ch5.sec7"></a></p><p>SHACL shapes may define several target declarations.
Target declarations specify the set of nodes that will be validated against a shape. 
Table <a href="#ch050.TargetDeclarations">5.4</a> contains the different target declarations defined in SHACL core.</p><p>SHACL targets provide the same functionality as the ShEx Shape maps (see <a href="bookHtml011.html#ch040ShapeMaps">4.9</a>).
We discuss the core differences in section <a href="bookHtml014.html#ch7.sec4">7.4</a>.</p><p><a id="hevea_default581"></a>
<a id="hevea_default582"></a>
<a id="hevea_default583"></a>
<a id="hevea_default584"></a>
</p><blockquote class="table"><div class="center"><hr class="c021"></div>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Table 5.4: SHACL target declarations</td></tr>
</table></div>
<a id="ch050.TargetDeclarations"></a> 
<div class="center">
<table class="c000 cellpadding1" border=1><tr><td class="c020"> Value</td><td class="c019">Description
</td></tr>
<tr><td class="c020"> 
<code>sh:targetNode</code></td><td class="c019">Directly point to a node
</td></tr>
<tr><td class="c020"> 
<code>sh:targetClass</code></td><td class="c019">All nodes that are instances of some class
</td></tr>
<tr><td class="c020"> 
<code>sh:targetSubjectsOf</code></td><td class="c019">All nodes that are subjects of some predicate 
</td></tr>
<tr><td class="c020"> 
<code>sh:targetObjectsOf</code></td><td class="c019">All nodes that are objects of some predicate 
</td></tr>
</table>
</div>
<div class="center"><hr class="c021"></div></blockquote><p><a id="hevea_default585"></a>
</p>
<h3 class="subsection" id="sec133">5.7.1  Target Node</h3>
<p> 
<a id="ch050TargetNode"></a>
<a id="ch5.sec7.1"></a></p><p>The predicate 
<code>sh:targetNode</code> declares a node that must conform to some shape. </p><div class="example"><div class="theorem"><span class="c013">Example 107</span>  <em>
</em><code><em>sh:targetNode</em></code><em> example</em><p><em>In the following example, </em><em>
</em><code><em>:alice</em></code><em>, </em><em>
</em><code><em>:bob</em></code><em>, and </em><em>
</em><code><em>:carol</em></code><em> are declared as the target nodes of </em><em>
</em><code><em>:UserShape</em></code><em> so a SHACL processor will validate those nodes.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:UserShape</span></em><em><span class="c011">       </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c009">sh:targetNode</span></span></em><em><span class="c011"> </span></em><em><span class="c011">:alice,</span></em><em><span class="c011"> </span></em><em><span class="c011">:bob,</span></em><em><span class="c011"> </span></em><em><span class="c011">:carol</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:maxCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011"> </span></em><em><span class="c011">xsd:string</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] .</span></em></td></tr>
</table><p><em>Given the RDF graph:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:alice</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Alice Cooper"</span></em></span></em><em><span class="c011"> .   </span></em><span class="c011"><em><span class="c011">#\Passes{:UserShape} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:bob</span></em><em><span class="c011">   </span></em><em><span class="c011">foaf:name</span></em><em><span class="c011">   </span></em><em><span class="c011"><em><span class="c011">"Bob"</span></em></span></em><em><span class="c011"> .            </span></em><span class="c011"><em><span class="c011">#\Fails{:UserShape} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:carol</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> 23 .               </span></em><span class="c011"><em><span class="c011">#\Fails{:UserShape} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:dave</span></em><em><span class="c011">  </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> 45 .               </span></em><span class="c011"><em><span class="c011"># Ignored</span></em></span></td></tr>
</table><p><em>A SHACL processor checks that </em><em>
</em><code><em>:alice</em></code><em> conforms to </em><em>
</em><code><em>:UserShape</em></code><em> and returns the errors:</em></p><ul class="itemize"><li class="li-itemize"><em>
</em><code><em>:bob</em></code><em> does not have have value for property </em><em>
</em><code><em>schema:name</em></code><em>
</em></li><li class="li-itemize"><em>
</em><code><em>:carol</em></code><em> has a value which is not a </em><em>
</em><code><em>xsd:string</em></code><em> for property </em><em>
</em><code><em>schema:name</em></code><em>.
</em></li></ul><p><em>Notice that it ignores </em><em>
</em><code><em>:dave</em></code><em> as it was not affected by the </em><em>
</em><code><em>sh:targetNode</em></code><em> declaration.</em></p></div></div><p>
<code>sh:targetNode</code> provides a similar functionality to the ShEx Fixed shape map (see  <a href="bookHtml011.html#ch040fixedShapeMaps">4.9.1</a>).
However, the difference is that SHACL target nodes silently ignore missing target nodes from the data graph, while in ShEx, we get back a failure.
Depending on the data and constraint modeling approach, silent ignore may lead to false-positives and thus, target nodes should be used with caution.</p><p><a id="hevea_default586"></a>
</p>
<h3 class="subsection" id="sec134">5.7.2  Target Class</h3>
<p> 
<a id="ch050targetClass"></a>
<a id="ch5.sec7.2"></a></p><p>Target class declarations specify that all instances of some class must be validated with some shape. </p><p><a id="hevea_default587"></a> <a id="ch050SHACLInstance"></a>
<a id="hevea_default588"></a>
<a id="hevea_default589"></a>
SHACL employs a specific notion of instance, which is called <em>SHACL instance</em>, which can be defined using SPARQL property paths as: 
A node 
<code>X</code> is a SHACL instance of a class 
<code>C</code> if 
<code>X</code><code> </code><code>rdf:type</code><code>/</code><code>rdfs:subClassOf</code><code>* </code><code>C</code>.</p><p>It means that nodes with an explicit 
<code>rdf:type</code> arc declaration are considered 
but also values that have an 
<code>rdf:type</code> declaration pointing to some class that is transitively linked to another class by the 
<code>rdfs:subClassOf</code> predicate.
Note that the definition uses only the predicate 
<code>rdfs:subClassOf</code> but does not take into account other predicates from RDFS like 
<code>rdfs:domain</code>, 
<code>rdfs:target</code>, etc. 
The definition is does not require RDFS inference.</p><div class="example"><div class="theorem"><span class="c013">Example 108</span>  <em>
</em><code><em>sh:targetClass</em></code><em> example</em><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:UserShape</span></em><em><span class="c011">   </span></em><em><span class="c011">a</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c009">sh:targetClass</span></span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:maxCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011"> </span></em><em><span class="c011">xsd:string</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ] .</span></em></td></tr>
</table><p><em>Given the following RDF graph:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:alice</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011">;                     </span></em><span class="c011"><em><span class="c011">#\Passes{:UserShape} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Alice Cooper"</span></em></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:bob</span></em><em><span class="c011">   </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011">;                     </span></em><span class="c011"><em><span class="c011">#\Fails{:UserShape} *)  </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">foaf:name</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Bob"</span></em></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:carol</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011">;                     </span></em><span class="c011"><em><span class="c011">#\Fails{:UserShape} *)  </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> 23 .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:dave</span></em><em><span class="c011">  </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:Student</span></em><em><span class="c011"> ;                 </span></em><span class="c011"><em><span class="c011">#\Fails{:UserShape} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> 45 .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:emily</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:Student</span></em><em><span class="c011"> ;                 </span></em><span class="c011"><em><span class="c011">#\Passes{:UserShape} *)  </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Emily"</span></em></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:Student</span></em><em><span class="c011"> </span></em><em><span class="c011">rdfs:subClassOf</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>A SHACL validator checks that both </em><em>
</em><code><em>:alice</em></code><em> and </em><em>
</em><code><em>:emily</em></code><em> conform to </em><em>
</em><code><em>:UserShape</em></code><em> and returns the following errors:</em></p><ul class="itemize"><li class="li-itemize"><em>
</em><code><em>:bob</em></code><em> does not have property </em><em>
</em><code><em>schema:name</em></code><em>.
</em></li><li class="li-itemize"><em>
</em><code><em>:carol</em></code><em> has a value for </em><em>
</em><code><em>schema:name</em></code><em> that is not an </em><em>
</em><code><em>xsd:string</em></code><em>.
</em></li><li class="li-itemize"><em>
</em><code><em>:dave</em></code><em> has a value for </em><em>
</em><code><em>schema:name</em></code><em> that is not an </em><em>
</em><code><em>xsd:string</em></code><em>.
</em></li></ul></div></div>
<h3 class="subsection" id="sec135">5.7.3  Implicit Class Target</h3>
<p> 
<a id="ch050implicitTargetClass"></a>
<a id="ch5.sec7.3"></a></p><p><a id="hevea_default590"></a> <a id="hevea_default591"></a>
<a id="hevea_default592"></a>
<a id="hevea_default593"></a>
A shape with type 
<code>sh:NodeShape</code> and 
<code>rdfs:Class</code> is a target class of itself.
This means that the 
<code>sh:targetClass</code> declaration is implicit.</p><div class="example"><div class="theorem"><span class="c013">Example 109</span>  <em>Example using implicit targetClass</em><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:User</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape,</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c009">rdfs:Class</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:maxCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011"> </span></em><em><span class="c011">xsd:string</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ] .</span></em></td></tr>
</table><p><em>has the same validation behavior as:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:User</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011">         </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c009">sh:targetClass</span></span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:maxCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011"> </span></em><em><span class="c011">xsd:string</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ] .</span></em></td></tr>
</table><p><em>So given the following RDF graph:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:alice</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011">;                      </span></em><span class="c011"><em><span class="c011">#\Passes{:User} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Alice Cooper"</span></em></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:bob</span></em><em><span class="c011">   </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011">;                      </span></em><span class="c011"><em><span class="c011">#\Fails{:User} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">foaf:name</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Robert"</span></em></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>The system would return the following error. </em></p><ul class="itemize"><li class="li-itemize"><em>
</em><code><em>:bob</em></code><em> does not have property </em><em>
</em><code><em>schema:name</em></code><em>.
</em></li></ul></div></div><p>Implicit target class declarations conflate the concept of shape and class as a single entity. 
This can be a dangerous practice in the open semantic web as they are different concepts (see <a href="bookHtml010.html#ch030ShapesNotTypes">3.2</a>). 
It can also be a very convenient feature to associate shape constraints with classes, 
and the Data Shapes Working Group decided to support it. </p><p>In this book, we opt to separate shapes and classes, using the following pattern:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011"><span class="c009">:UserShape</span></span><span class="c011"> </span><span class="c011">a</span><span class="c011">              </span><span class="c011">sh:NodeShape</span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">           </span><span class="c011">sh:targetClass</span><span class="c011"> </span><span class="c011">:User</span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> ...</span></td></tr>
</table>
<h3 class="subsection" id="sec136">5.7.4  Target Subjects Of</h3>
<p> 
<a id="ch5.sec7.4"></a></p><p><a id="hevea_default594"></a> 
The property 
<code>sh:targetSubjectsOf</code> selects as focus nodes the subjects of some property.</p><div class="example"><div class="theorem"><span class="c013">Example 110</span>  <em>
</em><code><em>sh:targetSubjectsOf</em></code><em> example</em><em> 
</em><a id="ch050targetSubjectsOfExample"></a><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:UserShape</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c009">sh:targetSubjectsOf</span></span></em><em><span class="c011"> </span></em><em><span class="c011">:teaches</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:path</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:maxCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011"> </span></em><em><span class="c011">xsd:string</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ] .</span></em></td></tr>
</table><p><em>Given the following RDF graph:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:alice</span></em><em><span class="c011"> </span></em><em><span class="c011">:teaches</span></em><em><span class="c011"> </span></em><em><span class="c011">:Algebra</span></em><em><span class="c011"> ;     </span></em><span class="c011"><em><span class="c011">#\Passes{:UserShape} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Alice"</span></em></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:bob</span></em><em><span class="c011">   </span></em><em><span class="c011">:teaches</span></em><em><span class="c011"> </span></em><em><span class="c011">:Logic</span></em><em><span class="c011"> ;       </span></em><span class="c011"><em><span class="c011">#\Fails{:UserShape} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">foaf:name</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Robert"</span></em></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:carol</span></em><em><span class="c011"> </span></em><em><span class="c011">foaf:name</span></em><em><span class="c011"> 23 .          </span></em><span class="c011"><em><span class="c011"># Ignored</span></em></span></td></tr>
</table><p><em>The system checks that </em><em>
</em><code><em>:alice</em></code><em> has shape </em><em>
</em><code><em>:UserShape</em></code><em> and signals the error: </em></p><ul class="itemize"><li class="li-itemize"><em>
</em><code><em>:bob</em></code><em> does not have property </em><em>
</em><code><em>schema:name</em></code><em>.
</em></li></ul><p><em>In this case, the system ignores </em><em>
</em><code><em>:carol</em></code><em>. </em></p></div></div>
<h3 class="subsection" id="sec137">5.7.5  Target Objects Of</h3>
<p> 
<a id="ch5.sec7.5"></a></p><p><a id="hevea_default595"></a> 
The property 
<code>sh:targetObjectsOf</code> selects as focus nodes the objects of some property.</p><div class="example"><div class="theorem"><span class="c013">Example 111</span>  <em>
</em><code><em>sh:targetObjectsOf</em></code><em> example</em><em> 
</em><a id="ch050targetObjectsOfExample"></a><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:UserShape</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011">         </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c009">sh:targetObjectsOf</span></span></em><em><span class="c011"> </span></em><em><span class="c011">:isTaughtBy</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:maxCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011"> </span></em><em><span class="c011">xsd:string</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ] .</span></em></td></tr>
</table><p><em>Given the following RDF graph:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:alice</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Alice"</span></em></span></em><em><span class="c011"> . </span></em><span class="c011"><em><span class="c011">#\Passes{:UserShape} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:bob</span></em><em><span class="c011">   </span></em><em><span class="c011">foaf:name</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Robert"</span></em></span></em><em><span class="c011"> .  </span></em><span class="c011"><em><span class="c011">#\Fails{:UserShape} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:carol</span></em><em><span class="c011"> </span></em><em><span class="c011">foaf:name</span></em><em><span class="c011"> 23 .        </span></em><span class="c011"><em><span class="c011"># Ignored</span></em></span><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:algebra</span></em><em><span class="c011"> </span></em><em><span class="c011">:isTaughtBy</span></em><em><span class="c011"> </span></em><em><span class="c011">:alice,</span></em><em><span class="c011"> </span></em><em><span class="c011">:bob</span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>The system checks that </em><em>
</em><code><em>:alice</em></code><em> has shape </em><em>
</em><code><em>:UserShape</em></code><em> and signals the error: </em></p><ul class="itemize"><li class="li-itemize"><em>
</em><code><em>:bob</em></code><em> does not have property </em><em>
</em><code><em>schema:name</em></code><em>.
</em></li></ul><p><em>The system ignores </em><em>
</em><code><em>:carol</em></code><em> as it is not the object of the </em><em>
</em><code><em>:isTaughtBy</em></code><em> property.</em></p></div></div>
<h2 class="section" id="sec138">5.8  Cardinality</h2>
<p> 
<a id="ch050Cardinalities"></a>
<a id="ch5.sec8"></a></p><p><a id="hevea_default596"></a>
Cardinality constraint components specify restrictions on the minimum and maximum number of distinct value nodes.
Table <a href="#ch050.Cardinality">5.5</a> defines the cardinality constraint component parameters in SHACL.
The default cardinality in SHACL for property shapes is 
<code>{0</code><code>,unbounded</code><code>}</code>. </p><p><a id="hevea_default597"></a> 
<a id="hevea_default598"></a>
</p><blockquote class="table"><div class="center"><hr class="c021"></div>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Table 5.5: SHACL cardinality constraint components</td></tr>
</table></div>
<a id="ch050.Cardinality"></a> 
<div class="center">
<table class="c000 cellpadding1" border=1><tr><td class="c017"> Operation</td><td class="c019">Description 
</td></tr>
<tr><td class="c017"> 
<code>sh:minCount</code></td><td class="c019">Restricts minimum number of value nodes.<br>
If not defined, there is no restriction (no minimum).
</td></tr>
<tr><td class="c017"> 
<code>sh:maxCount</code></td><td class="c019">Restricts maximum number of value nodes. <br>
If not defined, there is no restriction (unbounded).
</td></tr>
</table>
</div>
<div class="center"><hr class="c021"></div></blockquote><div class="example"><div class="theorem"><span class="c013">Example 112</span>  <em>Cardinality</em><p><em>Given the following shapes graph:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:User</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape,</span></em><em><span class="c011"> </span></em><em><span class="c011">rdfs:Class</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:follows</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c009">sh:minCount</span></span></em><em><span class="c011"> 2 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c009">sh:maxCount</span></span></em><em><span class="c011"> 3 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] .</span></em></td></tr>
</table><p><em>and the following RDF graph:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:alice</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;                      </span></em><span class="c011"><em><span class="c011">#\Passes{:User} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:follows</span></em><em><span class="c011"> </span></em><em><span class="c011">:bob,</span></em><em><span class="c011"> </span></em><em><span class="c011">:carol</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:bob</span></em><em><span class="c011">   </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;                      </span></em><span class="c011"><em><span class="c011">#\Fails{:User} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:follows</span></em><em><span class="c011"> </span></em><em><span class="c011">:alice</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:carol</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;                      </span></em><span class="c011"><em><span class="c011">#\Fails{:User} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:follows</span></em><em><span class="c011"> </span></em><em><span class="c011">:alice,</span></em><em><span class="c011"> </span></em><em><span class="c011">:bob,</span></em><em><span class="c011">
</span></em><em><span class="c011">                      </span></em><em><span class="c011">:carol,</span></em><em><span class="c011"> </span></em><em><span class="c011">:dave</span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>A SHACL validator returns the errors:</em></p><ul class="itemize"><li class="li-itemize"><em>
</em><em>
</em><code><em>:bob</em></code><em> has less than two values for the property </em><em>
</em><code><em>schema:follows</em></code><em>; and
</em></li><li class="li-itemize"><em>
</em><code><em>:carol</em></code><em> has more than three values for the property </em><em>
</em><code><em>schema:follows</em></code><em>.
</em></li></ul></div></div>
<h2 class="section" id="sec139">5.9  Constraints on Values</h2>
<p> 
<a id="ch050ValueTypes"></a>
<a id="ch5.sec9"></a></p><p>These constraint components specify the set of values that a node can have. 
For example, nodes with some datatype, or are IRIs, or literals, etc.
Table <a href="#ch050ConstraintsValueTypes">5.6</a> describes the different possibilities which we will detail in the following sections.</p><p><a id="hevea_default599"></a> 
<a id="hevea_default600"></a> 
<a id="hevea_default601"></a> 
<a id="hevea_default602"></a> 
<a id="hevea_default603"></a> 
<a id="hevea_default604"></a> 
<a id="hevea_default605"></a> 
<a id="hevea_default606"></a> 
<a id="hevea_default607"></a> 
<a id="hevea_default608"></a> 
<a id="hevea_default609"></a> 
</p><blockquote class="table"><div class="center"><hr class="c021"></div>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Table 5.6: Constraints on values</td></tr>
</table></div>
<a id="ch050ConstraintsValueTypes"></a> 
<div class="center">
<table class="c000 cellpadding1" border=1><tr><td class="c017"> Operation</td><td class="c019">Description 
</td></tr>
<tr><td class="c017"> 
<code>sh:datatype</code></td><td class="c019">Specifies the values must be literals with some datatype
</td></tr>
<tr><td class="c017"> 
<code>sh:class</code></td><td class="c019">Specifies that values must be SHACL instances of some class
</td></tr>
<tr><td class="c017"> 
<code>sh:nodeKind</code></td><td class="c019">Possible values: 
<code>sh:BlankNode</code>, 
<code>sh:IRI</code>, 
<code>sh:Literal</code>, 
<code>sh:BlankNodeOrIRI</code>, 
<code>sh:BlankNodeOrLiteral</code>, 
<code>sh:IRIOrLiteral</code>
</td></tr>
<tr><td class="c017"> 
<code>sh:in</code></td><td class="c019">Enumerates the value nodes that a property is allowed to have
</td></tr>
<tr><td class="c017"> 
<code>sh:hasValue</code></td><td class="c019">A node must have a given value
</td></tr>
</table>
</div>
<div class="center"><hr class="c021"></div></blockquote><p><a id="hevea_default610"></a>
</p>
<h3 class="subsection" id="sec140">5.9.1  Datatypes</h3>
<p> 
<a id="ch050Datatypes"></a>
<a id="ch5.sec9.1"></a></p><p><a id="hevea_default611"></a>

<code>sh:datatype</code> specifies the datatype that a focus node must have. </p><p>Remember that all literals in the RDF data model have an associated datatype 
(see Section <a href="bookHtml009.html#ch020RDFStringLiterals">2.2</a>). 
Plain string literals have 
<code>xsd:string</code> datatype by default.</p><p>SHACL contains a list of built-in datatypes that are based on XML Schema datatypes (which are the same as in SPARQL 1.1).
For those datatypes SHACL processors also check that the lexical form conforms to the datatype rules.
This means that something like 
<code><code>"Unknown"</code></code><code>^^</code><code>xsd:date</code> is not a well-typed 
literal because 
<code><code>"Unknown"</code></code> does not conform to the 
<code>xsd:date</code> rules.</p><div class="example"><div class="theorem"><span class="c013">Example 113</span>  <em>Simple datatypes example</em><p><em>Given the following shapes 
graph</em><sup><a id="text33" href="#note33"><em>20</em></a></sup><em>:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:UserShape</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:targetClass</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c009">sh:datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011">xsd:string</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:birthDate</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c009">sh:datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011">xsd:date</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] .</span></em></td></tr>
</table><p><em>and the following RDF graph:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:alice</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;                                 </span></em><span class="c011"><em><span class="c011">#  \Passes{:User} *)   </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Alice"</span></em></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:birthDate</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"1981-07-10"</span></em></span></em><em><span class="c011">^^</span></em><em><span class="c011">xsd:date</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:bob</span></em><em><span class="c011">   </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011">  ;                                </span></em><span class="c011"><em><span class="c011">#  \Fails{:User} *)  </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Robert"</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:birthDate</span></em><em><span class="c011"> 1981 .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:carol</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;                                 </span></em><span class="c011"><em><span class="c011">#  \Fails{:User} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> </span></em><em><span class="c011">:Carol</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:birthDate</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"2003-06-10"</span></em></span></em><em><span class="c011">^^</span></em><em><span class="c011">xsd:date</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:dave</span></em><em><span class="c011">  </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;                                 </span></em><span class="c011"><em><span class="c011">#  \Fails{:User} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Dave"</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:birthDate</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Unknown"</span></em></span></em><em><span class="c011">^^</span></em><em><span class="c011">xsd:date</span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>A SHACL processor validates that </em><em>
</em><code><em>:alice</em></code><em> has shape </em><em>
</em><code><em>:User</em></code><em> and returns the following errors: </em></p><ul class="itemize"><li class="li-itemize"><em>
</em><code><em>:bob</em></code><em> has a value for path </em><em>
</em><code><em>schema:birthDate</em></code><em> that is not a </em><em>
</em><code><em>xsd:date</em></code><em> (it is an integer);</em></li><li class="li-itemize"><em>
</em><code><em>:carol</em></code><em> has a value for path </em><em>
</em><code><em>schema:name</em></code><em> that is not a </em><em>
</em><code><em>xsd:string</em></code><em> (it is an IRI); and </em></li><li class="li-itemize"><em>
</em><code><em>:dave</em></code><em> has a value for path </em><em>
</em><code><em>schema:birthDate</em></code><em> that is not a </em><em>
</em><code><em>xsd:date</em></code><em> (its lexical form does not match </em><em>
</em><code><em>xsd:date</em></code><em>).</em></li></ul></div></div><div class="example"><div class="theorem"><span class="c013">Example 114</span>  <em>Custom datatypes example</em><p><a id="hevea_default612"></a><em>
</em><a id="hevea_default613"></a><em>
The RDF data model enables the use of other datatypes apart from the popular XML Schema datatypes.</em></p><p><em>In the following example, a picture contains the properties </em><em>
</em><code><em>schema:width</em></code><em> and </em><em>
</em><code><em>schema:height</em></code><em> using a hypothetical custom datatype (</em><em>
</em><code><em>cdt:distance</em></code><em>).</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:PictureShape</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:targetClass</span></em><em><span class="c011"> </span></em><em><span class="c011">:Picture</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:width</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c009">sh:datatype</span></span></em><em><span class="c011">   </span></em><em><span class="c011">cdt:distance</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:height</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c009">sh:datatype</span></span></em><em><span class="c011">   </span></em><em><span class="c011">cdt:distance</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] .</span></em></td></tr>
</table><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:gioconda</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011">             </span></em><em><span class="c011">:Picture</span></em><em><span class="c011"> ;              </span></em><span class="c011"><em><span class="c011">#  \Passes{:PictureShape} *)  </span></em></span><em><span class="c011">
</span></em><em><span class="c011">          </span></em><em><span class="c011">schema:width</span></em><em><span class="c011">  </span></em><em><span class="c011"><em><span class="c011">"21 in"</span></em></span></em><em><span class="c011">^^</span></em><em><span class="c011">cdt:distance</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">          </span></em><em><span class="c011">schema:height</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"30 in"</span></em></span></em><em><span class="c011">^^</span></em><em><span class="c011">cdt:distance</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:other</span></em><em><span class="c011">    </span></em><em><span class="c011">a</span></em><em><span class="c011">             </span></em><em><span class="c011">:Picture</span></em><em><span class="c011"> ;              </span></em><span class="c011"><em><span class="c011">#  \Fails{:PictureShape} *)  </span></em></span><em><span class="c011">
</span></em><em><span class="c011">          </span></em><em><span class="c011">schema:width</span></em><em><span class="c011">  </span></em><em><span class="c011"><em><span class="c011">"21 in"</span></em></span></em><em><span class="c011">^^</span></em><em><span class="c011">xsd:string</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">          </span></em><em><span class="c011">schema:height</span></em><em><span class="c011"> 30 .</span></em></td></tr>
</table></div></div><p><a id="hevea_default614"></a>
</p><div class="example"><div class="theorem"><span class="c013">Example 115</span>  <em>Language-tagged literals</em><p><a id="hevea_default615"></a><em> 
A common use case is to declare that some literals must be language-tagged strings. </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:CountryShape</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:targetClass</span></em><em><span class="c011"> </span></em><em><span class="c011">:Country</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c009">rdf:langString</span></span></em><em><span class="c011">
</span></em><em><span class="c011">  ] .</span></em></td></tr>
</table><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:spain</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:Country</span></em><em><span class="c011"> ;               </span></em><span class="c011"><em><span class="c011">#\Passes{:CountryShape}*)   </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"España"</span></em></span></em><em><span class="c011">@es</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:france</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:Country</span></em><em><span class="c011"> ;              </span></em><span class="c011"><em><span class="c011">#\Fails{:CountryShape}*)  </span></em></span><em><span class="c011">
</span></em><em><span class="c011">        </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"France"</span></em></span></em><em><span class="c011"> .</span></em></td></tr>
</table></div></div>
<h3 class="subsection" id="sec141">5.9.2  Class of Values</h3>
<p>
<a id="ch5.sec9.2"></a></p><p><a id="hevea_default616"></a>
<a id="hevea_default617"></a>
<a id="hevea_default618"></a>
<a id="hevea_default619"></a>
<a id="hevea_default620"></a>

<code>sh:class</code> specifies that each value is an instance of a given class. 
As in Section <a href="#ch050targetClass">5.7.2</a>, the notion of instance that SHACL uses is a variation of RDF Schema where a node X is an instance of C if 
<code>X</code><code> </code><code>rdf:type</code><code>/</code><code>rdfs:subClassOf</code><code>* </code><code>C</code>.</p><div class="example"><div class="theorem"><span class="c013">Example 116</span>  <em>Class of values</em><p><em>The following shape </em><em>
</em><code><em>:User</em></code><em> declares that the values of property </em><em>
</em><code><em>schema:worksFor</em></code><em> must be SHACL instances of the </em><em>
</em><code><em>:Organization</em></code><em> class. </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:UserShape</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:targetClass</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">  </span></em><em><span class="c011">schema:worksFor</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c009">sh:class</span></span></em><em><span class="c011"> </span></em><em><span class="c011">:Organization</span></em><em><span class="c011">
</span></em><em><span class="c011"> ] .</span></em></td></tr>
</table><p><em>Given the following RDF graph:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:alice</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;                     </span></em><span class="c011"><em><span class="c011">#\Passes{:User} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:worksFor</span></em><em><span class="c011"> </span></em><em><span class="c011">:aCompany</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:bob</span></em><em><span class="c011">   </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;                     </span></em><span class="c011"><em><span class="c011">#\Passes{:User} *)      </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:worksFor</span></em><em><span class="c011"> </span></em><em><span class="c011">:aUniversity</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:carol</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;                     </span></em><span class="c011"><em><span class="c011">#\Fails{:User} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:worksFor</span></em><em><span class="c011"> </span></em><em><span class="c011">:Unknown</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:aCompany</span></em><em><span class="c011">    </span></em><em><span class="c011">a</span></em><em><span class="c011">              </span></em><em><span class="c011">:Organization</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">:aUniversity</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011">              </span></em><em><span class="c011">:University</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">:University</span></em><em><span class="c011"> </span></em><em><span class="c011">rdfs:subClassOf</span></em><em><span class="c011"> </span></em><em><span class="c011">:Organization</span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>A SHACL processor verifies that </em><em>
</em><code><em>:alice</em></code><em> and </em><em>
</em><code><em>:bob</em></code><em> conform to shape </em><em>
</em><code><em>:User</em></code><em> and returns the following error:</em></p><ul class="itemize"><li class="li-itemize"><em>
</em><code><em>:carol</em></code><em> has the value </em><em>
</em><code><em>:Unknown</em></code><em> for property </em><em>
</em><code><em>schema:worksFor</em></code><em> which is not a SHACL instance of </em><em>
</em><code><em>:Organization</em></code><em>.
</em></li></ul></div></div>
<h3 class="subsection" id="sec142">5.9.3  Node Kinds</h3>
<p> 
<a id="ch050NodeKinds"></a>
<a id="ch5.sec9.3"></a></p><p><a id="hevea_default621"></a>

<code>sh:nodeKind</code> specifies the kind of values according to the RDF Data model. 
Table <a href="#ch050NodeKindsTable">5.7</a> contains the possible values for that property. </p><p><a id="hevea_default622"></a>
<a id="hevea_default623"></a>
<a id="hevea_default624"></a>
<a id="hevea_default625"></a>
<a id="hevea_default626"></a>
<a id="hevea_default627"></a>
</p><blockquote class="table"><div class="center"><hr class="c021"></div>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Table 5.7: Node kinds</td></tr>
</table></div>
<a id="ch050NodeKindsTable"></a> 
<div class="center">
<table class="c000 cellpadding1" border=1><tr><td class="c017"> Nodekind</td><td class="c019">Description 
</td></tr>
<tr><td class="c017"> 
<code>sh:IRI</code></td><td class="c019">Nodes must be IRIs
</td></tr>
<tr><td class="c017"> 
<code>sh:BlankNode</code></td><td class="c019">Nodes must be Blank nodes
</td></tr>
<tr><td class="c017"> 
<code>sh:Literal</code></td><td class="c019">Nodes must be Literals
</td></tr>
<tr><td class="c017"> 
<code>sh:BlankNodeOrLiteral</code></td><td class="c019">Nodes must be Blank nodes or literals
</td></tr>
<tr><td class="c017"> 
<code>sh:BlankNodeOrIRI</code></td><td class="c019">Nodes must be Blank nodes or IRIs
</td></tr>
<tr><td class="c017"> 
<code>sh:IRIOrLiteral</code></td><td class="c019">Nodes must be IRIs or literals
</td></tr>
</table>
</div>
<div class="center"><hr class="c021"></div></blockquote><div class="example"><div class="theorem"><span class="c013">Example 117</span>  <em>Nodekind example</em><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:UserShape</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:targetClass</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c009">sh:nodeKind</span></span></em><em><span class="c011"> </span></em><em><span class="c011">sh:Literal</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ];</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:follows</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c009">sh:nodeKind</span></span></em><em><span class="c011"> </span></em><em><span class="c011">sh:BlankNodeOrIRI</span></em><em><span class="c011">
</span></em><em><span class="c011">  ];</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c009">sh:nodeKind</span></span></em><em><span class="c011"> </span></em><em><span class="c011">sh:IRI</span></em><em><span class="c011">
</span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>Given the following RDF graph:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:alice</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011">;                               </span></em><span class="c011"><em><span class="c011">#\Passes{:UserShape} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011">    </span></em><em><span class="c011"><em><span class="c011">"Alice"</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:follows</span></em><em><span class="c011"> [ </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Dave"</span></em></span></em><em><span class="c011"> ] .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:bob</span></em><em><span class="c011">   </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011">;                               </span></em><span class="c011"><em><span class="c011">#\Fails{:UserShape} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011">  </span></em><em><span class="c011">_:1</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:follows</span></em><em><span class="c011"> </span></em><em><span class="c011">:alice</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:carol</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011">;                               </span></em><span class="c011"><em><span class="c011">#\Fails{:UserShape} *)    </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011">    </span></em><em><span class="c011"><em><span class="c011">"Carol"</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:follows</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Dave"</span></em></span></em><em><span class="c011">  .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:dave</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> .                               </span></em><span class="c011"><em><span class="c011">#\Passes{:UserShape} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">_:1</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> .                                 </span></em><span class="c011"><em><span class="c011">#\Fails{:UserShape} *)    </span></em></span></td></tr>
</table><p><em>A SHACL processor verifies that </em><em>
</em><code><em>:alice</em></code><em> and </em><em>
</em><code><em>:dave</em></code><em> conform to shape </em><em>
</em><code><em>:UserShape</em></code><em> and returns the following errors:</em></p><ul class="itemize"><li class="li-itemize"><em>
</em><code><em>:bob</em></code><em> has a value that is not a literal for property </em><em>
</em><code><em>schema:name</em></code><em>.</em></li><li class="li-itemize"><em>
</em><code><em>:carol</em></code><em> has a value that is not a blank node or IRI for property </em><em>
</em><code><em>schema:follows</em></code><em>.</em></li><li class="li-itemize"><em>
</em><code><em>_:1</em></code><em> is not an IRI . 
</em></li></ul><p><em>
Note that </em><em>
</em><code><em>:dave</em></code><em> pases as </em><em>
</em><code><em>:UserShape</em></code><em> because there are no cardinality restrictions on </em><em>
</em><code><em>schema:name</em></code><em> and </em><em>
</em><code><em>schema:follows</em></code><em>.</em></p></div></div>
<h3 class="subsection" id="sec143">5.9.4  Sets of Values</h3>
<p> 
<a id="ch050ValueSets"></a>
<a id="ch5.sec9.4"></a></p><p><a id="hevea_default628"></a>

<code>sh:in</code> specifies that each value must be a member of the provided list.</p><div class="example"><div class="theorem"><span class="c013">Example 118</span>  <em>
</em><code><em>sh:in</em></code><em> example</em><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:UserShape</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:targetClass</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:path</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:gender</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c009">sh:in</span></span></em><em><span class="c011">   ( </span></em><em><span class="c011">schema:Male</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:Female</span></em><em><span class="c011"> )</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] .</span></em></td></tr>
</table><p><em>Given the following RDF graph: </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:alice</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011">                  </span></em><em><span class="c011">:User</span></em><em><span class="c011">;        </span></em><span class="c011"><em><span class="c011">#\Passes{:UserShape} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:affiliation</span></em><em><span class="c011"> </span></em><em><span class="c011">:OurCompany</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:gender</span></em><em><span class="c011">      </span></em><em><span class="c011">schema:Female</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:bob</span></em><em><span class="c011">   </span></em><em><span class="c011">a</span></em><em><span class="c011">                  </span></em><em><span class="c011">:User</span></em><em><span class="c011">;        </span></em><span class="c011"><em><span class="c011">#\Fails{:UserShape} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:gender</span></em><em><span class="c011">      </span></em><em><span class="c011">schema:male</span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>A SHACL processor verifies that </em><em>
</em><code><em>:alice</em></code><em> conforms to </em><em>
</em><code><em>:UserShape</em></code><em> and returns the following errors:</em></p><ul class="itemize"><li class="li-itemize"><em>
</em><em>
</em><code><em>:bob</em></code><em> has a value for </em><em>
</em><code><em>schema:gender</em></code><em> that is not in the list </em><em>
</em><code><em>( </em></code><code><em>schema:Male</em></code><code><em> </em></code><code><em>schema:Female</em></code><code><em>)</em></code><em> because </em><em>
</em><code><em>schema:Male</em></code><em> is not equal to </em><em>
</em><code><em>schema:male</em></code><em>.
</em></li></ul></div></div>
<h3 class="subsection" id="sec144">5.9.5  Specific Value</h3>
<p> 
<a id="ch050HasValue"></a>
<a id="ch5.sec9.5"></a></p><p><a id="hevea_default629"></a>
<a id="hevea_default630"></a>

<code>sh:hasValue</code> declares the value that a node must have . 
Notice that even if there is no 
<code>sh:minCount</code> declared, this constraint checks that the property has that value (and possibly others).</p><div class="example"><div class="theorem"><span class="c013">Example 119</span>  <em>
</em><code><em>sh:hasValue</em></code><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:UserShape</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:targetClass</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:affiliation</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c009">sh:hasValue</span></span></em><em><span class="c011"> </span></em><em><span class="c011">:OurCompany</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] .</span></em></td></tr>
</table><p><em>Given the following RDF graph: </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:alice</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011">;                              </span></em><span class="c011"><em><span class="c011">#\Passes{:UserShape} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:affiliation</span></em><em><span class="c011"> </span></em><em><span class="c011">:OurCompany</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:bob</span></em><em><span class="c011">   </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011">;                              </span></em><span class="c011"><em><span class="c011">#\Fails{:UserShape} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:affiliation</span></em><em><span class="c011"> </span></em><em><span class="c011">:OurUniversity</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:carol</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> .                             </span></em><span class="c011"><em><span class="c011">#\Fails{:UserShape} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:dave</span></em><em><span class="c011">  </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011">;                              </span></em><span class="c011"><em><span class="c011">#\Passes{:UserShape} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:affiliation</span></em><em><span class="c011"> </span></em><em><span class="c011">:OurCompany</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:affiliation</span></em><em><span class="c011"> </span></em><em><span class="c011">:OurUniversity</span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>A SHACL processor verifies that </em><em>
</em><code><em>:alice</em></code><em> conforms to </em><em>
</em><code><em>:UserShape</em></code><em> and returns the following errors:</em></p><ul class="itemize"><li class="li-itemize"><em>
</em><em>
</em><code><em>:bob</em></code><em> does not have value </em><em>
</em><code><em>:OurCompany</em></code><em> for property </em><em>
</em><code><em>schema:affiliation</em></code><em>; and 
</em></li><li class="li-itemize"><em>
</em><code><em>:carol</em></code><em> does not have value for property </em><em>
</em><code><em>schema:affiliation</em></code><em>. 
</em></li></ul></div></div><p><a id="hevea_default631"></a>
</p>
<h2 class="section" id="sec145">5.10  Datatype Facets</h2>
<p> 
<a id="ch050Facets"></a>
<a id="ch5.sec10"></a></p><p><a id="hevea_default632"></a>
SHACL contains a list of built-in constraint components that resemble XML Schema facets and have the same semantics. </p>
<h3 class="subsection" id="sec146">5.10.1  Value Ranges</h3>
<p> 
<a id="ch050ValueRanges"></a>
<a id="ch5.sec10.1"></a></p><p><a id="hevea_default633"></a>
<a id="hevea_default634"></a>
<a id="hevea_default635"></a>
<a id="hevea_default636"></a>
The parameters 

<code>sh:minInclusive</code>, 

<code>sh:minExclusive</code>, 

<code>sh:maxInclusive</code>, 

<code>sh:maxExclusive</code> declare the minimum or maximum value of a literal with the variants to include or exclude the given value.</p><div class="example"><div class="theorem"><span class="c013">Example 120</span>  <em>Example with value ranges</em><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:Rating</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:targetSubjectsOf</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:ratingValue</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">         </span></em><em><span class="c011">schema:ratingValue</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c009">sh:minInclusive</span></span></em><em><span class="c011"> 1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:maxInclusive</span></em><em><span class="c011"> 5 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011">     </span></em><em><span class="c011">xsd:integer</span></em><em><span class="c011">
</span></em><em><span class="c011"> ] .</span></em></td></tr>
</table><p><em>Given the following RDF graph:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:low</span></em><em><span class="c011">        </span></em><em><span class="c011">schema:ratingValue</span></em><em><span class="c011"> 1 .    </span></em><span class="c011"><em><span class="c011">#\Passes{:Rating} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">:average</span></em><em><span class="c011">    </span></em><em><span class="c011">schema:ratingValue</span></em><em><span class="c011"> 3 .    </span></em><span class="c011"><em><span class="c011">#\Passes{:Rating} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">:veryGood</span></em><em><span class="c011">   </span></em><em><span class="c011">schema:ratingValue</span></em><em><span class="c011"> 5 .    </span></em><span class="c011"><em><span class="c011">#\Passes{:Rating} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">:zero</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:ratingValue</span></em><em><span class="c011"> 0 .    </span></em><span class="c011"><em><span class="c011">#\Fails{:Rating} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">:incredible</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:ratingValue</span></em><em><span class="c011"> 100 .  </span></em><span class="c011"><em><span class="c011">#\Fails{:Rating} *) </span></em></span></td></tr>
</table><p><em>A SHACL processor verifies that </em><em>
</em><code><em>:low</em></code><em>, </em><em>
</em><code><em>:average</em></code><em>, and </em><em>
</em><code><em>:veryGood</em></code><em> conform to shape </em><em>
</em><code><em>:Rating</em></code><em> and returns the errors:</em></p><ul class="itemize"><li class="li-itemize"><em>
</em><code><em>:zero</em></code><em> has a value below the minimum </em><em>
</em><code><em>1</em></code><em>; and</em></li><li class="li-itemize"><em>
</em><code><em>:incredible</em></code><em> has a value bigger than the maximum </em><em>
</em><code><em>5</em></code><em>.
</em></li></ul></div></div>
<h3 class="subsection" id="sec147">5.10.2  String-based Constraints</h3>
<p> 
<a id="ch040Stringbased"></a>
<a id="ch5.sec10.2"></a></p><p><a id="hevea_default637"></a>
<a id="hevea_default638"></a>
<a id="hevea_default639"></a>
<a id="hevea_default640"></a>
<a id="hevea_default641"></a>
The parameters 
<code>sh:minLength</code>, 
<code>sh:maxLength</code>, 
and 
<code>sh:pattern</code> (with 
<code>sh:flags</code>) specify string facets on value nodes.
These constraints check the string representation of the value.<sup><a id="text34" href="#note34">21</a></sup> </p><p><a id="hevea_default642"></a>
String facets are always violated when the value node is a blank node.</p><p>
<code>sh:minLength</code> and 
<code>sh:maxLength</code> specify constraints on the size of the string representation of a value node.
When 
<code>sh:minLength</code> is 0, it means that there is no restriction on the length of the string.</p><div class="example"><div class="theorem"><span class="c013">Example 121</span>  <em>
</em><code><em>sh:minLength</em></code><em>, </em><em>
</em><code><em>sh:maxLength</em></code><em> example</em><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:User</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape,</span></em><em><span class="c011"> </span></em><em><span class="c011">rdfs:Class</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:path</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c009">sh:minLength</span></span></em><em><span class="c011"> 4 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:maxLength</span></em><em><span class="c011"> 20 ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:path</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:description</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c009">sh:minLength</span></span></em><em><span class="c011"> 0 ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ] .</span></em></td></tr>
</table><p><em>The following RDF graph:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:alice</span></em><em><span class="c011">   </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011">;                          </span></em><span class="c011"><em><span class="c011">#\Passes{:User} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">         </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Alice"</span></em></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">         </span></em><em><span class="c011">schema:description</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"...long description..."</span></em></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:bob</span></em><em><span class="c011">     </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011">;                          </span></em><span class="c011"><em><span class="c011">#\Fails{:User} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">         </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Bob"</span></em></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:carol</span></em><em><span class="c011">   </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011">;                          </span></em><span class="c011"><em><span class="c011">#\Fails{:User} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">         </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> </span></em><em><span class="c011">:Carol</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:strange</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011">;                          </span></em><span class="c011"><em><span class="c011">#\Fails{:User} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">         </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> </span></em><em><span class="c011">_:strange</span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>verifies that </em><em>
</em><code><em>:alice</em></code><em> and </em><em>
</em><code><em>:carol</em></code><em> conform to shape </em><em>
</em><code><em>:User</em></code><em> and reports the errors:</em></p><ul class="itemize"><li class="li-itemize"><em>
</em><code><em>:bob</em></code><em> has a </em><em>
</em><code><em>schema:name</em></code><em> whose length is less that 4; and </em></li><li class="li-itemize"><em>
</em><code><em>:strange</em></code><em> has a blank node as the value for property </em><em>
</em><code><em>schema:name</em></code><em> whose length can’t be calculated.</em></li></ul><p><em>In the case of </em><em>
</em><code><em>:carol</em></code><em>, notice that the example depends on the length of the prefixed name </em><em>
</em><code><em>:Carol</em></code><em> which will 
be calculated after concatenating the IRI associated with the empty prefix </em><em>
</em><code><em>:</em></code><em> to </em><em>
</em><code><em>Carol</em></code><em>. 
In this case, if </em><em>
</em><code><em>:</em></code><em> is associated with </em><em>
</em><code><em>http:</em></code><code><em>//</em></code><code><em>example</em></code><code><em>.</em></code><code><em>org</em></code><code><em>/</em></code><em>, the processor will evaluate the length of </em><em>
</em><code><em>http:</em></code><code><em>//</em></code><code><em>example</em></code><code><em>.</em></code><code><em>org</em></code><code><em>/</em></code><code><em>Carol</em></code><em> (which is 24) and fails because it is bigger than 20.</em></p></div></div><p><a id="hevea_default643"></a>
</p><div class="example"><div class="theorem"><span class="c013">Example 122</span>  <em>Example with pattern</em><p><a id="hevea_default644"></a><em>
</em><em>
</em><code><em>sh:pattern</em></code><em> specifies that a value must match a regular expression. 
It has the same definition as the SPARQL regex function.</em><sup><a id="text35" href="#note35"><em>22</em></a></sup><em> </em></p><p><a id="hevea_default645"></a><em>
</em><a id="hevea_default646"></a><em>
</em><a id="hevea_default647"></a><em>
The parameter </em><em>
</em><code><em>sh:flags</em></code><em> is optional and can modify the way the regular expression matches. 
The definition of </em><em>
</em><code><em>sh:flags</em></code><em> is the same as SPARQL and XPath regular expressions.
One of the most popular flags is </em><em>
</em><code><em>i</em></code><em> which indicates that the match is case-insensitive.</em></p><p><em>We already gave a short introduction to regular expressions in 
Section </em><a href="bookHtml011.html#RegularExpressions"><em>4.5.3</em></a><em>. 
Although that section was for ShEx, the concept is the same. </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:ProductShape</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:targetClass</span></em><em><span class="c011"> </span></em><em><span class="c011">:Product</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">    </span></em><em><span class="c011">schema:productID</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c009">sh:pattern</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"^P\\d{3,4}"</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c009">sh:flags</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><em><span class="c011">"i"</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ] .</span></em></td></tr>
</table><p><em>Given the following RDF graph:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:car</span></em><em><span class="c011">   </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:Product</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:productID</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"P2345"</span></em></span></em><em><span class="c011"> . </span></em><span class="c011"><em><span class="c011">#\Passes{:Product} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:bus</span></em><em><span class="c011">   </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:Product</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:productID</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"p567"</span></em></span></em><em><span class="c011"> .  </span></em><span class="c011"><em><span class="c011">#\Passes{:Product} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:truck</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:Product</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:productID</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"P12"</span></em></span></em><em><span class="c011"> .   </span></em><span class="c011"><em><span class="c011">#\Fails{:Product} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:bike</span></em><em><span class="c011">  </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:Product</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:productID</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"B123"</span></em></span></em><em><span class="c011"> .  </span></em><span class="c011"><em><span class="c011">#\Fails{:Product} *) </span></em></span></td></tr>
</table><p><em>A SHACL processor verifies that </em><em>
</em><code><em>:car</em></code><em> and </em><em>
</em><code><em>:bus</em></code><em> conform to </em><em>
</em><code><em>:Product</em></code><em> and returns the following errors:</em></p><ul class="itemize"><li class="li-itemize"><em>
</em><code><em>:truck</em></code><em> has a value for </em><em>
</em><code><em>schema:productID</em></code><em> that is too short; and </em></li><li class="li-itemize"><em>
</em><code><em>:bike</em></code><em> has a value for </em><em>
</em><code><em>schema:productID</em></code><em> that does not start with </em><em>
</em><code><em>P</em></code><em> or </em><em>
</em><code><em>p</em></code><em>.</em></li></ul></div></div>
<h3 class="subsection" id="sec148">5.10.3  Language-based Constraints</h3>
<p> 
<a id="ch050LanguageBased"></a>
<a id="ch5.sec10.3"></a></p><p><a id="hevea_default648"></a>
<a id="hevea_default649"></a>

<code>sh:languageIn</code> declares the allowed languages of a literal and 
<code>sh:uniqueLang</code> specifies that no pair of nodes can have the same language tag.</p><div class="example"><div class="theorem"><span class="c013">Example 123</span>  <em>Example with </em><em>
</em><code><em>sh:languageIn</em></code><p><em>The following example declares that the </em><em>
</em><code><em>rdfs:label</em></code><em> property of a product must be a tagged literal in Spanish, English, or French.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:ProductShape</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:targetClass</span></em><em><span class="c011"> </span></em><em><span class="c011">:Product</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">       </span></em><em><span class="c011">rdfs:label</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c009">sh:languageIn</span></span></em><em><span class="c011"> (</span></em><em><span class="c011"><em><span class="c011">"es"</span></em></span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"en"</span></em></span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"fr"</span></em></span></em><em><span class="c011">)</span></em><em><span class="c011">
</span></em><em><span class="c011">] .</span></em></td></tr>
</table><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:p234</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:Product</span></em><em><span class="c011"> ;              </span></em><span class="c011"><em><span class="c011">#\Passes{:ProductShape} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011">rdfs:label</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"jamón"</span></em></span></em><em><span class="c011">@es,</span></em><em><span class="c011">
</span></em><em><span class="c011">                 </span></em><em><span class="c011"><em><span class="c011">"ham"</span></em></span></em><em><span class="c011">@en</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:p235</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:Product</span></em><em><span class="c011"> ;              </span></em><span class="c011"><em><span class="c011">#\Passes{:ProductShape} *)  </span></em></span><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011">rdfs:label</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"milk"</span></em></span></em><em><span class="c011">@en</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:p236</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:Product</span></em><em><span class="c011"> ;              </span></em><span class="c011"><em><span class="c011">#\Fails{:ProductShape} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011">rdfs:label</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Käse"</span></em></span></em><em><span class="c011">@de</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:p237</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:Product</span></em><em><span class="c011"> ;              </span></em><span class="c011"><em><span class="c011">#\Fails{:ProductShape} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011">rdfs:label</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"patatas"</span></em></span></em><em><span class="c011">@es</span></em><em><span class="c011"> </span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">                 </span></em><em><span class="c011"><em><span class="c011">"kartofeln"</span></em></span></em><em><span class="c011">@de</span></em><em><span class="c011"> .</span></em></td></tr>
</table></div></div><div class="example"><div class="theorem"><span class="c013">Example 124</span>  <em>Example with </em><em>
</em><code><em>sh:uniqueLang</em></code><em> </em><a id="ch050UniqueLang"></a><p><em>The following example declares that if the nodes of shape </em><em>
</em><code><em>:CountryShape</em></code><em> have property </em><em>
</em><code><em>skos:prefLabel</em></code><em> then the values must have different language tags. </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:CountryShape</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:targetClass</span></em><em><span class="c011"> </span></em><em><span class="c011">:Country</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">       </span></em><em><span class="c011">skos:prefLabel</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c009">sh:uniqueLang</span></span></em><em><span class="c011"> </span></em><em><span class="c011">true</span></em><em><span class="c011">
</span></em><em><span class="c011">] .</span></em></td></tr>
</table><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:spain</span></em><em><span class="c011">  </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:Country</span></em><em><span class="c011">;                </span></em><span class="c011"><em><span class="c011">#\Passes{:CountryShape} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">        </span></em><em><span class="c011">skos:prefLabel</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Spain"</span></em></span></em><em><span class="c011">@en,</span></em><em><span class="c011">
</span></em><em><span class="c011">                       </span></em><em><span class="c011"><em><span class="c011">"España"</span></em></span></em><em><span class="c011">@es</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:france</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:Country</span></em><em><span class="c011">;                </span></em><span class="c011"><em><span class="c011">#\Passes{:CountryShape} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">        </span></em><em><span class="c011">skos:prefLabel</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"France"</span></em></span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">                       </span></em><em><span class="c011"><em><span class="c011">"France"</span></em></span></em><em><span class="c011">@en,</span></em><em><span class="c011">
</span></em><em><span class="c011">                       </span></em><em><span class="c011"><em><span class="c011">"Francia"</span></em></span></em><em><span class="c011">@es</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:italy</span></em><em><span class="c011">  </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:Country</span></em><em><span class="c011"> .               </span></em><span class="c011"><em><span class="c011">#\Passes{:CountryShape} *)     </span></em></span><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:usa</span></em><em><span class="c011">    </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:Country</span></em><em><span class="c011">;                </span></em><span class="c011"><em><span class="c011">#\Fails{:CountryShape} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">        </span></em><em><span class="c011">skos:prefLabel</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"USA"</span></em></span></em><em><span class="c011">@en,</span></em><em><span class="c011">
</span></em><em><span class="c011">                       </span></em><em><span class="c011"><em><span class="c011">"United States"</span></em></span></em><em><span class="c011">@en</span></em><em><span class="c011">.</span></em></td></tr>
</table><p><em>The previous example returns the error:</em></p><ul class="itemize"><li class="li-itemize"><em>Node </em><em>
</em><code><em>:usa</em></code><em> has more than one language for English at property </em><em>
</em><code><em>skos:prefLabel</em></code><em>.
</em></li></ul></div></div><p>In the previous example, a node without 
<code>skos:prefLabel</code> (e.g., 
<code>:italy</code>) also conforms to 
<code>:CountryShape</code>.</p><div class="example"><div class="theorem"><span class="c013">Example 125</span>  <em>Example with one language tag in a list of languages</em><p><em>A typical situation is to require exactly one literal per language from a list of allowed languages. 
For example, declaring that nodes of shape </em><em>
</em><code><em>:CountryShape</em></code><em> have at least one </em><em>
</em><code><em>skos:prefLabel</em></code><em> in English or Spanish.</em></p><p><a id="hevea_default650"></a><em>
</em><a id="hevea_default651"></a></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:CountryShape</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:targetClass</span></em><em><span class="c011"> </span></em><em><span class="c011">:Country</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">       </span></em><em><span class="c011">skos:prefLabel</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011">   1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c009">sh:uniqueLang</span></span></em><em><span class="c011"> </span></em><em><span class="c011">true</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:languageIn</span></em><em><span class="c011"> (</span></em><em><span class="c011"><em><span class="c011">"en"</span></em></span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"es"</span></em></span></em><em><span class="c011">) ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] .</span></em></td></tr>
</table><p><em>Given the following data:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:spain</span></em><em><span class="c011">  </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:Country</span></em><em><span class="c011">;                </span></em><span class="c011"><em><span class="c011">#\Passes{:CountryShape} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">        </span></em><em><span class="c011">skos:prefLabel</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Spain"</span></em></span></em><em><span class="c011">@en,</span></em><em><span class="c011">
</span></em><em><span class="c011">                       </span></em><em><span class="c011"><em><span class="c011">"España"</span></em></span></em><em><span class="c011">@es</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:france</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:Country</span></em><em><span class="c011">;                </span></em><span class="c011"><em><span class="c011">#\Fails{:CountryShape} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">        </span></em><em><span class="c011">skos:prefLabel</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"France"</span></em></span></em><em><span class="c011"> </span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">                       </span></em><em><span class="c011"><em><span class="c011">"France"</span></em></span></em><em><span class="c011">@en,</span></em><em><span class="c011">
</span></em><em><span class="c011">                       </span></em><em><span class="c011"><em><span class="c011">"Francia"</span></em></span></em><em><span class="c011">@es</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:italy</span></em><em><span class="c011">  </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:Country</span></em><em><span class="c011"> .               </span></em><span class="c011"><em><span class="c011">#\Fails{:CountryShape} *)     </span></em></span><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:usa</span></em><em><span class="c011">    </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:Country</span></em><em><span class="c011">;                </span></em><span class="c011"><em><span class="c011">#\Fails{:CountryShape} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">        </span></em><em><span class="c011">skos:prefLabel</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"USA"</span></em></span></em><em><span class="c011">@en,</span></em><em><span class="c011">
</span></em><em><span class="c011">                       </span></em><em><span class="c011"><em><span class="c011">"United States"</span></em></span></em><em><span class="c011">@en</span></em><em><span class="c011">.</span></em></td></tr>
</table><p><em>In this case, </em><em>
</em><code><em>:italy</em></code><em> fails because it has no </em><em>
</em><code><em>skos:prefLabel</em></code><em>, </em><em>
</em><code><em>:france</em></code><em> fails because if has one value that is not in English or Spanish, and </em><em>
</em><code><em>:usa</em></code><em> fails because it has more than one value in English.</em></p></div></div>
<h2 class="section" id="sec149">5.11  Logical Constraints: and, or, not, xone</h2>
<p> 
<a id="ch050logicalConstraints"></a>
<a id="ch5.sec11"></a></p><p><a id="hevea_default652"></a>
<a id="hevea_default653"></a>
<a id="hevea_default654"></a>
<a id="hevea_default655"></a>
The operators 
<code>sh:and</code>, 
<code>sh:or</code>, 
<code>xone</code>, and 
<code>sh:not</code> can be used to form complex constraints. </p><p><a id="hevea_default656"></a> 
Their semantics is described in Table <a href="#ch050.LogicalOperatorsSHACL">5.8</a>. 

<code>sh:and</code>, 
<code>sh:or</code>, and 
<code>sh:not</code> have the traditional meaning of the corresponding Boolean operators while 

<code>sh:xone</code> (<em>exactly one</em>) is similar to the exclusive-or when applied to two arguments.
When applied to more than 2 arguments, the former requires exactly one, 
while the latter requires an odd number of arguments to be satisfied.</p><blockquote class="table"><div class="center"><hr class="c021"></div>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Table 5.8: SHACL logical operators</td></tr>
</table></div>
<a id="ch050.LogicalOperatorsSHACL"></a> 
<div class="center">
<table class="c000 cellpadding1" border=1><tr><td class="c017"> Operation</td><td class="c019">Description 
</td></tr>
<tr><td class="c017"> 
<code>sh:and</code></td><td class="c019">
<code>sh:and</code><code> (</code><code>S1</code><code> ... </code><code>SN</code><code>)</code> specifies that each value node must conform to all the shapes 
<code>S1</code>…
<code>SN</code>.
</td></tr>
<tr><td class="c017"> 
<code>sh:or</code></td><td class="c019">
<code>sh:or</code><code> (</code><code>S1</code><code> ... </code><code>SN</code><code>)</code> specifies that each value node conforms to at least one of the shapes 
<code>S1</code>…
<code>SN</code>.
</td></tr>
<tr><td class="c017"> 
<code>sh:not</code></td><td class="c019">
<code>sh:not</code><code> </code><code>S</code> specifies that each value node must not conform to 
<code>S</code>. 
</td></tr>
<tr><td class="c017"> 
<code>sh:xone</code></td><td class="c019">
<code>sh:xone</code><code> (</code><code>S1</code><code> ... </code><code>SN</code><code>)</code> specifies that exactly one node conforms to one of the shapes 
<code>S1</code>…
<code>SN</code>.
</td></tr>
</table>
</div>
<div class="center"><hr class="c021"></div></blockquote>
<h3 class="subsection" id="sec150">5.11.1  AND</h3>
<p> 
<a id="ch050and"></a>
<a id="ch5.sec11.1"></a>
<a id="hevea_default657"></a></p><p>A node conforms to a shape containing the 
<code>sh:and</code> operator if it conforms to all the shapes linked by it. </p><p>The following example declares a 
<code>:User</code> shape as the conjunction of two property shapes. </p><div class="example"><div class="theorem"><span class="c013">Example 126</span>  <em>SHACL AND example</em><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011"> </span></em><em><span class="c011">sh:targetClass</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c009">sh:and</span></span></em><em><span class="c011"> (</span></em><em><span class="c011">
</span></em><em><span class="c011">  [ </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:path</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:name</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011"> </span></em><em><span class="c011">xsd:string</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1 ]</span></em><em><span class="c011">
</span></em><em><span class="c011">  ]</span></em><em><span class="c011">
</span></em><em><span class="c011">  [ </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:path</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:affiliation</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1 ]</span></em><em><span class="c011">
</span></em><em><span class="c011">  ]</span></em><em><span class="c011">
</span></em><em><span class="c011"> )</span></em><em><span class="c011">
</span></em><em><span class="c011">.</span></em></td></tr>
</table><p><em>The declaration of type </em><em>
</em><code><em>sh:NodeShape</em></code><em> and the use of </em><em>
</em><code><em>sh:property</em></code><em> is not required when we want to reference a property shape. The following code is equivalent to the previous example.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011"> </span></em><em><span class="c011">sh:targetClass</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c009">sh:and</span></span></em><em><span class="c011"> (</span></em><em><span class="c011">
</span></em><em><span class="c011">  [ </span></em><em><span class="c011">sh:path</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:name</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011"> </span></em><em><span class="c011">xsd:string</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011">  ]</span></em><em><span class="c011">
</span></em><em><span class="c011">  [ </span></em><em><span class="c011">sh:path</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:affiliation</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011">  ]</span></em><em><span class="c011">
</span></em><em><span class="c011"> )</span></em><em><span class="c011">
</span></em><em><span class="c011">.</span></em></td></tr>
</table><p><em>
</em><code><em>sh:and</em></code><em> is a little redundant because by default, when we associate constraint components to a shape, 
the meaning is that all those constraints must conform, so there is an implicit conjunction. </em></p><p><em>For example, the previous shape and the following one have the same meaning. </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:UserShape</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:targetClass</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:path</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:name</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011"> </span></em><em><span class="c011">xsd:string</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011"> ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:path</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:affiliation</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011"> ]</span></em><em><span class="c011">
</span></em><em><span class="c011">.</span></em></td></tr>
</table></div></div><p>In case of complex expressions, using 
<code>sh:and</code> may improve readability.
One example is using 
<code>sh:and</code> to extend one shape with other constraints.</p><div class="example"><div class="theorem"><span class="c013">Example 127</span>  <em>Extending a shape with other constraints</em><em> 
</em><a id="ch050ExtendingShapesSHACL"></a><p><em>The following example declares a top-level shape </em><em>
</em><code><em>:Person</em></code><em> whose nodes must have </em><em>
</em><code><em>schema:name</em></code><em>. 
The shape </em><em>
</em><code><em>:User</em></code><em> extends </em><em>
</em><code><em>:Person</em></code><em> adding a new constraint on the existing property </em><em>
</em><code><em>schema:name</em></code><em> and declaring the need of another property </em><em>
</em><code><em>schema:email</em></code><em>. 
Finally, the shape </em><em>
</em><code><em>:Student</em></code><em> extends </em><em>
</em><code><em>:User</em></code><em> adding a new property 
</em><em>
</em><code><em>:course</em></code><em>.</em><sup><a id="text36" href="#note36"><em>23</em></a></sup></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:Person</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape,</span></em><em><span class="c011"> </span></em><em><span class="c011">rdfs:Class</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011"> </span></em><em><span class="c011">xsd:string</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:maxCount</span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:User</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape,</span></em><em><span class="c011"> </span></em><em><span class="c011">rdfs:Class</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c009">sh:and</span></span></em><em><span class="c011"> (</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">:Person</span></em><em><span class="c011">
</span></em><em><span class="c011">   [ </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">      </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011">sh:maxLength</span></em><em><span class="c011"> 5</span></em><em><span class="c011">
</span></em><em><span class="c011">   ]</span></em><em><span class="c011">
</span></em><em><span class="c011">   [ </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">      </span></em><em><span class="c011">schema:email</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011">sh:nodeKind</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:IRI</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011">  1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011">sh:maxCount</span></em><em><span class="c011">  1</span></em><em><span class="c011">
</span></em><em><span class="c011">   ]</span></em><em><span class="c011">
</span></em><em><span class="c011">  ) .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:Student</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape,</span></em><em><span class="c011"> </span></em><em><span class="c011">rdfs:Class</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c009">sh:and</span></span></em><em><span class="c011"> (</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">:User</span></em><em><span class="c011">
</span></em><em><span class="c011">   [ </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">      </span></em><em><span class="c011">:course</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011">sh:nodeKind</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:IRI</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011">  1;</span></em><em><span class="c011">
</span></em><em><span class="c011">   ]</span></em><em><span class="c011">
</span></em><em><span class="c011">  ) .</span></em></td></tr>
</table><p><em>If we have the following RDF data:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:alice</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011">            </span></em><em><span class="c011">:Person</span></em><em><span class="c011"> ; </span></em><span class="c011"><em><span class="c011"># \Passes{:Person} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011">  </span></em><em><span class="c011"><em><span class="c011">"Alice"</span></em></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:bob</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011">              </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;   </span></em><span class="c011"><em><span class="c011"># \Fails{:User} *)   </span></em></span><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:name</span></em><em><span class="c011">    </span></em><em><span class="c011"><em><span class="c011">"Robert Smith"</span></em></span></em><em><span class="c011">;  </span></em><span class="c011"><em><span class="c011"># long name *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:email</span></em><em><span class="c011">   &lt;</span></em><em><span class="c011">bob@example</span></em><em><span class="c011">.</span></em><em><span class="c011">org</span></em><em><span class="c011">&gt; .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:carol</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011">   </span></em><em><span class="c011">:Person,</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011">;    </span></em><span class="c011"><em><span class="c011"># \Passes{:Person and :User} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011">  </span></em><em><span class="c011"><em><span class="c011">"Carol"</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:email</span></em><em><span class="c011"> &lt;</span></em><em><span class="c011">carol@example</span></em><em><span class="c011">.</span></em><em><span class="c011">org</span></em><em><span class="c011">&gt; .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:dave</span></em><em><span class="c011">  </span></em><em><span class="c011">a</span></em><em><span class="c011">            </span></em><em><span class="c011">:Student</span></em><em><span class="c011">; </span></em><span class="c011"><em><span class="c011"># \Passes{:Person,:User and Student} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011">  </span></em><em><span class="c011"><em><span class="c011">"Dave"</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:email</span></em><em><span class="c011"> &lt;</span></em><em><span class="c011">carol@example</span></em><em><span class="c011">.</span></em><em><span class="c011">org</span></em><em><span class="c011">&gt;;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">:course</span></em><em><span class="c011">      </span></em><em><span class="c011">:algebra</span></em><em><span class="c011"> .</span></em></td></tr>
</table></div></div>
<h3 class="subsection" id="sec151">5.11.2  OR</h3>
<p> 
<a id="ch050or"></a>
<a id="ch5.sec11.2"></a></p><p><a id="hevea_default658"></a>
The parameter 
<code>sh:or</code> declares a disjunction between several shapes. </p><div class="example"><div class="theorem"><span class="c013">Example 128</span>  <em>SHACL disjunction example</em><p><em>The following shape declares that nodes must either have property </em><em>
</em><code><em>foaf:name</em></code><em> or </em><em>
</em><code><em>schema:name</em></code><em> (or both).</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:UserShape</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:targetClass</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c009">sh:or</span></span></em><em><span class="c011"> ( [ </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">foaf:name</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">           </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">         ]</span></em><em><span class="c011">
</span></em><em><span class="c011">         [ </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:name</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">           </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">         ]</span></em><em><span class="c011">
</span></em><em><span class="c011">       )</span></em><em><span class="c011">
</span></em><em><span class="c011">.</span></em></td></tr>
</table><p><em>Given the following data:
	
</em><em>

</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:alice</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Alice"</span></em></span></em><em><span class="c011"> . </span></em><span class="c011"><em><span class="c011">#\Passes{:User} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:bob</span></em><em><span class="c011">   </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">foaf:name</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Robert"</span></em></span></em><em><span class="c011"> .  </span></em><span class="c011"><em><span class="c011">#\Passes{:User} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:carol</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">foaf:name</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Carol"</span></em></span></em><em><span class="c011">;    </span></em><span class="c011"><em><span class="c011">#\Passes{:User} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Carol"</span></em></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:dave</span></em><em><span class="c011">  </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">rdfs:label</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Dave"</span></em></span></em><em><span class="c011"> .  </span></em><span class="c011"><em><span class="c011">#\Fails{:User} *)</span></em></span></td></tr>
</table><p><em>A SHACL processor checks that </em><em>
</em><code><em>:alice</em></code><em>, </em><em>
</em><code><em>:bob</em></code><em>, and </em><em>
</em><code><em>:carol</em></code><em> conform to </em><em>
</em><code><em>:UserShape</em></code><em> but returns an error on </em><em>
</em><code><em>:dave</em></code><em>.</em></p></div></div><p>For this particular example, the use of 
<code>sh:or</code> could be replaced by a SHACL property with 
<code>sh:alternativePath</code>:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:UserShape</span><span class="c011"> </span><span class="c011">a</span><span class="c011"> </span><span class="c011">sh:NodeShape</span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011">sh:property</span><span class="c011"> [</span><span class="c011">
</span><span class="c011">    </span><span class="c011">sh:path</span><span class="c011"> [</span><span class="c011"><span class="c009">sh:alternativePath</span></span><span class="c011"> (</span><span class="c011">schema:name</span><span class="c011"> </span><span class="c011">foaf:name</span><span class="c011">)] ;</span><span class="c011">
</span><span class="c011">    </span><span class="c011">sh:minCount</span><span class="c011"> 1;</span><span class="c011">
</span><span class="c011">  ] .</span></td></tr>
</table><div class="example"><div class="theorem"><span class="c013">Example 129</span>  <em>Union of datatypes</em><p><em>A common use case of </em><em>
</em><code><em>sh:or</em></code><em> is to declare the union of several datatypes.
The following example declares that products must have a </em><em>
</em><code><em>rdfs:label</em></code><em> which must be either a </em><em>
</em><code><em>xsd:string</em></code><em> or a language tagged literal, and
must have a release date that must be either a </em><em>
</em><code><em>xsd:date</em></code><em>, or </em><em>
</em><code><em>xsd:gYear</em></code><em> or the string </em><em>
</em><code><em><code><em>"unknown-past"</em></code></em></code><em> or </em><em>
</em><code><em><code><em>"unknown-future"</em></code></em></code><em>.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:ProductShape</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:targetClass</span></em><em><span class="c011"> </span></em><em><span class="c011">:Product</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">         </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">rdfs:label</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c009">sh:or</span></span></em><em><span class="c011"> (</span></em><em><span class="c011">
</span></em><em><span class="c011">          [</span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011"> </span></em><em><span class="c011">xsd:string</span></em><em><span class="c011">]</span></em><em><span class="c011">
</span></em><em><span class="c011">          [</span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011"> </span></em><em><span class="c011">rdf:langString</span></em><em><span class="c011">]</span></em><em><span class="c011">
</span></em><em><span class="c011">     );</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">         </span></em><em><span class="c011">sh:maxCount</span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011">  ];</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">         </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:releaseDate</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c009">sh:or</span></span></em><em><span class="c011"> (</span></em><em><span class="c011">
</span></em><em><span class="c011">          [</span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011"> </span></em><em><span class="c011">xsd:date</span></em><em><span class="c011">]</span></em><em><span class="c011">
</span></em><em><span class="c011">          [</span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011"> </span></em><em><span class="c011">xsd:gYear</span></em><em><span class="c011">]</span></em><em><span class="c011">
</span></em><em><span class="c011">          [</span></em><em><span class="c011">sh:in</span></em><em><span class="c011"> (</span></em><em><span class="c011"><em><span class="c011">"unknown-past"</span></em></span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"unknown-future"</span></em></span></em><em><span class="c011">)]</span></em><em><span class="c011">
</span></em><em><span class="c011">     );</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">         </span></em><em><span class="c011">sh:maxCount</span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011">  ];</span></em><em><span class="c011">
</span></em><em><span class="c011">.</span></em></td></tr>
</table><p><em>Given the following data:
	
</em><em>

</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:p1</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:Product</span></em><em><span class="c011"> ;                           </span></em><span class="c011"><em><span class="c011">#\Passes{:Product} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">rdfs:label</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Laptop"</span></em></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">schema:releaseDate</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"1990"</span></em></span></em><em><span class="c011">^^</span></em><em><span class="c011">xsd:gYear</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:p2</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:Product</span></em><em><span class="c011"> ;                           </span></em><span class="c011"><em><span class="c011">#\Passes{:Product} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">rdfs:label</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Car"</span></em></span></em><em><span class="c011">@en</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">schema:releaseDate</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"unknown-future"</span></em></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:p3</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:Product</span></em><em><span class="c011"> ;                           </span></em><span class="c011"><em><span class="c011">#\Fails{:Product} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">rdfs:label</span></em><em><span class="c011"> </span></em><em><span class="c011">:House</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">schema:releaseDate</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"2020"</span></em></span></em><em><span class="c011">^^</span></em><em><span class="c011">xsd:integer</span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>A SHACL processor checks that </em><em>
</em><code><em>:p1</em></code><em>, and </em><em>
</em><code><em>:p2</em></code><em> conform to </em><em>
</em><code><em>:ProductShape</em></code><em> but returns an error on </em><em>
</em><code><em>:p3</em></code><em>.</em></p></div></div>
<h3 class="subsection" id="sec152">5.11.3  Exactly One</h3>
<p> 
<a id="ch050xone"></a>
<a id="ch5.sec11.3"></a></p><p><a id="hevea_default659"></a>
<a id="hevea_default660"></a>
A node conforms to a shape containing the 
<code>sh:xone</code> operator if it conforms to exactly one of the shapes linked by it.</p><p><a id="hevea_default661"></a>
The semantics of 
<code>sh:xone</code> is different from 
<code>Exclusive</code><code> </code><code>OR</code> (XOR) when there are more than 2 arguments.
XOR is usually defined as requiring conformance of an odd number of arguments, while 
<code>sh:xone</code> requires conformance of exactly one.</p><div class="example"><div class="theorem"><span class="c013">Example 130</span>  <em>SHACL Xone example</em><p><em>The following shape declares that nodes must have either </em><em>
</em><code><em>foaf:name</em></code><em> or </em><em>
</em><code><em>schema:name</em></code><em> but not both.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:UserShape</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:targetClass</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c009">sh:xone</span></span></em><em><span class="c011"> (</span></em><em><span class="c011">
</span></em><em><span class="c011">   [ </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011">sh:path</span></em><em><span class="c011"> </span></em><em><span class="c011">foaf:name</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">     ]</span></em><em><span class="c011">
</span></em><em><span class="c011">   ]</span></em><em><span class="c011">
</span></em><em><span class="c011">   [ </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011">sh:path</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:name</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">     ]</span></em><em><span class="c011">
</span></em><em><span class="c011">   ]</span></em><em><span class="c011">
</span></em><em><span class="c011">  ) .</span></em></td></tr>
</table><p><em>Given the previous shape declaration and the following RDF graph: 
	
</em><em>

</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:alice</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;              </span></em><span class="c011"><em><span class="c011">#\Passes{:User} *)    </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Alice"</span></em></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:bob</span></em><em><span class="c011">   </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;              </span></em><span class="c011"><em><span class="c011">#\Passes{:User} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">foaf:name</span></em><em><span class="c011">   </span></em><em><span class="c011"><em><span class="c011">"Robert"</span></em></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:carol</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;              </span></em><span class="c011"><em><span class="c011">#\Fails{:User} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">foaf:name</span></em><em><span class="c011">   </span></em><em><span class="c011"><em><span class="c011">"Carol"</span></em></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Carol"</span></em></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:dave</span></em><em><span class="c011">  </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;              </span></em><span class="c011"><em><span class="c011">#\Fails{:User} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">rdfs:label</span></em><em><span class="c011">  </span></em><em><span class="c011"><em><span class="c011">"Dave"</span></em></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>A SHACL processor checks that </em><em>
</em><code><em>:alice</em></code><em> and </em><em>
</em><code><em>:bob</em></code><em> conform to </em><em>
</em><code><em>:User</em></code><em> but gives errors for </em><em>
</em><code><em>:carol</em></code><em> and </em><em>
</em><code><em>:dave</em></code><em>.
</em></p></div></div><p>The 
<code>sh:xone</code> constraint component only checks that exactly one of its arguments is satisfied. </p><p>When defining complex models, it must be used with caution as its behavior may not be the intended one.</p><div class="example"><div class="theorem"><span class="c013">Example 131</span>  <em>Exactly one on complex expressions</em><em> 
</em><a id="ch050exampleChoicesSHACL"></a><p><em>We want to declare that a user has either one name or a combination of one or more given names plus a family name, but not both. 
This example is the same as Example </em><a href="bookHtml011.html#ch040%3AexampleChoices"><em>55</em></a><em> in ShEx.
A first attempt to model it in SHACL would be:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:UserShape</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:targetClass</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c009">sh:xone</span></span></em><em><span class="c011"> (</span></em><em><span class="c011">
</span></em><em><span class="c011">  [ </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011"> </span></em><em><span class="c011">xsd:string</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:maxCount</span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011">  ]</span></em><em><span class="c011">
</span></em><em><span class="c011">  [ </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:givenName</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011"> </span></em><em><span class="c011">xsd:string</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">    ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:familyName</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011"> </span></em><em><span class="c011">xsd:string</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011">sh:maxCount</span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011">    ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ]</span></em><em><span class="c011">
</span></em><em><span class="c011"> ) .</span></em></td></tr>
</table><p><em>Note, however, that xone does not reject everything we might expect it to:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:alice</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;              </span></em><span class="c011"><em><span class="c011">#\Passes{:UserShape} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Alice"</span></em></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:bob</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;                </span></em><span class="c011"><em><span class="c011">#\Passes{:UserShape} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">schema:givenName</span></em><em><span class="c011">  </span></em><em><span class="c011"><em><span class="c011">"Bob"</span></em></span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">                    </span></em><em><span class="c011"><em><span class="c011">"Robert"</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">schema:familyName</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Smith"</span></em></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:carol</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;              </span></em><span class="c011"><em><span class="c011">#\Fails{:UserShape} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">schema:name</span></em><em><span class="c011">       </span></em><em><span class="c011"><em><span class="c011">"Carol"</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">schema:givenName</span></em><em><span class="c011">  </span></em><em><span class="c011"><em><span class="c011">"Carol"</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">schema:familyName</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"King"</span></em></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:dave</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;               </span></em><span class="c011"><em><span class="c011">#\Passes{:UserShape} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">schema:name</span></em><em><span class="c011">       </span></em><em><span class="c011"><em><span class="c011">"Dave"</span></em></span></em><em><span class="c011"> ;  </span></em><span class="c011"><em><span class="c011"># But it should fail  </span></em></span><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">schema:familyName</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"King"</span></em></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>In the case of </em><em>
</em><code><em>:dave</em></code><em> it passes although the intended meaning is that it should fail (it conforms to one of the branches 
but partially matches the other one). </em></p><p><em>The solution is to change the expression representing each alternative at the top-level excluding 
the other ones.
In which case, </em><em>
</em><code><em>sh:xone</em></code><em> is not required and </em><em>
</em><code><em>sh:or</em></code><em> is enough. 
Note that </em><em>
</em><code><em>sh:maxCount</em></code><code><em> 0</em></code><em> plays the role of negation. </em></p><p><em>The SHACL code equivalent to Example </em><a href="bookHtml011.html#ch040%3AexampleChoices"><em>55</em></a><em> is:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:UserShape</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:targetClass</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c009">sh:or</span></span></em><em><span class="c011"> (</span></em><em><span class="c011">
</span></em><em><span class="c011">  [ </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011">sh:path</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011"> </span></em><em><span class="c011">xsd:string</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011">sh:maxCount</span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011">    ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011">sh:path</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:givenName</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011">sh:maxCount</span></em><em><span class="c011"> 0</span></em><em><span class="c011">
</span></em><em><span class="c011">    ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011">sh:path</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:familyName</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011">sh:maxCount</span></em><em><span class="c011"> 0</span></em><em><span class="c011">
</span></em><em><span class="c011">    ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ]</span></em><em><span class="c011">
</span></em><em><span class="c011">  [ </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011">sh:path</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:name</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011">sh:maxCount</span></em><em><span class="c011"> 0;</span></em><em><span class="c011">
</span></em><em><span class="c011">    ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011">sh:path</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:givenName</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011"> </span></em><em><span class="c011">xsd:string</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">    ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011">sh:path</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:familyName</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011"> </span></em><em><span class="c011">xsd:string</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011">sh:maxCount</span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011">    ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ]</span></em><em><span class="c011">
</span></em><em><span class="c011"> ) .</span></em></td></tr>
</table><p><em>With this definition the node </em><em>
</em><code><em>:dave</em></code><em> would now fail as expected.
Note that this definition can become quite verbose for more complex expressions 
(see Section </em><a href="bookHtml014.html#ch060xoneAlternatives"><em>7.13</em></a><em> for a longer example).</em></p></div></div>
<h3 class="subsection" id="sec153">5.11.4  Not</h3>
<p> 
<a id="ch050not"></a>
<a id="ch5.sec11.4"></a></p><p>The parameter 
<code>sh:not</code> specifies the condition that each node must not conform to a given shape.</p><div class="example"><div class="theorem"><span class="c013">Example 132</span>  <em>SHACL Not</em><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:NotFoaf</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:not</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011">sh:path</span></em><em><span class="c011"> </span></em><em><span class="c011">foaf:name</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] .</span></em></td></tr>
</table><p><em>	
</em><em>

</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:alice</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Alice"</span></em></span></em><em><span class="c011"> .   </span></em><span class="c011"><em><span class="c011">#\Passes{:User} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:bob</span></em><em><span class="c011">   </span></em><em><span class="c011">foaf:name</span></em><em><span class="c011">   </span></em><em><span class="c011"><em><span class="c011">"Robert"</span></em></span></em><em><span class="c011"> .  </span></em><span class="c011"><em><span class="c011">#\Fails{:User} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:carol</span></em><em><span class="c011"> </span></em><em><span class="c011">rdfs:label</span></em><em><span class="c011">  </span></em><em><span class="c011"><em><span class="c011">"Carol"</span></em></span></em><em><span class="c011"> .   </span></em><span class="c011"><em><span class="c011">#\Passes{:User} *) </span></em></span></td></tr>
</table></div></div>
<h3 class="subsection" id="sec154">5.11.5  Combining Logical Operators</h3>
<p>
<a id="ch5.sec11.5"></a></p><p>It is possible to combine the previous logical operators to form more complex expressions. </p><p><a id="hevea_default662"></a>
</p>
<h5 class="paragraph" id="sec155">IF-THEN pattern</h5>
<p> 
<a id="ch050IFTHENSHACL"></a>
A typical pattern is to emulate an IF-THEN. 
Remember that 
<code>IF</code><code> </code><code>x</code><code> </code><code>THEN</code><code> </code><code>y</code> is equivalent to 
<code>(</code><code>NOT</code><code> </code><code>x</code><code>) </code><code>OR</code><code> </code><code>y</code>.</p><div class="example"><div class="theorem"><span class="c013">Example 133</span>  <em>IF-THEN pattern in SHACL</em><em> </em><p><em>The following shape declares that all products must have a </em><em>
</em><code><em>schema:productID</em></code><em> and if a product has </em><em>
</em><code><em>rdf:type</em></code><em> </em><em>
</em><code><em>schema:Vehicle</em></code><em> then it must have the properties </em><em>
</em><code><em>schema:vehicleEngine</em></code><em> and </em><em>
</em><code><em>schema:fuelType</em></code><em>. 
This example is the same as ShEx Example </em><a href="bookHtml011.html#ch040ShExIFTHEN"><em>83</em></a><em>.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:ProductShape</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:path</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:productID</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1; </span></em><em><span class="c011">sh:maxCount</span></em><em><span class="c011"> 1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ];</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:or</span></em><em><span class="c011"> (</span></em><em><span class="c011">
</span></em><em><span class="c011">    [ </span></em><em><span class="c011">sh:not</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">        </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">          </span></em><em><span class="c011">sh:path</span></em><em><span class="c011"> </span></em><em><span class="c011">rdf:type</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">          </span></em><em><span class="c011">sh:hasValue</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:Vehicle</span></em><em><span class="c011">
</span></em><em><span class="c011">      ]]</span></em><em><span class="c011">
</span></em><em><span class="c011">    ]</span></em><em><span class="c011">
</span></em><em><span class="c011">    [ </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">        </span></em><em><span class="c011">sh:path</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:vehicleEngine</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">        </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1; </span></em><em><span class="c011">sh:maxCount</span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011">      ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">        </span></em><em><span class="c011">sh:path</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:fuelType</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">        </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1; </span></em><em><span class="c011">sh:maxCount</span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011">      ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    ]</span></em><em><span class="c011">
</span></em><em><span class="c011">  ) .</span></em></td></tr>
</table><p><em>Given the following data:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:p1</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:Book</span></em><em><span class="c011">;                   </span></em><span class="c011"><em><span class="c011">#\Passes{:ProductShape} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">schema:productID</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"P1"</span></em></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:p2</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:Vehicle</span></em><em><span class="c011"> ;         </span></em><span class="c011"><em><span class="c011">#\Passes{:ProductShape} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">schema:productID</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"P2"</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">schema:fuelType</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Gasoline"</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">schema:vehicleEngine</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"X2"</span></em></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:p3</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:Vehicle</span></em><em><span class="c011"> ;         </span></em><span class="c011"><em><span class="c011">#\Fails{:ProductShape} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">schema:productID</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"P3"</span></em></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>A SHACL processor checks that </em><em>
</em><code><em>:p1</em></code><em> and </em><em>
</em><code><em>:p2</em></code><em> conform to </em><em>
</em><code><em>:ProductShape</em></code><em> but signals an error for </em><em>
</em><code><em>:p3</em></code><em>.</em></p></div></div>
<h5 class="paragraph" id="sec156">IF-THEN-ELSE pattern</h5>
<p> 
<a id="ch050IFTHENELSESHACL"></a></p><p>In the same way as before, an IF-THEN-ELSE can also be declared.
Remember that: 

<code>IF</code><code> </code><code>A</code><code> </code><code>THEN</code><code> </code><code>B</code><code> </code><code>ELSE</code><code> </code><code>C</code> is equivalent to 
<code>IF</code><code> </code><code>A</code><code> </code><code>THEN</code><code> </code><code>B</code><code> </code><code>AND</code><code> </code><code>IF</code><code> </code><code>NOT</code><code> </code><code>A</code><code> </code><code>THEN</code><code> </code><code>C</code></p><div class="example"><div class="theorem"><span class="c013">Example 134</span>  <em>IF-THEN-ELSE pattern in SHACL</em><em> </em><p><em>The following example declares that if a product has </em><em>
</em><code><em>rdf:type</em></code><em> with value </em><em>
</em><code><em>schema:Vehicle</em></code><em> then it must have </em><em>
</em><code><em>schema:vehicleEngine</em></code><em>
and </em><em>
</em><code><em>schema:fuelType</em></code><em>, else it must have </em><em>
</em><code><em>schema:category</em></code><em> with a </em><em>
</em><code><em>xsd:string</em></code><em> value. 
This example is equivalent to the ShEx example presented in 
Section </em><a href="bookHtml011.html#ch040ShExIFTHENELSE"><em>4.8.3</em></a><em>.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:Product</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:or</span></em><em><span class="c011"> (</span></em><em><span class="c011">
</span></em><em><span class="c011">  [ </span></em><em><span class="c011">sh:not</span></em><em><span class="c011">
</span></em><em><span class="c011">     [ </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">rdf:type</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">sh:hasValue</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:Vehicle</span></em><em><span class="c011">
</span></em><em><span class="c011">     ]</span></em><em><span class="c011">
</span></em><em><span class="c011">  ]</span></em><em><span class="c011">
</span></em><em><span class="c011">  [ </span></em><em><span class="c011">sh:and</span></em><em><span class="c011"> (</span></em><em><span class="c011">
</span></em><em><span class="c011">     [ </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:vehicleEngine</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">sh:maxCount</span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011">     ]</span></em><em><span class="c011">
</span></em><em><span class="c011">     [ </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:fuelType</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">sh:maxCount</span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011">     ]</span></em><em><span class="c011">
</span></em><em><span class="c011">   )</span></em><em><span class="c011">
</span></em><em><span class="c011">  ]</span></em><em><span class="c011">
</span></em><em><span class="c011"> );</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:or</span></em><em><span class="c011"> (</span></em><em><span class="c011">
</span></em><em><span class="c011">   [ </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">rdf:type</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011">sh:hasValue</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:Vehicle</span></em><em><span class="c011">
</span></em><em><span class="c011">   ]</span></em><em><span class="c011">
</span></em><em><span class="c011">   [ </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:category</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011"> </span></em><em><span class="c011">xsd:string</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011">sh:maxCount</span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011">   ]</span></em><em><span class="c011">
</span></em><em><span class="c011"> )</span></em><em><span class="c011">
</span></em><em><span class="c011">.</span></em></td></tr>
</table><p><em>With the following data, nodes </em><em>
</em><code><em>:kitt</em></code><em> and </em><em>
</em><code><em>:c23</em></code><em> conform to </em><em>
</em><code><em>:Product</em></code><em> each one passing one of the branches, while </em><em>
</em><code><em>:bad1</em></code><em> and </em><em>
</em><code><em>:bad2</em></code><em> do not conform.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:kitt</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:Vehicle</span></em><em><span class="c011">;           </span></em><span class="c011"><em><span class="c011">#\Passes{:Product} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011">schema:vehicleEngine</span></em><em><span class="c011"> </span></em><em><span class="c011">:x42</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011">schema:fuelType</span></em><em><span class="c011"> </span></em><em><span class="c011">:electric</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:c23</span></em><em><span class="c011">  </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:Computer</span></em><em><span class="c011"> ;         </span></em><span class="c011"><em><span class="c011">#\Passes{:Product} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011">schema:category</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Laptop"</span></em></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:bad1</span></em><em><span class="c011">  </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:Vehicle</span></em><em><span class="c011">;          </span></em><span class="c011"><em><span class="c011">#\Fails{:Product} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011">schema:fuelType</span></em><em><span class="c011"> </span></em><em><span class="c011">:electric</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:bad2</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:Computer</span></em><em><span class="c011"> .         </span></em><span class="c011"><em><span class="c011">#\Fails{:Product} *)</span></em></span></td></tr>
</table></div></div>
<h2 class="section" id="sec157">5.12  Shape-based Constraints</h2>
<p> 
<a id="ch050shapeBasedConstraints"></a>
<a id="ch5.sec12"></a>
<a id="ch5.sec12.1"></a></p><p><a id="hevea_default663"></a>

<code>sh:node</code> specifies that the value nodes conform to a given shape.</p><div class="example"><div class="theorem"><span class="c013">Example 135</span>  <em>
</em><code><em>sh:node</em></code><em> example</em><em> 
</em><a id="ch050NodeExample"></a><p><em>The following shapes graph declares that nodes of shape </em><em>
</em><code><em>:User</em></code><em> have a property </em><em>
</em><code><em>schema:worksFor</em></code><em> whose values must conform to the shape </em><em>
</em><code><em>:Company</em></code><em> and that nodes of shape </em><em>
</em><code><em>:Company</em></code><em> have a property </em><em>
</em><code><em>schema:name</em></code><em> whose values are strings.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:UserShape</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:targetClass</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:path</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:worksFor</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c009">sh:node</span></span></em><em><span class="c011"> </span></em><em><span class="c011">:Company</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:CompanyShape</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:path</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011"> </span></em><em><span class="c011">xsd:string</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] .</span></em></td></tr>
</table><p><em>Consider the following data:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:UserShape</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:targetClass</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:worksFor</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:node</span></em><em><span class="c011">     </span></em><em><span class="c011">:CompanyShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ]</span></em><em><span class="c011">
</span></em><em><span class="c011">.</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:CompanyShape</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011"> </span></em><em><span class="c011">xsd:string</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ]</span></em><em><span class="c011">
</span></em><em><span class="c011">.</span></em></td></tr>
</table><p><em>This data would raise the following error: </em></p><ul class="itemize"><li class="li-itemize"><em>
</em><em>
</em><code><em>:bob</em></code><em> does not conform to shape </em><em>
</em><code><em>:User</em></code><em> because the value of property </em><em>
</em><code><em>schema:worksFor</em></code><em> does not conform to shape </em><em>
</em><code><em>:CompanyShape</em></code><em>. 
The reason is that the value of property </em><em>
</em><code><em>schema:name</em></code><em> does not have datatype </em><em>
</em><code><em>xsd:string</em></code><em>.
</em></li></ul></div></div><p><a id="hevea_default664"></a>

<code>sh:property</code> specifies that the values conform to a given property shape. </p><p>Although in most of the previous examples 
<code>sh:property</code> was pointing to blank nodes, 
it may be possible (and even recommended) to use IRIs for property shapes. </p><div class="example"><div class="theorem"><span class="c013">Example 136</span>  <em>
</em><code><em>sh:property</em></code><em> example</em><p><em>The following shapes graph declares that </em><em>
</em><code><em>:UserShape</em></code><em> nodes have a name and work for something that also has a name. </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:UserShape</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:targetClass</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c009">sh:property</span></span></em><em><span class="c011"> </span></em><em><span class="c011">:HasName</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c009">sh:property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:path</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:worksFor</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:node</span></em><em><span class="c011"> </span></em><em><span class="c011">:HasName</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:HasName</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:path</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011"> </span></em><em><span class="c011">xsd:string</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:maxCount</span></em><em><span class="c011"> 1 .</span></em></td></tr>
</table><p><em>Consider the following data:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:alice</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011">;                       </span></em><span class="c011"><em><span class="c011">#\Passes{:UserShape} *)   </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011">     </span></em><em><span class="c011"><em><span class="c011">"Alice"</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:worksFor</span></em><em><span class="c011"> </span></em><em><span class="c011">:OurCompany</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:bob</span></em><em><span class="c011">   </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011">;                       </span></em><span class="c011"><em><span class="c011">#\Fails{:UserShape} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011">     </span></em><em><span class="c011"><em><span class="c011">"Robert"</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:worksFor</span></em><em><span class="c011"> </span></em><em><span class="c011">:Another</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:carol</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;                      </span></em><span class="c011"><em><span class="c011">#\Fails{:UserShape} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:worksFor</span></em><em><span class="c011"> </span></em><em><span class="c011">:OurCompany</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:OurCompany</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"OurCompany"</span></em></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:Another</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> 23 .</span></em></td></tr>
</table><p><em>A SHACL processor raises the error: </em></p><ul class="itemize"><li class="li-itemize"><em>
</em><code><em>:bob</em></code><em> does not conform to shape </em><em>
</em><code><em>:UserShape</em></code><em> because the value of </em><em>
</em><code><em>schema:worksFor</em></code><em> (</em><em>
</em><code><em>:Another</em></code><em>) has 23 as </em><em>
</em><code><em>schema:name</em></code><em> which does not have datatype </em><em>
</em><code><em>xsd:string</em></code><em>.</em></li><li class="li-itemize"><em>
</em><code><em>:carol</em></code><em> does not conform to shape </em><em>
</em><code><em>:UserShape</em></code><em> because it does not have a name.</em></li></ul></div></div><p><a id="hevea_default665"></a> <a id="hevea_default666"></a>
</p>
<h3 class="subsection" id="sec158">5.12.1  Shape References and Recursion</h3>
<p> 
<a id="050SHACLRecursion"></a>
<a id="ch5.sec12.2"></a></p><p>Declarations with shape references like 
<code>sh:node</code> and 
<code>sh:property</code> trigger validation of nodes with other shapes.
In Example <a href="#ch050NodeExample">135</a>, validating 
<code>:alice</code> with 
<code>:UserShape</code> shape, triggered validation of 
<code>:OurCompany</code> with shape 
<code>:Company</code>. 
This process can be problematic if there are some cyclic dependencies between shapes. </p><p><a id="hevea_default667"></a>
<a id="hevea_default668"></a>
<a id="hevea_default669"></a>
<a id="hevea_default670"></a>
<a id="hevea_default671"></a>
We will see other predicates that implicitly introduce shape references like the 
logical predicates 
<code>sh:and</code>, 
<code>sh:or</code>, 
<code>sh:not</code>, and 
<code>sh:xone</code> (see Section <a href="#ch050logicalConstraints">5.11</a>) 
and the qualified value shapes (see Section <a href="#ch050QualifiedValueShapes">5.12.2</a>).</p><div class="example"><div class="theorem"><span class="c013">Example 137</span>  <em>Simple cyclic data</em><p><em>Shape </em><em>
</em><code><em>:User</em></code><em> represents nodes that have one </em><em>
</em><code><em>schema:name</em></code><em> with </em><em>
</em><code><em>xsd:string</em></code><em> value, 
an optional </em><em>
</em><code><em>schema:birthDate</em></code><em> with value </em><em>
</em><code><em>xsd:date</em></code><em> and 
zero or more values of </em><em>
</em><code><em>schema:knows</em></code><em> that conform to </em><em>
</em><code><em>:User</em></code><em>. </em></p><blockquote class="figure"><div class="center"><hr class="c021"></div><em> 
</em><div class="center"><em>
<img src="CyclicModelSimple.png">
</em></div><em>

</em><a id="ch050.CylicModelSimple"></a><em>
</em><div class="caption"><table class="c002 cellpading0"><tr><td class="c018"><em>Figure 5.2: Example of cyclic model.</em></td></tr>
</table></div><em>
</em><div class="center"><hr class="c021"></div></blockquote><p><em>Given the following data, </em><em>
</em><code><em>:alice</em></code><em> and </em><em>
</em><code><em>:bob</em></code><em> conform to </em><em>
</em><code><em>:User</em></code><em> while </em><em>
</em><code><em>:carol</em></code><em> and </em><em>
</em><code><em>:dave</em></code><em> do not conform. </em><em>
</em><code><em>:dave</em></code><em> fails because the value of </em><em>
</em><code><em>schema:name</em></code><em> is not a </em><em>
</em><code><em>xsd:string</em></code><em> and </em><em>
</em><code><em>:carol</em></code><em> fails because the value of </em><em>
</em><code><em>schema:knows</em></code><em> does not conform to </em><em>
</em><code><em>:User</em></code><em>.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:alice</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:name</span></em><em><span class="c011">      </span></em><em><span class="c011"><em><span class="c011">"Alice"</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:birthDate</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"1995-06-03"</span></em></span></em><em><span class="c011">^^</span></em><em><span class="c011">xsd:date</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">           </span></em><em><span class="c011">schema:knows</span></em><em><span class="c011">     </span></em><em><span class="c011">:bob</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:bob</span></em><em><span class="c011">   </span></em><em><span class="c011">schema:name</span></em><em><span class="c011">      </span></em><em><span class="c011"><em><span class="c011">"Robert"</span></em></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:carol</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:name</span></em><em><span class="c011">      </span></em><em><span class="c011"><em><span class="c011">"Carol"</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:knows</span></em><em><span class="c011">     </span></em><em><span class="c011">:dave</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:dave</span></em><em><span class="c011">  </span></em><em><span class="c011">schema:name</span></em><em><span class="c011">      23 .</span></em></td></tr>
</table><p><em>A direct representation of the cyclic model in SHACL could be the following:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011"><span class="c009">:User</span></span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011"> ;          </span></em><span class="c011"><em><span class="c011"># \color{red}{Undefined shapes graph} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [                  </span></em><span class="c011"><em><span class="c011"># \color{red}{because :User refers to itself} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011"> </span></em><em><span class="c011">xsd:string</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:maxCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ];</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:birthDate</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011"> </span></em><em><span class="c011">xsd:date</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:maxCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ];</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">    </span></em><em><span class="c011">schema:knows</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:node</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c009">:User</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ].</span></em></td></tr>
</table><p><em>The behavior of a SHACl processor with </em><em>
</em><code><em>:User</em></code><em> shape is undefined because it is recursive: 
</em><em>
</em><code><em>:User</em></code><em> is defined in terms of itself.
Validation with recursive shapes is undefined and it is left to processor implementations. 
Some processors may support it while others may produce an error.</em></p></div></div><p>Sometimes recursion appears indirectly when one shape refers to other shapes that refer to others, 
and eventually, one of the shapes refers to the first one. </p><div class="example"><div class="theorem"><span class="c013">Example 138</span>  <em>Cyclic data model with two shapes</em><p><em>Figure </em><a href="#ch050.RecursiveShapesDataModel"><em>138</em></a><em> contains a simple cyclic data model. </em></p><blockquote class="figure"><div class="center"><hr class="c021"></div><em> 
</em><div class="center"><em>
<img src="RecursiveShapesSHACL.png">
</em></div><em>

</em><a id="ch050.RecursiveShapesDataModel"></a><em>
</em><div class="caption"><table class="c002 cellpading0"><tr><td class="c018"><em>Figure 5.3: Example of cyclic model with two shapes.</em></td></tr>
</table></div><em>
</em><div class="center"><hr class="c021"></div></blockquote><p><em>A direct representation of the data model could be the following SHACL shapes graph:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011"><span class="c009">:User</span></span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011"> ; </span></em><span class="c011"><em><span class="c011"># \color{red}{Undefined shapes graph because :User and :Company} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [         </span></em><span class="c011"><em><span class="c011"># \color{red}{refer to each other recursively} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011"> </span></em><em><span class="c011">xsd:string</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:maxCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ];</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:path</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:worksFor</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:node</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c009">:Company</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ] .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c009">:Company</span></span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:legalName</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:maxCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011"> </span></em><em><span class="c011">xsd:string</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:employee</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:node</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c009">:User</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ]  .</span></em></td></tr>
</table><p><em>The previous shapes are mutually recursive and again, the behavior of SHACL processors is undefined.</em></p></div></div>
<h5 class="paragraph" id="sec159">Avoiding recursion using target declarations</h5>
<p>Target declarations can be used to avoid recursion by directly selecting which nodes we want to validate.</p><div class="example"><div class="theorem"><span class="c013">Example 139</span>  <em>Simulating recursion with targetClass</em><p><em>We can require that every node has a discriminating </em><em>
</em><code><em>rdf:type</em></code><em> declaration and replace </em><em>
</em><code><em>sh:node</em></code><em> 
by </em><em>
</em><code><em>sh:class</em></code><em>, i.e., we declare that the values of </em><em>
</em><code><em>schema:knows</em></code><em> are instances of </em><em>
</em><code><em>:User</em></code><em>. </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:User</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c009">sh:targetClass</span></span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011"> </span></em><em><span class="c011">xsd:string</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:maxCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ];</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:birthDate</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011"> </span></em><em><span class="c011">xsd:date</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:maxCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ];</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">  </span></em><em><span class="c011">schema:knows</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:class</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ].</span></em></td></tr>
</table><p><em>Given the following data:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:alice</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011">                </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;             </span></em><span class="c011"><em><span class="c011">#\Passes{:User} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011">      </span></em><em><span class="c011"><em><span class="c011">"Alice"</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:birthDate</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"1995-06-03"</span></em></span></em><em><span class="c011">^^</span></em><em><span class="c011">xsd:date</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">           </span></em><em><span class="c011">schema:knows</span></em><em><span class="c011">     </span></em><em><span class="c011">:bob</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:bob</span></em><em><span class="c011">   </span></em><em><span class="c011">a</span></em><em><span class="c011">                </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;             </span></em><span class="c011"><em><span class="c011">#\Passes{:User} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011">      </span></em><em><span class="c011"><em><span class="c011">"Robert"</span></em></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:carol</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011">                </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;             </span></em><span class="c011"><em><span class="c011">#\Passes{:User} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011">      </span></em><em><span class="c011"><em><span class="c011">"Carol"</span></em></span></em><em><span class="c011"> ;           </span></em><span class="c011"><em><span class="c011"># Is it ok to pass? *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:knows</span></em><em><span class="c011">     </span></em><em><span class="c011">:dave</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:dave</span></em><em><span class="c011">  </span></em><em><span class="c011">a</span></em><em><span class="c011">                </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;             </span></em><span class="c011"><em><span class="c011">#\Fails{:User} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011">      23 .                </span></em><span class="c011"><em><span class="c011"># wrong value of schema:name *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:emily</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011">                </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;             </span></em><span class="c011"><em><span class="c011">#\Fails{:User} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011">      </span></em><em><span class="c011"><em><span class="c011">"Emily"</span></em></span></em><em><span class="c011"> ;           </span></em><span class="c011"><em><span class="c011"># wrong value of schema:knows*) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:knows</span></em><em><span class="c011">     </span></em><em><span class="c011">:frank</span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>A SHACL processor returns the following. </em></p><ul class="itemize"><li class="li-itemize"><em>It validates that </em><em>
</em><code><em>:alice</em></code><em> and </em><em>
</em><code><em>:bob</em></code><em> conform to </em><em>
</em><code><em>:User</em></code><em>.</em></li><li class="li-itemize"><em>It returns a violation for </em><em>
</em><code><em>:dave</em></code><em> because the value of </em><em>
</em><code><em>schema:name</em></code><em> is not a </em><em>
</em><code><em>xsd:string</em></code><em>. </em></li><li class="li-itemize"><em>It also returns a violation for </em><em>
</em><code><em>:emily</em></code><em> because the value of </em><em>
</em><code><em>schema:knows</em></code><em> is not an instance of </em><em>
</em><code><em>:User</em></code><em>.</em></li><li class="li-itemize"><em>It does not return a violation for </em><em>
</em><code><em>:carol</em></code><em> because our only requirement is that the value of </em><em>
</em><code><em>schema:knows</em></code><em> is an instance of </em><em>
</em><code><em>:User</em></code><em> and </em><em>
</em><code><em>:dave</em></code><em> is declared to be an instance of </em><em>
</em><code><em>:User</em></code><em> (although it does not validate).</em></li></ul></div></div><p>This approach has the advantage that it not only finds instances of class 
<code>:User</code>, 
but also instances of subclasses of 
<code>:User</code>. For example, if we declare:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:grace</span><span class="c011"> </span><span class="c011">a</span><span class="c011"> </span><span class="c011">:Teacher</span><span class="c011"> ;               </span><span class="c011"><em><span class="c011">#\Passes{:User} *)</span></em></span><span class="c011">
</span><span class="c011">       </span><span class="c011">schema:name</span><span class="c011"> </span><span class="c011"><span class="c011">"Grace"</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">       </span><span class="c011">schema:knows</span><span class="c011"> </span><span class="c011">:heidi</span><span class="c011"> .</span><span class="c011">
</span><span class="c011">
</span><span class="c011">:heidi</span><span class="c011"> </span><span class="c011">a</span><span class="c011"> </span><span class="c011">:Student</span><span class="c011"> ;               </span><span class="c011"><em><span class="c011">#\Passes{:User} *)</span></em></span><span class="c011">
</span><span class="c011">       </span><span class="c011">schema:name</span><span class="c011"> </span><span class="c011"><span class="c011">"Heidi"</span></span><span class="c011"> .</span><span class="c011">
</span><span class="c011">
</span><span class="c011">:Student</span><span class="c011"> </span><span class="c011">rdfs:subClassOf</span><span class="c011"> </span><span class="c011">:User</span><span class="c011"> .</span><span class="c011">
</span><span class="c011">:Teacher</span><span class="c011"> </span><span class="c011">rdfs:subClassOf</span><span class="c011"> </span><span class="c011">:User</span><span class="c011"> .</span></td></tr>
</table><p>The system would check that both 
<code>:grace</code> and 
<code>:heidi</code> conform to the 
<code>:User</code> shape.</p><p>Being able to validate future subclasses of a given class may be helpful if there are some unexpected changes in the hierarchy. 
Nevertheless, it also has the problem of requiring a discriminating 
<code>rdf:type</code> declaration for every instance 
which may not always be possible. </p><p>Another possibility is to use other target declarations such as 
<code>sh:targetSubjectsOf</code> or 
<code>sh:targetObjectsOf</code>.</p><div class="example"><div class="theorem"><span class="c013">Example 140</span>  <em>Simulating indirect recursion with target declarations</em><p><em>In order to simulate the model from Figure </em><a href="#ch050.RecursiveShapesDataModel"><em>138</em></a><em> we can declare that the subjects of </em><em>
</em><code><em>schema:worksFor</em></code><em> conform to </em><em>
</em><code><em>:User</em></code><em> and the objects to </em><em>
</em><code><em>:Company</em></code><em>; 
and the opposite for </em><em>
</em><code><em>schema:employee</em></code><em>. </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:User</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c009">sh:targetSubjectsOf</span></span></em><em><span class="c011"> </span></em><em><span class="c011">schema:worksFor</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:targetObjectsOf</span></em><em><span class="c011">  </span></em><em><span class="c011">schema:employee</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011"> </span></em><em><span class="c011">xsd:string</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:maxCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ]</span></em><em><span class="c011">
</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:Company</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c009">sh:targetSubjectsOf</span></span></em><em><span class="c011"> </span></em><em><span class="c011">schema:employee</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:targetObjectsOf</span></em><em><span class="c011">  </span></em><em><span class="c011">schema:worksFor</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:legalName</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011"> </span></em><em><span class="c011">xsd:string</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:maxCount</span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:path</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:employee</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ] .</span></em></td></tr>
</table><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:alice</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Alice"</span></em></span></em><em><span class="c011"> ;         </span></em><span class="c011"><em><span class="c011">#\Passes{:User} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:worksFor</span></em><em><span class="c011"> </span></em><em><span class="c011">:OneCompany</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:bob</span></em><em><span class="c011">   </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Robert"</span></em></span></em><em><span class="c011"> ;        </span></em><span class="c011"><em><span class="c011">#\Passes{:User} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:worksFor</span></em><em><span class="c011"> </span></em><em><span class="c011">:OneCompany</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:carol</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> 34 ;              </span></em><span class="c011"><em><span class="c011">#\Fails{:User} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:worksFor</span></em><em><span class="c011"> </span></em><em><span class="c011">:Something</span></em><em><span class="c011"> .  </span></em><span class="c011"><em><span class="c011"># Wrong datatype for schema:name *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:OneCompany</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:legalName</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"One"</span></em></span></em><em><span class="c011"> ; </span></em><span class="c011"><em><span class="c011">#\Passes{:Company} *)  </span></em></span><em><span class="c011">
</span></em><em><span class="c011">            </span></em><em><span class="c011">schema:employee</span></em><em><span class="c011">  </span></em><em><span class="c011">:alice,</span></em><em><span class="c011">
</span></em><em><span class="c011">                             </span></em><em><span class="c011">:bob,</span></em><em><span class="c011">
</span></em><em><span class="c011">                             </span></em><em><span class="c011">:carol</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:Something</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:Company</span></em><em><span class="c011"> ;              </span></em><span class="c011"><em><span class="c011">#\Fails{:Company} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">           </span></em><em><span class="c011">schema:legalName</span></em><em><span class="c011"> 0 .      </span></em><span class="c011"><em><span class="c011"># Wrong datatype for schema:name *)</span></em></span></td></tr>
</table></div></div>
<h5 class="paragraph" id="sec160">Simulating recursion with property paths</h5>
<p> 
<a id="ch050RecursionPropertyPaths"></a></p><p><a id="hevea_default672"></a>
<a id="hevea_default673"></a>
<a id="hevea_default674"></a>
SHACL property paths can be used to simulate recursion in some cases. 
The idea is combining 
<code>sh:zeroOrMorePath</code> with an auxiliary shape that defines the structure of the expected shape without recursion.
The recursion is implicitly defined by the property path.</p><div class="example"><div class="theorem"><span class="c013">Example 141</span>  <em>Simulating recursion with property paths</em><p><em>Example </em><a href="#ch050.CylicModelSimple"><em>137</em></a><em> can be defined without recursion as:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:User</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:path</span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c009">sh:zeroOrMorePath</span></span></em><em><span class="c011"> </span></em><em><span class="c011">schema:knows</span></em><em><span class="c011"> ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:node</span></em><em><span class="c011"> </span></em><em><span class="c011">:UserStructure</span></em><em><span class="c011">
</span></em><em><span class="c011"> ] .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:UserStructure</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011"> </span></em><em><span class="c011">xsd:string</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:maxCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:birthDate</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011"> </span></em><em><span class="c011">xsd:date</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:maxCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ]</span></em><em><span class="c011">
</span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>Where </em><em>
</em><code><em>:UserStructure</em></code><em> is a non-recursive auxiliary shape that defines the structure of nodes conforming to </em><em>
</em><code><em>:User</em></code><em>.
Figure </em><a href="#ch050.FigureRecursionSimpleModelPropertyPaths"><em>141</em></a><em> depicts the new model. </em></p><blockquote class="figure"><div class="center"><hr class="c021"></div><em> 
</em><div class="center"><em>
<img src="CyclicModelPropertyPaths.png">
</em></div><em>

</em><a id="ch050.FigureRecursionSimpleModelPropertyPaths"></a><em>
</em><div class="caption"><table class="c002 cellpading0"><tr><td class="c018"><em>Figure 5.4: Simulating cyclic model with property paths.</em></td></tr>
</table></div><em>
</em><div class="center"><hr class="c021"></div></blockquote><p><em>Given the following data:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:alice</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:name</span></em><em><span class="c011">      </span></em><em><span class="c011"><em><span class="c011">"Alice"</span></em></span></em><em><span class="c011"> ;           </span></em><span class="c011"><em><span class="c011">#\Passes{:User} *)       </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:birthDate</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"1995-06-03"</span></em></span></em><em><span class="c011">^^</span></em><em><span class="c011">xsd:date</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">           </span></em><em><span class="c011">schema:knows</span></em><em><span class="c011">     </span></em><em><span class="c011">:bob</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:bob</span></em><em><span class="c011">   </span></em><em><span class="c011">schema:name</span></em><em><span class="c011">      </span></em><em><span class="c011"><em><span class="c011">"Robert"</span></em></span></em><em><span class="c011"> .          </span></em><span class="c011"><em><span class="c011">#\Passes{:User} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:carol</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:name</span></em><em><span class="c011">      </span></em><em><span class="c011"><em><span class="c011">"Carol"</span></em></span></em><em><span class="c011"> ;           </span></em><span class="c011"><em><span class="c011">#\Fails{:User} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:knows</span></em><em><span class="c011">     </span></em><em><span class="c011">:dave</span></em><em><span class="c011"> .             </span></em><span class="c011"><em><span class="c011"># wrong value of schema:knows*) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:dave</span></em><em><span class="c011">  </span></em><em><span class="c011">schema:name</span></em><em><span class="c011">      23 .                </span></em><span class="c011"><em><span class="c011">#\Fails{:User} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">                                            </span></em><span class="c011"><em><span class="c011"># wrong value of schema:name *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:emily</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:name</span></em><em><span class="c011">      </span></em><em><span class="c011"><em><span class="c011">"Emily"</span></em></span></em><em><span class="c011"> ;           </span></em><span class="c011"><em><span class="c011">#\Fails{:User} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:knows</span></em><em><span class="c011">     </span></em><em><span class="c011">:frank</span></em><em><span class="c011"> .            </span></em><span class="c011"><em><span class="c011"># wrong value of schema:knows*) </span></em></span></td></tr>
</table><p><em>A SHACL processor returns the following. </em></p><ul class="itemize"><li class="li-itemize"><em>It checks that </em><em>
</em><code><em>:alice</em></code><em> and </em><em>
</em><code><em>:bob</em></code><em> conform to </em><em>
</em><code><em>:User</em></code><em>.</em></li><li class="li-itemize"><em>It returns violation errors for </em><em>
</em><code><em>:carol</em></code><em>, </em><em>
</em><code><em>:dave</em></code><em> and </em><em>
</em><code><em>:emily</em></code><em>. 
In this case, </em><em>
</em><code><em>:carol</em></code><em> fails to validate as expected.
</em></li></ul></div></div><p>Indirect recursion more tricky to simulate as it is difficult to determine the property path that can be used. </p><p><a id="hevea_default675"></a>
<a id="hevea_default676"></a>
</p><div class="example"><div class="theorem"><span class="c013">Example 142</span>  <em>Indirect recursion with property paths</em><p><em>Example </em><a href="#ch050.RecursiveShapesDataModel"><em>138</em></a><em> can also be simulated using a similar pattern. 
In this case, we use two non-recursive auxiliary shapes </em><em>
</em><code><em>:UserStructure</em></code><em> and </em><em>
</em><code><em>:CompanyStructure</em></code><em> 
that contain the plain properties. 
Shapes </em><em>
</em><code><em>:User</em></code><em> and </em><em>
</em><code><em>:Company</em></code><em> refer to them and capture recursion with property paths. 
The dependency from </em><em>
</em><code><em>:User</em></code><em> to </em><em>
</em><code><em>:Company</em></code><em> and back to </em><em>
</em><code><em>:User</em></code><em> is captured by 
the property path </em><em>
</em><code><em>(</em></code><code><em>schema:worksFor</em></code><code><em>/</em></code><code><em>schema:employee</em></code><code><em>)*</em></code><em> and similarly the other way around.</em></p><blockquote class="figure"><div class="center"><hr class="c021"></div><em> 
</em><div class="center"><em>
<img src="CyclicModelMutualPropertyPaths.png">
</em></div><em>

</em><a id="ch050.FigureMutualRecursionPropertyPaths"></a><em>
</em><div class="caption"><table class="c002 cellpading0"><tr><td class="c018"><em>Figure 5.5: Simulating indirect recursion with property paths.</em></td></tr>
</table></div><em>
</em><div class="center"><hr class="c021"></div></blockquote><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:User</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:path</span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c009">sh:zeroOrMorePath</span></span></em><em><span class="c011"> (</span></em><em><span class="c011">schema:worksFor</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:employee</span></em><em><span class="c011">) ];</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:node</span></em><em><span class="c011"> </span></em><em><span class="c011">:UserStructure</span></em><em><span class="c011">
</span></em><em><span class="c011"> ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:path</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:worksFor</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:node</span></em><em><span class="c011"> </span></em><em><span class="c011">:CompanyStructure</span></em><em><span class="c011">
</span></em><em><span class="c011"> ]  .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:UserStructure</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:path</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011"> </span></em><em><span class="c011">xsd:string</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1; </span></em><em><span class="c011">sh:maxCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ]</span></em><em><span class="c011">
</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:Company</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:path</span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c009">sh:zeroOrMorePath</span></span></em><em><span class="c011"> (</span></em><em><span class="c011">schema:employee</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:worksFor</span></em><em><span class="c011">) ];</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:node</span></em><em><span class="c011"> </span></em><em><span class="c011">:CompanyStructure</span></em><em><span class="c011">
</span></em><em><span class="c011"> ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:path</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:employee</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:node</span></em><em><span class="c011"> </span></em><em><span class="c011">:UserStructure</span></em><em><span class="c011">
</span></em><em><span class="c011"> ] .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:CompanyStructure</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:path</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:legalName</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011"> </span></em><em><span class="c011">xsd:string</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1; </span></em><em><span class="c011">sh:maxCount</span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011"> ] .</span></em></td></tr>
</table></div></div><p>The previous solution does not scale well for more involved data models were cycles can appear by different means. 
As an exercise, the reader can try to simulate the cyclic data model depicted in 
Figure <a href="bookHtml011.html#ch040.CyclicModelExercise">67</a> 
or the WebIndex data model from Figure <a href="bookHtml013.html#SimplifiedModel">6.1</a>.</p><p><a id="hevea_default677"></a>
</p>
<h3 class="subsection" id="sec161">5.12.2  Qualified Value Shapes</h3>
<p> 
<a id="ch050QualifiedValueShapes"></a>
<a id="ch5.sec12.3"></a></p><p><a id="hevea_default678"></a>
<a id="hevea_default679"></a>
<a id="hevea_default680"></a>
Qualified value shapes declare that a specified number of nodes conform to some shape. 
The shape is declared by the 
<code>sh:qualifiedValueShape</code> parameter and 
the parameters 
<code>sh:qualifiedMinCount</code> and 
<code>sh:qualifiedMaxCount</code> declare the minimum and maximum number of values of that shape.</p><p>A typical use case for qualified value shapes is to model repeated properties whose values must conform to different shapes. 
For example, a data model may contain the property 
<code>sh:parent</code> to represent the biological parent of a person and may want to define that one of the values is male and the other is female.</p><div class="example"><div class="theorem"><span class="c013">Example 143</span>  <em>Qualified value shapes example</em><em> </em><a id="ch050QualifiedValueShapesExample"></a><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:UserShape</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:targetClass</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">                </span></em><em><span class="c011">schema:parent</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c009">sh:qualifiedValueShape</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">:isMale</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011">sh:hasValue</span></em><em><span class="c011"> </span></em><em><span class="c011">true</span></em><em><span class="c011">
</span></em><em><span class="c011">     ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:qualifiedMinCount</span></em><em><span class="c011">   1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:qualifiedMaxCount</span></em><em><span class="c011">   1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ];</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">                </span></em><em><span class="c011">schema:parent</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c009">sh:qualifiedValueShape</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">:isFemale</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011">sh:hasValue</span></em><em><span class="c011"> </span></em><em><span class="c011">true</span></em><em><span class="c011">
</span></em><em><span class="c011">     ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:qualifiedMinCount</span></em><em><span class="c011">   1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:qualifiedMaxCount</span></em><em><span class="c011">   1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ].</span></em></td></tr>
</table><p><em>Given the following example:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:alice</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011">             </span></em><em><span class="c011">:User</span></em><em><span class="c011">;              </span></em><span class="c011"><em><span class="c011">#\Passes{:UserShape} *)   </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:parent</span></em><em><span class="c011"> </span></em><em><span class="c011">:bob,</span></em><em><span class="c011"> </span></em><em><span class="c011">:carol</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:bob</span></em><em><span class="c011">   </span></em><em><span class="c011">a</span></em><em><span class="c011">             </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;             </span></em><span class="c011"><em><span class="c011">#\Passes{:UserShape} *)   </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">:isMale</span></em><em><span class="c011">       </span></em><em><span class="c011">true</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:parent</span></em><em><span class="c011"> [ </span></em><em><span class="c011">:isMale</span></em><em><span class="c011"> </span></em><em><span class="c011">true</span></em><em><span class="c011"> ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:parent</span></em><em><span class="c011"> [ </span></em><em><span class="c011">:isFemale</span></em><em><span class="c011"> </span></em><em><span class="c011">true</span></em><em><span class="c011"> ] .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:carol</span></em><em><span class="c011"> </span></em><em><span class="c011">:isFemale</span></em><em><span class="c011">     </span></em><em><span class="c011">true</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:dave</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011">             </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;              </span></em><span class="c011"><em><span class="c011">#\Fails{:UserShape} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011">schema:parent</span></em><em><span class="c011"> </span></em><em><span class="c011">:emily,</span></em><em><span class="c011"> </span></em><em><span class="c011">:frank</span></em><em><span class="c011"> .     </span></em><span class="c011"><em><span class="c011"># :emily does not have :isMale true *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:emily</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011">            </span></em><em><span class="c011">:User</span></em><em><span class="c011"> .              </span></em><span class="c011"><em><span class="c011">#\Fails{:UserShape} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:frank</span></em><em><span class="c011"> </span></em><em><span class="c011">:isFemale</span></em><em><span class="c011">    </span></em><em><span class="c011">true</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:gordon</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011">             </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;            </span></em><span class="c011"><em><span class="c011">#\Passes{:UserShape} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">        </span></em><em><span class="c011">schema:parent</span></em><em><span class="c011"> [ </span></em><em><span class="c011">:isMale</span></em><em><span class="c011"> </span></em><em><span class="c011">true</span></em><em><span class="c011">] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">        </span></em><em><span class="c011">schema:parent</span></em><em><span class="c011"> [ </span></em><em><span class="c011">:isFemale</span></em><em><span class="c011"> </span></em><em><span class="c011">true</span></em><em><span class="c011">] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">        </span></em><em><span class="c011">schema:parent</span></em><em><span class="c011"> </span></em><em><span class="c011">:heidi</span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>A SHACL processor checks that </em><em>
</em><code><em>:alice</em></code><em>, </em><em>
</em><code><em>:bob</em></code><em>, and </em><em>
</em><code><em>:gordon</em></code><em> conform to </em><em>
</em><code><em>:UserShape</em></code><em> but returns the following errors. </em></p><ul class="itemize"><li class="li-itemize"><em>
</em><code><em>:dave</em></code><em> does not conform to </em><em>
</em><code><em>:UserShape</em></code><em> because the number of values that satisfy the qualified value shape that 
checks that a parent is male is 0.</em></li><li class="li-itemize"><em>
</em><code><em>:emily</em></code><em> does not conform to </em><em>
</em><code><em>:UserShape</em></code><em> because the number of values that satisfy the qualified value shapes that 
checks that a parent is male and the other is female is 0.</em></li></ul><p><em>
</em><code><em>:gordon</em></code><em> conforms to </em><em>
</em><code><em>:UserShape</em></code><em> but has three parents.
If we want to further constraint that the number of biological parents must be exactly two, we can add:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:UserShape</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:parent</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 2 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:maxCount</span></em><em><span class="c011"> 2</span></em><em><span class="c011">
</span></em><em><span class="c011"> ].</span></em></td></tr>
</table></div></div><p>In the shapes graph of example <a href="#ch050QualifiedValueShapesExample">143</a>, there is no constraint the declares that the biological parents must not be male or female at the same time. Using the following data:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:oscar</span><span class="c011"> </span><span class="c011">a</span><span class="c011">             </span><span class="c011">:User</span><span class="c011"> ;           </span><span class="c011"><em><span class="c011">#\Passes{:UserShape} *)</span></em></span><span class="c011">
</span><span class="c011">       </span><span class="c011">schema:parent</span><span class="c011"> </span><span class="c011">:x</span><span class="c011"> .</span><span class="c011">
</span><span class="c011">
</span><span class="c011">:x</span><span class="c011"> </span><span class="c011">:isMale</span><span class="c011">   </span><span class="c011">true</span><span class="c011">;</span><span class="c011">
</span><span class="c011">   </span><span class="c011">:isFemale</span><span class="c011"> </span><span class="c011">true</span><span class="c011"> .</span></td></tr>
</table><p>Node 
<code>:oscar</code> conforms to 
<code>:UserShape</code> which seems counter intuitive as it has a single parent that satisfies both being female and male at the same time. 
There are two solutions, 
the first one is to add the previous declaration that 
<code>sh:minCount</code><code> 2</code> and 
<code>sh:maxCount</code><code> 2</code> for property 
<code>schema:parent</code>. In this way, 
<code>:oscar</code> would not conform because it has only one parent. 
Another solution is to declare that the qualified value shapes are disjoint as follows.</p><p><a id="hevea_default681"></a>
<a id="hevea_default682"></a>
Qualified value shapes contain a Boolean optional parameter 
<code>sh:qualifiedValueShapesDisjoint</code>. 
It it is true, then the value nodes must not conform to any of the sibling shapes.
The default value is false.</p><p>Using this parameter, we could add the constraint that nodes that satisfy the female constraint are disjoint from nodes that satisfy the male constraint in the case of biological parents.<sup><a id="text37" href="#note37">24</a></sup></p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:UserShape</span><span class="c011"> </span><span class="c011">a</span><span class="c011"> </span><span class="c011">sh:NodeShape</span><span class="c011">;</span><span class="c011">
</span><span class="c011">  </span><span class="c011">sh:targetClass</span><span class="c011"> </span><span class="c011">:User</span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011">sh:property</span><span class="c011"> [</span><span class="c011">
</span><span class="c011">   </span><span class="c011">sh:path</span><span class="c011">                         </span><span class="c011">schema:parent</span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">   </span><span class="c011">sh:qualifiedValueShape</span><span class="c011">          [</span><span class="c011">
</span><span class="c011">      </span><span class="c011">sh:path</span><span class="c011">     </span><span class="c011">:isMale</span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">      </span><span class="c011">sh:hasValue</span><span class="c011"> </span><span class="c011">true</span><span class="c011">
</span><span class="c011">    ] ;</span><span class="c011">
</span><span class="c011">   </span><span class="c011">sh:qualifiedMinCount</span><span class="c011">            1 ;</span><span class="c011">
</span><span class="c011">   </span><span class="c011">sh:qualifiedMaxCount</span><span class="c011">            1 ;</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c009">sh:qualifiedValueShapesDisjoint</span></span><span class="c011"> </span><span class="c011">true</span><span class="c011">
</span><span class="c011">  ];</span><span class="c011">
</span><span class="c011">  </span><span class="c011">sh:property</span><span class="c011"> [</span><span class="c011">
</span><span class="c011">   </span><span class="c011">sh:path</span><span class="c011">                         </span><span class="c011">schema:parent</span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">   </span><span class="c011">sh:qualifiedValueShape</span><span class="c011">          [</span><span class="c011">
</span><span class="c011">      </span><span class="c011">sh:path</span><span class="c011">     </span><span class="c011">:isFemale</span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">      </span><span class="c011">sh:hasValue</span><span class="c011"> </span><span class="c011">true</span><span class="c011">
</span><span class="c011">     ] ;</span><span class="c011">
</span><span class="c011">   </span><span class="c011">sh:qualifiedMinCount</span><span class="c011">            1 ;</span><span class="c011">
</span><span class="c011">   </span><span class="c011">sh:qualifiedMaxCount</span><span class="c011">            1 ;</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c009">sh:qualifiedValueShapesDisjoint</span></span><span class="c011"> </span><span class="c011">true</span><span class="c011">
</span><span class="c011">  ].</span></td></tr>
</table><p><a id="hevea_default683"></a>
</p>
<h2 class="section" id="sec162">5.13  Closed Shapes</h2>
<p> 
<a id="ch050Closed"></a>
<a id="ch5.sec13"></a></p><p><a id="hevea_default684"></a>

<code>sh:closed</code> can be used to specify the condition that nodes do not have triples with properties different 
than the ones that have been explicitly enumerated as a value of 
<code>sh:path</code> in any of the property shapes.</p><p>The value of 
<code>sh:closed</code> is a Boolean that only has effect if it is true (it is assumed to be false if not specified).</p><p><a id="hevea_default685"></a>
The parameter 
<code>sh:ignoredProperties</code> specifies a list of properties that are also permitted in addition to those 
enumerated by the value of 
<code>sh:path</code> in property shapes.</p><blockquote class="table"><div class="center"><hr class="c021"></div>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Table 5.9: Closed shapes</td></tr>
</table></div>
<a id="ch050ClosedShapesParameters"></a> 
<div class="center">
<table class="c000 cellpadding1" border=1><tr><td class="c017"> Parameter</td><td class="c019">Description 
</td></tr>
<tr><td class="c017"> 
<code>sh:closed</code></td><td class="c019">Valid resources must only have values for properties that appear as values of 
<code>sh:path</code> in property shapes. 
</td></tr>
<tr><td class="c017"> 
<code>sh:ignoredProperties</code></td><td class="c019">List of predicates that are also permitted in addition to those that are explicitly enumerated
</td></tr>
</table>
</div>
<div class="center"><hr class="c021"></div></blockquote><div class="example"><div class="theorem"><span class="c013">Example 144</span>  <em>Closed shapes</em><p><em>The following example declares that nodes conforming to </em><em>
</em><code><em>:UserShape</em></code><em> have only one property </em><em>
</em><code><em>schema:name</em></code><em>, zero or more properties </em><em>
</em><code><em>schema:knows</em></code><em> and are allowed to have extra values for property </em><em>
</em><code><em>rdf:type</em></code><em>.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:UserShape</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:targetClass</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c009">sh:closed</span></span></em><em><span class="c011"> </span></em><em><span class="c011">true</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:ignoredProperties</span></em><em><span class="c011"> ( </span></em><em><span class="c011">rdf:type</span></em><em><span class="c011"> );</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:maxCount</span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011"> </span></em><em><span class="c011">xsd:string</span></em><em><span class="c011">
</span></em><em><span class="c011"> ].</span></em></td></tr>
</table><p><em>Given the following data:
	
</em><em>

</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:alice</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011">           </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;      </span></em><span class="c011"><em><span class="c011">#\Pass{:UserShape} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Alice"</span></em></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:bob</span></em><em><span class="c011">   </span></em><em><span class="c011">a</span></em><em><span class="c011">           </span></em><em><span class="c011">:User,</span></em><em><span class="c011">       </span></em><span class="c011"><em><span class="c011">#\Pass{:UserShape} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">                   </span></em><em><span class="c011">:Person</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Robert"</span></em></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:carol</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011">               </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;  </span></em><span class="c011"><em><span class="c011">#\Fails{:UserShape} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011">     </span></em><em><span class="c011"><em><span class="c011">"Carol"</span></em></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:cookTime</span></em><em><span class="c011"> 23 .</span></em></td></tr>
</table><p><em>A SHACL processor will check that both </em><em>
</em><code><em>:alice</em></code><em> and </em><em>
</em><code><em>:bob</em></code><em> conform to </em><em>
</em><code><em>:UserShape</em></code><em> but will return the error:</em></p><ul class="itemize"><li class="li-itemize"><em>
</em><code><em>:carol</em></code><em> does not conform to </em><em>
</em><code><em>:UserShape</em></code><em> because it has an extra property </em><em>
</em><code><em>schema:cookTime</em></code><em> which is not allowed.
</em></li></ul></div></div><p><a id="hevea_default686"></a>
<a id="hevea_default687"></a>
<a id="hevea_default688"></a>
<a id="hevea_default689"></a>
<a id="hevea_default690"></a>
<a id="hevea_default691"></a>
<a id="hevea_default692"></a>
<a id="hevea_default693"></a></p><p>Note that 
<code>sh:closed</code> does not take into account SHACL property paths or constraints with 
<code>sh:node</code>, 
<code>sh:and</code>, 
<code>sh:or</code> , etc.</p><div class="example"><div class="theorem"><span class="c013">Example 145</span>  <em>Closed only accounts for top-level predicates</em><p><em>The following shape does not allow any property except from </em><em>
</em><code><em>rdf:type</em></code><em> and </em><em>
</em><code><em>schema:name</em></code><em>. </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:UserShape</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:targetClass</span></em><em><span class="c011">       </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c009">sh:closed</span></span></em><em><span class="c011">            </span></em><em><span class="c011">true</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:ignoredProperties</span></em><em><span class="c011"> ( </span></em><em><span class="c011">rdf:type</span></em><em><span class="c011"> );</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011"> </span></em><em><span class="c011">xsd:string</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">   ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     [</span></em><em><span class="c011">sh:zeroOrOnePath</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:knows</span></em><em><span class="c011">] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:nodeKind</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:IRI</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">   ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:node</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">          </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">            </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:worksFor</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">            </span></em><em><span class="c011">sh:nodeKind</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:IRI</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] ] .</span></em></td></tr>
</table><p><em>Given the following data:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:alice</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;                  </span></em><span class="c011"><em><span class="c011">#\Passes{:User} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011">     </span></em><em><span class="c011"><em><span class="c011">"Alice"</span></em></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:bob</span></em><em><span class="c011">   </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;                  </span></em><span class="c011"><em><span class="c011">#\Fails{:User} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011">     </span></em><em><span class="c011"><em><span class="c011">"Robert"</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:knows</span></em><em><span class="c011">   </span></em><em><span class="c011">:carol</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:carol</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;                  </span></em><span class="c011"><em><span class="c011">#\Fails{:User} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011">     </span></em><em><span class="c011"><em><span class="c011">"Carol"</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:worksFor</span></em><em><span class="c011"> </span></em><em><span class="c011">:myCompany</span></em><em><span class="c011">.</span></em></td></tr>
</table><p><em>A SHACL processor:</em></p><ul class="itemize"><li class="li-itemize"><em>Checks that </em><em>
</em><code><em>:alice</em></code><em> conforms to </em><em>
</em><code><em>:User</em></code><em>.</em></li><li class="li-itemize"><em>Fails for nodes </em><em>
</em><code><em>:bob</em></code><em> and </em><em>
</em><code><em>:carol</em></code><em> because they use properties </em><em>
</em><code><em>schema:knows</em></code><em> and </em><em>
</em><code><em>schema:worksFor</em></code><em> in a closed shape.</em></li></ul><p><em>A solution is to add those predicates to the list of ignored properties:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:UserShape</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:targetClass</span></em><em><span class="c011">       </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:closed</span></em><em><span class="c011">            </span></em><em><span class="c011">true</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:ignoredProperties</span></em><em><span class="c011"> ( </span></em><em><span class="c011">rdf:type</span></em><em><span class="c011">
</span></em><em><span class="c011">                         </span></em><em><span class="c011">schema:knows</span></em><em><span class="c011">
</span></em><em><span class="c011">                         </span></em><em><span class="c011">schema:worksFor</span></em><em><span class="c011"> );</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:name</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011"> </span></em><em><span class="c011">xsd:string</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">   ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     [</span></em><em><span class="c011">sh:zeroOrOnePath</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:knows</span></em><em><span class="c011">] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:nodeKind</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:IRI</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">   ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:node</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">          </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">            </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:worksFor</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">            </span></em><em><span class="c011">sh:nodeKind</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:IRI</span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] ] .</span></em></td></tr>
</table><p><em>An advice to use </em><em>
</em><code><em>sh:closed</em></code><em> is to enumerate all relevant properties as direct values of </em><em>
</em><code><em>sh:path</em></code><em>, or add them to the </em><em>
</em><code><em>sh:ignoredProperties</em></code><em> list.</em></p></div></div><p><a id="hevea_default694"></a>
</p>
<h2 class="section" id="sec163">5.14  Property Pair Constraints</h2>
<p> 
<a id="ch050propertyPairConstraints"></a>
<a id="ch5.sec14"></a></p><p>Property pair constraints specify conditions in relation to other properties. 
These constraint components can only be used in property shapes.
Table <a href="#ch050PropertyPairConstraintsParameters">5.10</a> lists the parameters that can be used 
to declare property pair constraints. 
All the predicates have a similar behavior, they 
compare pairs of values of the current and referenced property on the current focus node
and check the condition.</p><p><a id="hevea_default695"></a>
<a id="hevea_default696"></a>
<a id="hevea_default697"></a>
<a id="hevea_default698"></a>
</p><blockquote class="table"><div class="center"><hr class="c021"></div>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Table 5.10: Property pair constraints</td></tr>
</table></div>
<a id="ch050PropertyPairConstraintsParameters"></a> 
<div class="center">
<table class="c000 cellpadding1" border=1><tr><td class="c017"> Operation</td><td class="c019">Description 
</td></tr>
<tr><td class="c017"> 
<code>sh:equals</code></td><td class="c019">The sets of values from both properties at a given focus node must be equal
</td></tr>
<tr><td class="c017"> 
<code>sh:disjoint</code></td><td class="c019">The sets of values from both properties at a given focus node must be different
</td></tr>
<tr><td class="c017"> 
<code>sh:lessThan</code></td><td class="c019">Current values must be smaller than another property values
</td></tr>
<tr><td class="c017"> 
<code>sh:lessThanOrEquals</code></td><td class="c019">Current values must be smaller or equal than another property values
</td></tr>
</table>
</div>
<div class="center"><hr class="c021"></div></blockquote><div class="example"><div class="theorem"><span class="c013">Example 146</span>  <em>Equality constraints example</em><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:UserShape</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:targetClass</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:givenName</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c009">sh:equals</span></span></em><em><span class="c011">   </span></em><em><span class="c011">foaf:firstName</span></em><em><span class="c011">
</span></em><em><span class="c011">];</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:givenName</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:disjoint</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:lastName</span></em><em><span class="c011">
</span></em><em><span class="c011">] .</span></em></td></tr>
</table><p><em>	
</em><em>

</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:alice</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;                  </span></em><span class="c011"><em><span class="c011">#\Passes{:UserShape} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:givenName</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Alice"</span></em></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:lastName</span></em><em><span class="c011">  </span></em><em><span class="c011"><em><span class="c011">"Cooper"</span></em></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">foaf:firstName</span></em><em><span class="c011">   </span></em><em><span class="c011"><em><span class="c011">"Alice"</span></em></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:bob</span></em><em><span class="c011">   </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;                  </span></em><span class="c011"><em><span class="c011">#\Fails{:UserShape} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:givenName</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Bob"</span></em></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:lastName</span></em><em><span class="c011">  </span></em><em><span class="c011"><em><span class="c011">"Smith"</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">foaf:firstName</span></em><em><span class="c011">   </span></em><em><span class="c011"><em><span class="c011">"Robert"</span></em></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:carol</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;                  </span></em><span class="c011"><em><span class="c011">#\Fails{:UserShape} *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:givenName</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Carol"</span></em></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:lastName</span></em><em><span class="c011">  </span></em><em><span class="c011"><em><span class="c011">"Carol"</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">foaf:firstName</span></em><em><span class="c011">   </span></em><em><span class="c011"><em><span class="c011">"Carol"</span></em></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>A SHACL processor checks that </em><em>
</em><code><em>:alice</em></code><em> conforms to </em><em>
</em><code><em>:UserShape</em></code><em> and returns the following errors.</em></p><ul class="itemize"><li class="li-itemize"><em>
</em><code><em>:bob</em></code><em> has a different value for </em><em>
</em><code><em>foaf:firstName</em></code><em> and </em><em>
</em><code><em>schema:givenName</em></code><em>.</em></li><li class="li-itemize"><em>
</em><code><em>:carol</em></code><em> has the same value for </em><em>
</em><code><em>schema:givenName</em></code><em> and </em><em>
</em><code><em>schema:lastName</em></code><em> when they should be different.
</em></li></ul></div></div><div class="example"><div class="theorem"><span class="c013">Example 147</span>  <em>Value comparison example</em><p><em>The following example declares a </em><em>
</em><code><em>:ConcertShape</em></code><em> with three properties: </em><em>
</em><code><em>schema:doorTime</em></code><em>, </em><em>
</em><code><em>schema:startDate</em></code><em>, and </em><em>
</em><code><em>schema:endDate</em></code><em> whose values must have datatype </em><em>
</em><code><em>xsd:dateTime</em></code><em> and establishes the conditions that door time must be less or equals to start date, and start date must be before end date.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:ConcertShape</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:targetClass</span></em><em><span class="c011"> </span></em><em><span class="c011">:Concert</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">             </span></em><em><span class="c011">schema:doorTime</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011">         </span></em><em><span class="c011">xsd:dateTime</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c009">sh:lessThanOrEquals</span></span></em><em><span class="c011"> </span></em><em><span class="c011">schema:startDate</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ];</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">             </span></em><em><span class="c011">schema:startDate</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011">         </span></em><em><span class="c011">xsd:dateTime</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:lessThan</span></em><em><span class="c011">         </span></em><em><span class="c011">schema:endDate</span></em><em><span class="c011">
</span></em><em><span class="c011">];</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">schema:endDate</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:datatype</span></em><em><span class="c011"> </span></em><em><span class="c011">xsd:dateTime</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">] .</span></em></td></tr>
</table><p><em>Given the following data:
	
</em><em>

</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:concert1</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:Concert</span></em><em><span class="c011"> ;                  </span></em><span class="c011"><em><span class="c011">#\Passes{:ConcertShape} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:doorTime</span></em><em><span class="c011">  </span></em><em><span class="c011"><em><span class="c011">"2017-04-20T20:00:00"</span></em></span></em><em><span class="c011">^^</span></em><em><span class="c011">xsd:dateTime</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:startDate</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"2017-04-20T21:30:00"</span></em></span></em><em><span class="c011">^^</span></em><em><span class="c011">xsd:dateTime</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:endDate</span></em><em><span class="c011">   </span></em><em><span class="c011"><em><span class="c011">"2017-04-20T23:00:00"</span></em></span></em><em><span class="c011">^^</span></em><em><span class="c011">xsd:dateTime</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:concert2</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:Concert</span></em><em><span class="c011"> ;                  </span></em><span class="c011"><em><span class="c011">#\Passes{:ConcertShape} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:doorTime</span></em><em><span class="c011">  </span></em><em><span class="c011"><em><span class="c011">"2018-04-20T20:00:00"</span></em></span></em><em><span class="c011">^^</span></em><em><span class="c011">xsd:dateTime</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:startDate</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"2017-04-20T21:00:00"</span></em></span></em><em><span class="c011">^^</span></em><em><span class="c011">xsd:dateTime</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">schema:endDate</span></em><em><span class="c011">   </span></em><em><span class="c011"><em><span class="c011">"2017-04-20T21:00:00"</span></em></span></em><em><span class="c011">^^</span></em><em><span class="c011">xsd:dateTime</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>A SHACL processor checks that </em><em>
</em><code><em>:concert1</em></code><em> conforms to </em><em>
</em><code><em>:ConcertShape</em></code><em> and reports the following.</em></p><ul class="itemize"><li class="li-itemize"><em>The value of </em><em>
</em><code><em>schema:doorTime</em></code><em> must be less than or equal to the value of </em><em>
</em><code><em>schema:startDate</em></code><em> in </em><em>
</em><code><em>:concert2</em></code><em>.</em></li><li class="li-itemize"><em>The value of </em><em>
</em><code><em>schema:startDate</em></code><em> must be less than the value of </em><em>
</em><code><em>schema:endDate</em></code><em> in </em><em>
</em><code><em>:concert2</em></code><em>.
</em></li></ul></div></div><p><a id="hevea_default699"></a>
</p>
<h2 class="section" id="sec164">5.15  Non-validating SHACL Properties</h2>
<p> 
<a id="ch050NonValidating"></a>
<a id="ch5.sec15"></a></p><p>SHACL introduces several properties that are not intended for validation and are ignored during the validation process. 
These properties are intended for documentation or declarative User Interface (form) building and are listed in 
Table <a href="#ch050NonValidatingProperties">5.11</a>.</p><p><a id="hevea_default700"></a>
<a id="hevea_default701"></a>
<a id="hevea_default702"></a>
<a id="hevea_default703"></a>
<a id="hevea_default704"></a>
</p><blockquote class="table"><div class="center"><hr class="c021"></div>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Table 5.11: Property pair constraints</td></tr>
</table></div>
<a id="ch050NonValidatingProperties"></a> 
<div class="center">
<table class="c000 cellpadding1" border=1><tr><td class="c017"> Operation</td><td class="c019">Description 
</td></tr>
<tr><td class="c017"> 
<code>sh:equals</code></td><td class="c019">The sets of values from both properties at a given focus node must be equal
</td></tr>
<tr><td class="c017"> 
<code>sh:disjoint</code></td><td class="c019">The sets of values from both properties at a given focus node must be different
</td></tr>
<tr><td class="c017"> 
<code>sh:lessThan</code></td><td class="c019">Current values must be smaller than another property values
</td></tr>
<tr><td class="c017"> 
<code>sh:lessThanOrEquals</code></td><td class="c019">Current values must be smaller or equal than another property values
</td></tr>
</table>
</div>
<div class="center"><hr class="c021"></div></blockquote><div class="example"><div class="theorem"><span class="c013">Example 148</span>  <em>Non-validating SHACL properties</em><em> 
</em><a id="ch050NonValidatingExample"></a><p><em>The following example declares a </em><em>
</em><code><em>:UserShape</em></code><em> with several property shapes.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:UserShape</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">         </span></em><em><span class="c011">schema:familyName</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:name</span></em><em><span class="c011">        </span></em><em><span class="c011"><em><span class="c011">"family Name"</span></em></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c009">sh:description</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Family name. In the U.S., the last name of an Person"</span></em></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:order</span></em><em><span class="c011">       2 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:group</span></em><em><span class="c011">       </span></em><em><span class="c011">:nameGroup</span></em><em><span class="c011">
</span></em><em><span class="c011">] ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">        </span></em><em><span class="c011">schema:givenName</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:name</span></em><em><span class="c011">        </span></em><em><span class="c011"><em><span class="c011">"Given name"</span></em></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c009">sh:description</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Given name. In the U.S., the first name of a Person"</span></em></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:order</span></em><em><span class="c011">       1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:group</span></em><em><span class="c011">       </span></em><em><span class="c011">:nameGroup</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">];</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">        </span></em><em><span class="c011">schema:streetAddress</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:name</span></em><em><span class="c011">        </span></em><em><span class="c011"><em><span class="c011">"Street address"</span></em></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:order</span></em><em><span class="c011">       5 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:group</span></em><em><span class="c011">       </span></em><em><span class="c011">:addressGroup</span></em><em><span class="c011">
</span></em><em><span class="c011">] ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">         </span></em><em><span class="c011">schema:addressCountry</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:name</span></em><em><span class="c011">         </span></em><em><span class="c011"><em><span class="c011">"Country"</span></em></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:defaultValue</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Spain"</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:order</span></em><em><span class="c011">        6 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:group</span></em><em><span class="c011">        </span></em><em><span class="c011">:addressGroup</span></em><em><span class="c011">
</span></em><em><span class="c011">] .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:nameGroup</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011">          </span></em><em><span class="c011">sh:PropertyGroup</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">           </span></em><em><span class="c011">rdfs:label</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Name"</span></em></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:addressGroup</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011">          </span></em><em><span class="c011">sh:PropertyGroup</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">              </span></em><em><span class="c011">rdfs:label</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Address"</span></em></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>An application could generate a web form like the 
one in Figure </em><a href="#ch050FormGenerated"><em>148</em></a><em>.
</em></p><blockquote class="figure"><div class="center"><hr class="c021"></div><em> 
</em><div class="center"><em>
<img src="SHACL_form.png">
</em></div><em>

</em><a id="ch050FormGenerated"></a><em>
</em><div class="caption"><table class="c002 cellpading0"><tr><td class="c018"><em>Figure 5.6: Possible form generated from a shapes graph.</em></td></tr>
</table></div><em>
</em><div class="center"><hr class="c021"></div></blockquote></div></div><p><a id="hevea_default705"></a>
</p>
<h2 class="section" id="sec165">5.16  SHACL-SPARQL</h2>
<p> 
<a id="ch050SHACLSPARQL"></a>
<a id="ch5.sec16"></a></p><p><a id="hevea_default706"></a>
<a id="hevea_default707"></a>
<a id="hevea_default708"></a>
The SHACL recommendation was divided in two parts: SHACL Core and SHACL-SPARQL. 
SHACL Core (which was discussed until now in this chapter) was designed so it could be implemented without the need of an underlying SPARQL processor.
It contains what was considered the most frequent constraint components. 
However, there will be use cases where some extra features will be necessary to express more complex constraints.
To that end, SHACL-SPARQL contains an extension mechanism that enables the definition of other constraints using SPARQL.</p><p>SHACL Core processors are not required to support SHACL-SPARQL.
However, SHACL-SPARQL processors must support SHACL Core.</p><p>A working group note has also proposed to define a similar extension mechanism using Javascript.<sup><a id="text38" href="#note38">25</a></sup></p>
<h3 class="subsection" id="sec166">5.16.1  SPARQL Constraints</h3>
<p>
<a id="ch5.sec16.1"></a></p><p><a id="hevea_default709"></a>

<code>sh:sparql</code> associates a shape with a SPARQL based constraint that declares the SPARQL query to evaluate. </p><p>SPARQL-based constraints are nodes of type 
<code>sh:SPARQLConstraint</code> that can have the following properties. </p><ul class="itemize"><li class="li-itemize"><p><a id="hevea_default710"></a>
</p>
<code>sh:message</code>: A human-readable message explaining the cause of the violation.<p><a id="hevea_default711"></a>
<a id="hevea_default712"></a>
<a id="hevea_default713"></a>
<a id="hevea_default714"></a>
<a id="hevea_default715"></a>
<a id="hevea_default716"></a>
</p></li><li class="li-itemize">
<code>sh:select</code>: Contains a string with the SPARQL query. 
The SPARQL query can refer to a special variable <code>$this</code> which is bound to the focus node before executing the SPARQL query.
SHACL processors may also bind the variables <code>$shapesGraph</code> and <code>$currentShape</code> to the current shapes graph and shape.
In case of property shapes, the variable <code>$PATH</code> acts as a placeholder for the path used by the property shape.
A validation result (see section <a href="#ch050ValidationReport">5.5</a>) will be generated by each solution in the SPARQL query. <p><a id="hevea_default717"></a>
<a id="hevea_default718"></a>
<a id="hevea_default719"></a>
<a id="hevea_default720"></a>
<a id="hevea_default721"></a>
</p></li><li class="li-itemize">
<code>sh:prefixes</code>: Points to namespace prefix declarations. 
Prefix declarations are the values of the 
<code>sh:declare</code> which are pairs of property values 
<code>sh:prefix</code> and 
<code>sh:namespace</code>. 
The first one is the prefix alias and the second one is the namespace, which must be a literal of type 
<code>xsd:anyURI</code>. </li></ul><p><a id="hevea_default722"></a>
</p><div class="example"><div class="theorem"><span class="c013">Example 149</span>  <em>SPARQL constraint example</em><p><em>The following shape declares that nodes conforming to </em><em>
</em><code><em>:UserShape</em></code><em> have the constraint that </em><em>
</em><code><em>schema:name</em></code><em> must be equal to the concatenation of </em><em>
</em><code><em>schema:givenName</em></code><em> and </em><em>
</em><code><em>schema:familyName</em></code><em>.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:UserShape</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:targetClass</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c009">sh:sparql</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">a</span></em><em><span class="c011">          </span></em><em><span class="c011">sh:SPARQLConstraint</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:message</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"schema:name must equal schema:givenName+schema:familyName"</span></em></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:prefixes</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011">sh:declare</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">                </span></em><em><span class="c011">sh:prefix</span></em><em><span class="c011">    </span></em><em><span class="c011"><em><span class="c011">"schema"</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">                </span></em><em><span class="c011">sh:namespace</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"http://schema.org/"</span></em></span></em><em><span class="c011">^^</span></em><em><span class="c011">xsd:anyURI</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">        ]</span></em><em><span class="c011">
</span></em><em><span class="c011">   ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:select</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><em><span class="c011">""</span></em></span></em><em><span class="c011"><em><span class="c011">"SELECT $this (schema:name AS ?path) (?name as ?value)</span></em><em><span class="c011">
</span></em><em><span class="c011">       WHERE {</span></em><em><span class="c011">
</span></em><em><span class="c011">         $this schema:name       ?name .</span></em><em><span class="c011">
</span></em><em><span class="c011">         $this schema:givenName  ?givenName .</span></em><em><span class="c011">
</span></em><em><span class="c011">         $this schema:familyName ?familyName .</span></em><em><span class="c011">
</span></em><em><span class="c011">         FILTER (!isLiteral(?value) ||</span></em><em><span class="c011">
</span></em><em><span class="c011">                 !isLiteral(?givenName) ||</span></em><em><span class="c011">
</span></em><em><span class="c011">                 !isLiteral(?familyName) ||</span></em><em><span class="c011">
</span></em><em><span class="c011">                 concat(str(?givenName), ' ', str(?familyName))!=?name</span></em><em><span class="c011">
</span></em><em><span class="c011">                )</span></em><em><span class="c011">
</span></em><em><span class="c011">    }"</span></em></span></em><em><span class="c011"><em><span class="c011">""</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ] .</span></em></td></tr>
</table><p><em>Given the following data:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:alice</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011">                 </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;          </span></em><span class="c011"><em><span class="c011">#\Passes{:UserShape} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:givenName</span></em><em><span class="c011">  </span></em><em><span class="c011"><em><span class="c011">"Alice"</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:familyName</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Cooper"</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011">       </span></em><em><span class="c011"><em><span class="c011">"Alice Cooper"</span></em></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:bob</span></em><em><span class="c011">   </span></em><em><span class="c011">a</span></em><em><span class="c011">                 </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;          </span></em><span class="c011"><em><span class="c011">#\Fails{:UserShape} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:givenName</span></em><em><span class="c011">  </span></em><em><span class="c011"><em><span class="c011">"Bob"</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:familyName</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Smith"</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">schema:name</span></em><em><span class="c011">       </span></em><em><span class="c011"><em><span class="c011">"Robert Smith"</span></em></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>A SHACL processor checks that </em><em>
</em><code><em>:alice</em></code><em> conforms to </em><em>
</em><code><em>:UserShape</em></code><em> and returns the error: </em></p><ul class="itemize"><li class="li-itemize"><em>
</em><code><em>:bob</em></code><em> does not conform to </em><em>
</em><code><em>:UserShape</em></code><em> because values of </em><em>
</em><code><em>schema:name</em></code><em> must be equal to the concatenation of </em><em>
</em><code><em>schema:givenName</em></code><em> and </em><em>
</em><code><em>schema:familyName</em></code><em>.
</em></li></ul></div></div><p><a id="hevea_default723"></a>
</p>
<h3 class="subsection" id="sec167">5.16.2  SPARQL-based Constraint Components</h3>
<p>
<a id="ch5.sec16.2"></a>
<a id="ch050SHACLSPARQLCOMPONENTS"></a></p><p>SHACL-SPARQL also contains the possibility to declare reusable constraint components. 
Once defined, they can be used just like the other built-in SHACL Core components, without the need to write SPARQL. </p><p>SHACL constraint components are defined by declaring the list of parameters and associating them with validators. 
Those validators are usually declared in SPARQL, 
although there is a WG note for allowing Javascript-based validations (see section <a href="#ch050SHACLJS">5.20</a>).</p><p>The properties that can be used to define constraint components are the following. </p><ul class="itemize"><li class="li-itemize"><p><a id="hevea_default724"></a>
<a id="hevea_default725"></a>
<a id="hevea_default726"></a>
</p>
<code>sh:parameter</code> associates a parameter declaration with the constraint component. 
The declaration has a value for 
<code>sh:path</code> that must be an IRI and may have a Boolean value for 
<code>sh:optional</code> (if not present, it is assumed false by default).<p>The local name of the IRI associated by 
<code>sh:path</code> will be taken as the local name for the parameter. For example, in the following parameter declaration:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">sh:parameter</span><span class="c011"> [</span><span class="c011">
</span><span class="c011">  </span><span class="c011">sh:path</span><span class="c011">     </span><span class="c011">:listOfLength</span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011">sh:optional</span><span class="c011"> </span><span class="c011">true</span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">]</span></td></tr>
</table><p>The local name of the parameter is 
<code>listOfLength</code> and is used as a SPARQL (or Javascript) variable that is prebound to the component parameter value.</p><p><a id="hevea_default727"></a>
</p></li><li class="li-itemize">
<code>sh:labelTemplate</code> can be used to specify how the constraint will be rendered. 
The value is a string that can contain references to parameter names inside curly brackets. 
For example: 
<code><code>"Checks the list has {?listOfLength} values"</code></code>.<p><a id="hevea_default728"></a>
</p></li><li class="li-itemize">
<code>sh:validator</code> associates a validator with the constraint component. 
In SHACL-SPARQL, there are two types of validators: SELECT-based and ASK-based. <p><a id="hevea_default729"></a>
<a id="hevea_default730"></a>
<a id="hevea_default731"></a>
SELECT-based validators are introduced by 
<code>sh:nodeValidator</code> or 
<code>sh:propertyValidator</code> 
(depending on whether they are declared for a node or a property shape). 
<a id="hevea_default732"></a>
<a id="hevea_default733"></a>
They have one value for the property 
<code>sh:select</code> that is a string containing a SPARQL select query.
<a id="hevea_default734"></a>
<a id="hevea_default735"></a>
SHACL processors prebind the variable 
<code>$this</code> in the SELECT clause and the variable 
<code>$PATH</code> in case of property shapes.
Each solution of the SPARQL select query will be reported as a violation. </p><p><a id="hevea_default736"></a> 
<a id="hevea_default737"></a>
ASK-based validators are introduced by the property 
<code>sh:validator</code> and are executed for each value node. 
If the result of the ASK query is true, then the value node conforms to the shape. 
Notice that ASK-based validators work in the opposite direction to SELECT-based ones. 
While SELECT-based validators return no results to indicate conformance, 
ASK-based validators return 
<code>true</code> to indicate conformance.</p></li></ul><p><a id="hevea_default738"></a>
</p><div class="example"><div class="theorem"><span class="c013">Example 150</span>  <em>SPARQL constraint component example</em><p><em>The following code declares a SPARQL constraint component that checks that an RDF list given as a value, has a fixed length.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:FixedListConstraintComponent</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:ConstraintComponent</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">rdfs:label</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Fixed list constraint component"</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:parameter</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:path</span></em><em><span class="c011"> </span></em><em><span class="c011">:size</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:name</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Size of list"</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:description</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"The size of the list"</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:labelTemplate</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Size of values: \"{$size}\""</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:propertyValidator</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:SPARQLSelectValidator</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:message</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"{$PATH} must have length {?size}, not {?count}"</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:prefixes</span></em><em><span class="c011"> [ </span></em><em><span class="c011">sh:declare</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:prefix</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"rdf"</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:namespace</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"http://www.w3.org/1999/02/22-rdf-syntax-ns#"</span></em></span></em><em><span class="c011">
</span></em><em><span class="c011">   ]</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:select</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">""</span></em></span></em><em><span class="c011"><em><span class="c011">"</span></em><em><span class="c011">
</span></em><em><span class="c011">   SELECT $this ?value $count WHERE {</span></em><em><span class="c011">
</span></em><em><span class="c011">     $this $PATH ?value .</span></em><em><span class="c011">
</span></em><em><span class="c011">     { { SELECT $this ?value (COUNT(?member) AS ?count) $size WHERE {</span></em><em><span class="c011">
</span></em><em><span class="c011">          ?value rdf:rest*/rdf:first ?member</span></em><em><span class="c011">
</span></em><em><span class="c011">       } GROUP BY $this ?value $size</span></em><em><span class="c011">
</span></em><em><span class="c011">      }</span></em><em><span class="c011">
</span></em><em><span class="c011">     FILTER (!isBlank(?value) || ?count != $size)</span></em><em><span class="c011">
</span></em><em><span class="c011">    }</span></em><em><span class="c011">
</span></em><em><span class="c011">  }"</span></em></span></em><em><span class="c011"><em><span class="c011">""</span></em></span></em><em><span class="c011">
</span></em><em><span class="c011"> ]</span></em></td></tr>
</table><p><em>A property shape can be declared as:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">.:ProductShape</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:targetClass</span></em><em><span class="c011"> </span></em><em><span class="c011">:Product</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:path</span></em><em><span class="c011"> </span></em><em><span class="c011">:color</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">:size</span></em><em><span class="c011"> 3 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011"> ] .</span></em></td></tr>
</table><p><em>Given the following data: </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:p1</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:Product</span></em><em><span class="c011"> ;       </span></em><span class="c011"><em><span class="c011">#\Passes{:Product} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">:color</span></em><em><span class="c011"> (255 0 255) .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:p2</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:Product</span></em><em><span class="c011"> ;        </span></em><span class="c011"><em><span class="c011">#\Fails{:Product} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">:knows</span></em><em><span class="c011"> ( </span></em><em><span class="c011">:x</span></em><em><span class="c011"> </span></em><em><span class="c011">:y</span></em><em><span class="c011"> ) ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">:color</span></em><em><span class="c011"> (255 0 210 345) .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:p3</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:Product</span></em><em><span class="c011"> ;        </span></em><span class="c011"><em><span class="c011">#\Fails{:Product} *)  </span></em></span><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">:color</span></em><em><span class="c011"> 3 .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:p4</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:Product</span></em><em><span class="c011"> .        </span></em><span class="c011"><em><span class="c011">#\Fails{:Product} *)  </span></em></span></td></tr>
</table><p><em>A SHACL processor would validate that </em><em>
</em><code><em>:p1</em></code><em> conforms to </em><em>
</em><code><em>:Product</em></code><em> but would report the following errors. </em></p><ul class="itemize"><li class="li-itemize"><em>For </em><em>
</em><code><em>:p2</em></code><em> the error message </em><em>
</em><code><em><code><em>":color must have length 3, not 4"</em></code></em></code><em>.
</em></li><li class="li-itemize"><em>For </em><em>
</em><code><em>:p3</em></code><em> the error message </em><em>
</em><code><em><code><em>":color must have length 3, not 0"</em></code></em></code><em>.
</em></li><li class="li-itemize"><em>For </em><em>
</em><code><em>:p4</em></code><em> the message that </em><em>
</em><code><em>sh:minCount</em></code><em> failed because there are no values for property </em><em>
</em><code><em>:color</em></code><em>.
</em></li></ul><p><em>Notice that the following example, although similar in effect, is not a valid shape definition:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:ProductShape</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:targetObjectsOf</span></em><em><span class="c011"> </span></em><em><span class="c011">:color</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">:size</span></em><em><span class="c011">              3 .</span></em></td></tr>
</table><p><a id="hevea_default739"></a><em>
The reason is that a </em><em>
</em><code><em>sh:nodeValidator</em></code><em> is not defined for the </em><em>
</em><code><em>:FixedListConstraintComponent</em></code><em> and a SHACL-SPARQL processor does not know how to execute the </em><em>
</em><code><em>:size</em></code><em> parameter in this context. 
A solution would be to define both a property and a node validator, or define one ASK-based validator.</em></p></div></div>
<h2 class="section" id="sec168">5.17  SHACL and Inference Systems</h2>
<p>
<a id="ch050SHACLINFERENCE"></a>
<a id="ch5.sec17"></a></p><p><a id="hevea_default740"></a> 
<a id="hevea_default741"></a> 
<a id="hevea_default742"></a> 
<a id="hevea_default743"></a> 
SHACL uses some parts of the RDF Schema and OWL vocabularies, but full RDF Schema or OWL inference is not required.</p><p><a id="hevea_default744"></a> 
<a id="hevea_default745"></a> 
<a id="hevea_default746"></a>
SHACL processors may support different entailment regimes which are defined in the same way as for SPARQL. 
An entailment regime is identified by an IRI and defines the kind of inference a processor will do to the data graph. 
A shapes graph that contains a triple with predicate 
<code>sh:entailment</code> and value 
<code>E</code> indicates that it requires entailment 
<code>E</code>. 
If a SHACL processor does not support entailment 
<code>E</code>, it will return an error.</p><p><a id="hevea_default747"></a>
Some values for the property 
<code>sh:entailment</code> are described in 
Table <a href="#ch050.EntailmentRegimes">5.12</a>.</p><blockquote class="table"><div class="center"><hr class="c021"></div>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Table 5.12: Some entailment regimes</td></tr>
</table></div>
<a id="ch050.EntailmentRegimes"></a> 
<div class="center">
<table class="c000 cellpadding1" border=1><tr><td class="c017"> IRI</td><td class="c017">Name
</td></tr>
<tr><td class="c017"> 
<code>http:</code><code>//</code><code>www</code><code>.</code><code>w3</code><code>.</code><code>org</code><code>/</code><code>ns</code><code>/</code><code>entailment</code><code>/</code><code>RDF</code></td><td class="c017">RDF 
</td></tr>
<tr><td class="c017"> 
<code>http:</code><code>//</code><code>www</code><code>.</code><code>w3</code><code>.</code><code>org</code><code>/</code><code>ns</code><code>/</code><code>entailment</code><code>/</code><code>RDFS</code></td><td class="c017">RDF Schema  </td></tr>
<tr><td class="c017"> 
<code>http:</code><code>//</code><code>www</code><code>.</code><code>w3</code><code>.</code><code>org</code><code>/</code><code>ns</code><code>/</code><code>entailment</code><code>/</code><code>OWL</code><code>-</code><code>Direct</code></td><td class="c017">OWL 2 direct semantics 
</td></tr>
</table>
</div>
<div class="center"><hr class="c021"></div></blockquote><div class="example"><div class="theorem"><span class="c013">Example 151</span>  <em>Example with entailment</em><p><em>The following shapes graph declares a </em><em>
</em><code><em>:Teacher</em></code><em> shape as someone that has property </em><em>
</em><code><em>:teaches</em></code><em> with a value that is an instance of </em><em>
</em><code><em>:Course</em></code><em> 
and has </em><em>
</em><code><em>rdf:type</em></code><em> with value </em><em>
</em><code><em>:Person</em></code><em>.
It also requires RDF Schema entailment.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">&lt;&gt; </span></em><em><span class="c011"><span class="c009">sh:entailment</span></span></em><em><span class="c011"> &lt;</span></em><em><span class="c011">http:</span></em><em><span class="c011">//</span></em><em><span class="c011">www</span></em><em><span class="c011">.</span></em><em><span class="c011">w3</span></em><em><span class="c011">.</span></em><em><span class="c011">org</span></em><em><span class="c011">/</span></em><em><span class="c011">ns</span></em><em><span class="c011">/</span></em><em><span class="c011">entailment</span></em><em><span class="c011">/</span></em><em><span class="c011">RDFS</span></em><em><span class="c011">&gt; .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:Teacher</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape,</span></em><em><span class="c011"> </span></em><em><span class="c011">rdfs:Class</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:path</span></em><em><span class="c011"> </span></em><em><span class="c011">:teaches</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:class</span></em><em><span class="c011">    </span></em><em><span class="c011">:Course</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011">  ];</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:path</span></em><em><span class="c011"> </span></em><em><span class="c011">rdf:type</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:qualifiedValueShape</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">         </span></em><em><span class="c011">sh:hasValue</span></em><em><span class="c011"> </span></em><em><span class="c011">:Person</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] .</span></em></td></tr>
</table><p><em>Given the following data:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:alice</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011">        </span></em><em><span class="c011">:Teacher,</span></em><em><span class="c011">  </span></em><span class="c011"><em><span class="c011">#\Passes{:Teacher with RDFS entailment} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">                </span></em><em><span class="c011">:Person</span></em><em><span class="c011"> ;  </span></em><span class="c011"><em><span class="c011">#\Passes{:Teacher without RDFS entailment}*) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">:teaches</span></em><em><span class="c011"> </span></em><em><span class="c011">:algebra</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:bob</span></em><em><span class="c011">   </span></em><em><span class="c011">a</span></em><em><span class="c011">        </span></em><em><span class="c011">:Teacher</span></em><em><span class="c011"> ; </span></em><span class="c011"><em><span class="c011">#\Passes{:Teacher with RDFS entailment} *)  </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">:teaches</span></em><em><span class="c011"> </span></em><em><span class="c011">:logic</span></em><em><span class="c011">   . </span></em><span class="c011"><em><span class="c011">#\Fails{:Teacher without RDFS entailment}*)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:carol</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011">        </span></em><em><span class="c011">:Teacher</span></em><em><span class="c011"> ; </span></em><span class="c011"><em><span class="c011">#\Passes{:Teacher with RDFS entailment} *)  </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">:teaches</span></em><em><span class="c011"> </span></em><em><span class="c011">:algebra</span></em><em><span class="c011"> . </span></em><span class="c011"><em><span class="c011">#\Passes{:Teacher without RDFS entailment}*)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">                           </span></em><span class="c011"><em><span class="c011"># It uses SHACL instances *)</span></em></span><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:algebra</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011">      </span></em><em><span class="c011">:Course</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:teaches</span></em><em><span class="c011"> </span></em><em><span class="c011">rdfs:range</span></em><em><span class="c011">  </span></em><em><span class="c011">:Course</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">:teaches</span></em><em><span class="c011"> </span></em><em><span class="c011">rdfs:domain</span></em><em><span class="c011"> </span></em><em><span class="c011">:Teacher</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">:Teacher</span></em><em><span class="c011"> </span></em><em><span class="c011">rdfs:subClassOf</span></em><em><span class="c011"> </span></em><em><span class="c011">:Person</span></em><em><span class="c011"> .</span></em></td></tr>
</table><ul class="itemize"><li class="li-itemize"><em>
</em><code><em>:alice</em></code><em> conforms to teacher with or without RDFS entailment, 
because it has </em><em>
</em><code><em>rdf:type</em></code><code><em> </em></code><code><em>:Person</em></code><em> and it </em><em>
</em><code><em>:teaches</em></code><code><em> </em></code><code><em>:algebra</em></code><em>, and </em><em>
</em><code><em>:algebra</em></code><em> has </em><em>
</em><code><em>rdf:type</em></code><code><em> </em></code><code><em>:Course</em></code><em>. </em></li><li class="li-itemize"><em>
</em><code><em>:bob</em></code><em> only conforms if RDF Schema entailment is performed, because it infers that it has </em><em>
</em><code><em>rdf:type</em></code><code><em> </em></code><code><em>:Person</em></code><em> and that </em><em>
</em><code><em>:logic</em></code><code><em> </em></code><code><em>rdf:type</em></code><code><em> </em></code><code><em>:Course</em></code><em>. Without RDF Schema entailment it fails.</em></li><li class="li-itemize"><em>
</em><code><em>:carol</em></code><em> conforms to </em><em>
</em><code><em>:Teacher</em></code><em> even without RDF Schema entailment activated and even if it does not have </em><em>
</em><code><em>rdf:type</em></code><code><em> </em></code><code><em>:Person</em></code><em>. 
The reason is that it is a SHACL instance of </em><em>
</em><code><em>:Person</em></code><em> 
(see Section </em><a href="#ch050SHACLInstance"><em>5.7.2</em></a><em>). </em></li></ul></div></div><p><a id="hevea_default748"></a>
<a id="hevea_default749"></a>
<a id="hevea_default750"></a>
Although SHACL does not require inference, it has a special treatment for the properties 
<code>rdfs:subClassOf</code>, 
<code>rdf:type</code> and 
<code>owl:imports</code>.</p><p><a id="hevea_default751"></a> 
</p>
<h2 class="section" id="sec169">5.18  SHACL Compact Syntax</h2>
<p> 
<a id="ch050SHACLC"></a>
<a id="ch5.sec18"></a></p><p>A SHACL compact syntax has been suggested for a subset of SHACL inspired by ShEx compact syntax.<sup><a id="text39" href="#note39">26</a></sup> 
Although it was not published as a working group note, 
it is expected that further development will be done in the context of the W3C SHACL community group.</p><p>Given the temporary status, the following description may differ from the final compact syntax that is published. </p><div class="example"><div class="theorem"><span class="c013">Example 152</span>  <em>SHACL example using compact syntax</em><p><em>Example </em><a href="#ch050SHACLExample"><em>94</em></a><em> could be written in SHACL compact syntax as: </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011"><span class="c006">:UserShape</span></span></em><em><span class="c011"> -&gt; </span></em><em><span class="c011"><span class="c006">:User</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">IRI</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">schema:name</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c006">xsd:string</span></span></em><em><span class="c011"> [1..1] .</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">schema:gender</span></span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c006">in</span></span></em><em><span class="c011"> = [</span></em><em><span class="c011"><span class="c006">schema:Male</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">schema:Female</span></span></em><em><span class="c011">] [1..1] .</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">schema:birthDate</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">xsd:date</span></span></em><em><span class="c011"> [0..1] .</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">schema:knows</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c006">:User</span></span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table></div></div><p><a id="hevea_default752"></a>
<a id="hevea_default753"></a>
The operator 
<code>-&gt;</code> declares a 
<code>sh:targetClass</code> and the dot operator 
<code>.</code> separates the different constraint components.</p><p><a id="hevea_default754"></a>
<a id="hevea_default755"></a>
</p>
<h2 class="section" id="sec170">5.19  SHACL Rules and Advanced Features</h2>
<p>
<a id="ch5.sec19"></a></p><p>The Data Shapes Working Group published a note called SHACL Advanced Features 
(<sup><a id="text40" href="#note40">27</a></sup>).
It defines the following language constructs. </p><ul class="itemize"><li class="li-itemize"><p><a id="hevea_default756"></a>
<a id="hevea_default757"></a>
</p><span class="c013">SPARQL-based targets</span> provide a vocabulary that extend the ways targets can be declared from SHACL Core. 
Two types of targets are defined: 
<a id="hevea_default758"></a>
(a) 
<code>sh:SPARQLTarget</code> that provides a SPARQL query directly in the target 
definition; and, 
<a id="hevea_default759"></a>
(b) 
<code>sh:SPARQLTargetType</code> that provides a mechanism similar to constraint components for parametrizable targets.<p><a id="hevea_default760"></a>
</p></li><li class="li-itemize"><span class="c013">Annotations properties</span> 
provide an injection mechanism where users can pass static or dynamic annotations from the shape definitions to the validation results. <p><a id="hevea_default761"></a>
<a id="hevea_default762"></a>
<a id="hevea_default763"></a>
<a id="hevea_default764"></a>
</p></li><li class="li-itemize"><span class="c013">Functions</span> provide a vocabulary to define SPARQL functions that can be reused in the SELECT or ASK based validators 
(see Section <a href="#ch050SHACLSPARQLCOMPONENTS">5.16.2</a>).<p><a id="hevea_default765"></a>
</p></li><li class="li-itemize"><span class="c013">Node expressions</span> a set of predefined functions that can be used to compute values from focus nodes, e.g., compute a display label for an IRI.<p><a id="hevea_default766"></a>
</p></li><li class="li-itemize"><span class="c013">Constraint expressions</span> extend the <em>node expressions</em> for validation purposes.<p><a id="hevea_default767"></a>
</p></li><li class="li-itemize"><span class="c013">Rules</span> provide a light-weight RDF inferencing mechanism based on SHACL shapes.
	
</li></ul><p>At the time of this writing, there are no implementation reports for the advanced SHACL features. 
We showcase the SPARQL-based targets and the SHACL rules with examples and point the reader to the working group note for further reference.</p><div class="example"><div class="theorem"><span class="c013">Example 153</span>  <em>SPARQL-based target declarations</em><p><em>The following shape declares a target that selects only instances of </em><em>
</em><code><em>:Teacher</em></code><em> that teach algebra.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:AlgebraTeacher</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:target</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c009">sh:SPARQLTarget</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:prefixes</span></em><em><span class="c011"> [  </span></em><em><span class="c011">sh:declare</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">":"</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">                   </span></em><em><span class="c011">sh:namespace</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"http://example.org/"</span></em></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">    ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:select</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">""</span></em></span></em><em><span class="c011"><em><span class="c011">" SELECT ?this WHERE {</span></em><em><span class="c011">
</span></em><em><span class="c011">                    ?this a :Teacher .</span></em><em><span class="c011">
</span></em><em><span class="c011">                    ?this :teaches :Algebra .} "</span></em></span></em><em><span class="c011"><em><span class="c011">""</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:path</span></em><em><span class="c011"> </span></em><em><span class="c011">:field</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:hasValue</span></em><em><span class="c011"> </span></em><em><span class="c011">:Mathematics</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] .</span></em></td></tr>
</table><p><em>Given the following data:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:alice</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011">        </span></em><em><span class="c011">:Teacher</span></em><em><span class="c011"> ;      </span></em><span class="c011"><em><span class="c011">#\Passes{:AlgebraTeacher} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">:teaches</span></em><em><span class="c011"> </span></em><em><span class="c011">:algebra</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">:field</span></em><em><span class="c011">   </span></em><em><span class="c011">:Mathematics</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:bob</span></em><em><span class="c011">   </span></em><em><span class="c011">a</span></em><em><span class="c011">        </span></em><em><span class="c011">:Teacher</span></em><em><span class="c011"> ;      </span></em><span class="c011"><em><span class="c011">#\Fails{:AlgebraTeacher} *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">:teaches</span></em><em><span class="c011"> </span></em><em><span class="c011">:algebra</span></em><em><span class="c011"> .      </span></em><span class="c011"><em><span class="c011"># No value for :field *) </span></em></span><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:carol</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011">        </span></em><em><span class="c011">:Teacher</span></em><em><span class="c011"> ;      </span></em><span class="c011"><em><span class="c011"># Ignored</span></em></span><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">:teaches</span></em><em><span class="c011"> </span></em><em><span class="c011">:logic</span></em><em><span class="c011">   .</span></em></td></tr>
</table><p><em>A SHACL processor with SPARQL-based target support checks that </em><em>
</em><code><em>:alice</em></code><em> conforms to </em><em>
</em><code><em>:AlgebraTeacher</em></code><em> shape and signals the error. </em></p><ul class="itemize"><li class="li-itemize"><em>
</em><em>
</em><code><em>:bob</em></code><em> does not have value </em><em>
</em><code><em>:Mathematics</em></code><em> for </em><em>
</em><code><em>:field</em></code><em> property. 
	
</em></li><li class="li-itemize"><em>
</em><code><em>:bob</em></code><em> is ignored although it does not have </em><em>
</em><code><em>:field</em></code><em> property, because it is not selected by the SPARQL target.
</em></li></ul></div></div><div class="example"><div class="theorem"><span class="c013">Example 154</span>  <em>SHACL rules example</em><p><em>The following shape defines a rule that states that users with a value for the property </em><em>
</em><code><em>:teaches</em></code><em> are instances of </em><em>
</em><code><em>:Teacher</em></code><em>.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:User</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:targetClass</span></em><em><span class="c011"> </span></em><em><span class="c011">:User</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c009">sh:rule</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">a</span></em><em><span class="c011">            </span></em><em><span class="c011">sh:TripleRule</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:subject</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:this</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:predicate</span></em><em><span class="c011"> </span></em><em><span class="c011">rdf:type</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:object</span></em><em><span class="c011">    </span></em><em><span class="c011">:Teacher</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:condition</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011">sh:path</span></em><em><span class="c011">     </span></em><em><span class="c011">:teaches</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011">sh:minCount</span></em><em><span class="c011"> 1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] .</span></em></td></tr>
</table><p><em>Given the following data:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:alice</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011">        </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">:teaches</span></em><em><span class="c011"> </span></em><em><span class="c011">:algebra</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:bob</span></em><em><span class="c011">   </span></em><em><span class="c011">a</span></em><em><span class="c011">        </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011">:teaches</span></em><em><span class="c011"> </span></em><em><span class="c011">:logic</span></em><em><span class="c011">   .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:carol</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011">        </span></em><em><span class="c011">:User</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011">:attends</span></em><em><span class="c011">  </span></em><em><span class="c011">:algebra</span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>A SHACL rules engine will infer the following RDF triples:
</em><em>

</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:alice</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011">        </span></em><em><span class="c011">:Teacher</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">:bob</span></em><em><span class="c011">   </span></em><em><span class="c011">a</span></em><em><span class="c011">        </span></em><em><span class="c011">:Teacher</span></em><em><span class="c011"> .</span></em></td></tr>
</table><ul class="itemize"><li class="li-itemize"><p><em>	</em></p><em>
</em><code><em>:carol</em></code><em> does not get an inferred triple because it does not have a value for </em><em>
</em><code><em>:teaches</em></code><em>. 
</em></li></ul><p><em>
	
</em></p></div></div><p><a id="hevea_default768"></a>
</p>
<h2 class="section" id="sec171">5.20  SHACL Javascript</h2>
<p> 
<a id="ch050SHACLJS"></a>
<a id="ch5.sec20"></a></p><p><a id="hevea_default769"></a>
<a id="hevea_default770"></a>
<a id="hevea_default771"></a>
<a id="hevea_default772"></a>
SHACL Javascript (SHACL-JS)<sup><a id="text41" href="#note41">28</a></sup> 
was published as a Working Group Note to enable the definition of constraint components in Javascript. 
It is also intended to express advanced features like custom targets, fuctions and rules in Javascript.</p><p>SHACL-JS is similar to SHACL-SPARQL but for Javascript instead of SPARQL. 
The basic idea is that shapes can point to JavaScript functions available at some URL that can be resolved from the Web. 
When shapes get evaluated, a SHACL-JS engine calls those functions and constructs validation results 
from the results obtained by these calls.
The Javascript code can access the RDF triples available in the data and shapes graphs through a Javascript API.</p><p>Note that at the time of this writing, there are no implementation reports 
for SHACL JS (the following code is speculative). </p><p><a id="hevea_default773"></a>
</p><div class="example"><div class="theorem"><span class="c013">Example 155</span>  <em>Javascript-based constraint example</em><em>
	
Assuming the following Javascript function is defined in </em><em>
</em><code><em>http:</em></code><code><em>//</em></code><code><em>example</em></code><code><em>.</em></code><code><em>org</em></code><code><em>/</em></code><code><em>numberFunctions</em></code><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011"><span class="c006">function</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">isOddNumber</span></span></em><em><span class="c011">(</span></em><em><span class="c011"><span class="c006">$value</span></span></em><em><span class="c011">) {</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c006">if</span></span></em><em><span class="c011">(</span></em><em><span class="c011"><span class="c006">$value</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">isLiteral</span></span></em><em><span class="c011">()) {</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c006">return</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">$value</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">lex</span></span></em><em><span class="c011"> </span></em></td></tr>
</table><p><em>and given the following shape: </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011"> 2 == 1
  } else { 
    return false;
  }
:VotingCommittee</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:NodeShape</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:targetClass</span></em><em><span class="c011"> </span></em><em><span class="c011">:VotingCommittee</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">sh:property</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011">sh:path</span></em><em><span class="c011"> </span></em><em><span class="c011">:numberOfVoters</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c009">sh:js</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">sh:JSConstraint</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:message</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Number of voters must be odd to avoid ties"</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:jsLibrary</span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011">sh:jsLibraryURL</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"http://example.org/numberFunctions"</span></em></span></em><em><span class="c011">
</span></em><em><span class="c011">    ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">sh:jsFunctionName</span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"isOddNumber"</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   ]</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] .</span></em></td></tr>
</table><p><em>With the following data:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:JuryCommittee</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:VotingCommittee</span></em><em><span class="c011">; </span></em><span class="c011"><em><span class="c011">#\Passes{:VotingCommittee} *)   </span></em></span><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">:numberOfVoters</span></em><em><span class="c011"> 7 .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:CityCommittee</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">:VotingCommittee</span></em><em><span class="c011">; </span></em><span class="c011"><em><span class="c011">#\Fails{:VotingCommittee} *)   </span></em></span><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">:numberOfVoters</span></em><em><span class="c011"> 8 .</span></em></td></tr>
</table><p><em>A SHACL-JS processor:</em></p><ul class="itemize"><li class="li-itemize"><em>checks that </em><em>
</em><code><em>:JuryCommittee</em></code><em> conforms to </em><em>
</em><code><em>:VotimgCommittee</em></code><em>; and </em></li><li class="li-itemize"><em>returns a violation error for </em><em>
</em><code><em>:CityCommittee</em></code><em> with the message </em><em>
</em><code><em><code><em>"Number of voters must be odd to avoid ties."</em></code></em></code><em>
</em></li></ul></div></div>
<h2 class="section" id="sec172">5.21  Summary</h2>
<p>
<a id="ch5.sec21"></a></p><ul class="itemize"><li class="li-itemize">SHACL is divided in two parts: SHACL Core and SHACL SPARQL.</li><li class="li-itemize">Shapes in SHACL contain the notion of target declarations which declare the sets of nodes that they apply.</li><li class="li-itemize">There are two types of shapes: node and property shapes.</li><li class="li-itemize">Shapes contain a list of parameters of constraint components.</li><li class="li-itemize">SHACL SPARQL allows users to define their own constraint components.</li><li class="li-itemize">Some SHACL extensions have already been proposed like SHACL rules and SHACL Javascript.</li></ul>
<h2 class="section" id="sec173">5.22  Suggested Reading</h2>
<p>
<a id="ch5.sec22"></a></p><ul class="itemize"><li class="li-itemize"><a href="bookHtml019.html#SHACLSpec">Knublauch and Kontokostas</a>,<a href="bookHtml019.html#SHACLSpec">2017</a> [<a href="bookHtml019.html#SHACLSpec">52</a>]
</li><li class="li-itemize"><a href="bookHtml019.html#SHACLUseCases">Simon Steyskal and Karen Coyle</a>,<a href="bookHtml019.html#SHACLUseCases">2016</a> [<a href="bookHtml019.html#SHACLUseCases">91</a>]
</li><li class="li-itemize"><a href="bookHtml019.html#Cagle17">Cagle</a>,<a href="bookHtml019.html#Cagle17">2017</a> [<a href="bookHtml019.html#Cagle17">17</a>].
</li></ul>
<hr class="footnoterule"><dl class="thefootnotes"><dt class="dt-thefootnotes">
<a id="note14" href="#text14">1</a></dt><dd class="dd-thefootnotes"><div class="footnotetext"><a ><span class="c010">#1</span></a></div></dd><dt class="dt-thefootnotes"><a id="note15" href="#text15">2</a></dt><dd class="dd-thefootnotes"><div class="footnotetext"><a ><span class="c010">#1</span></a></div></dd><dt class="dt-thefootnotes"><a id="note16" href="#text16">3</a></dt><dd class="dd-thefootnotes"><div class="footnotetext"><a ><span class="c010">#1</span></a></div></dd><dt class="dt-thefootnotes"><a id="note17" href="#text17">4</a></dt><dd class="dd-thefootnotes"><div class="footnotetext"><a href="https://www.w3.org/community/shacl/"><span class="c010">https://www.w3.org/community/shacl/</span></a></div></dd><dt class="dt-thefootnotes"><a id="note18" href="#text18">5</a></dt><dd class="dd-thefootnotes"><div class="footnotetext"><a href="https://w3c.github.io/data-shapes/shacl-compact-syntax/"><span class="c010">https://w3c.github.io/data-shapes/shacl-compact-syntax/</span></a></div></dd><dt class="dt-thefootnotes"><a id="note19" href="#text19">6</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">The example differs in the avoidance of recursion for SHACL. See Section <a href="#050SHACLRecursion">5.12.1</a>.</div></dd><dt class="dt-thefootnotes"><a id="note20" href="#text20">7</a></dt><dd class="dd-thefootnotes"><div class="footnotetext"><a ><span class="c010">#1</span></a></div></dd><dt class="dt-thefootnotes"><a id="note21" href="#text21">8</a></dt><dd class="dd-thefootnotes"><div class="footnotetext"><a href="http://shacl.org/playground/"><span class="c010">http://shacl.org/playground/</span></a></div></dd><dt class="dt-thefootnotes"><a id="note22" href="#text22">9</a></dt><dd class="dd-thefootnotes"><div class="footnotetext"><a ><span class="c010">#1</span></a></div></dd><dt class="dt-thefootnotes"><a id="note23" href="#text23">10</a></dt><dd class="dd-thefootnotes"><div class="footnotetext"><a href="http://shaclex.herokuapp.com/"><span class="c010">http://shaclex.herokuapp.com/</span></a></div></dd><dt class="dt-thefootnotes"><a id="note24" href="#text24">11</a></dt><dd class="dd-thefootnotes"><div class="footnotetext"><a ><span class="c010">#1</span></a></div></dd><dt class="dt-thefootnotes"><a id="note25" href="#text25">12</a></dt><dd class="dd-thefootnotes"><div class="footnotetext"><a ><span class="c010">#1</span></a></div></dd><dt class="dt-thefootnotes"><a id="note26" href="#text26">13</a></dt><dd class="dd-thefootnotes"><div class="footnotetext"><a ><span class="c010">#1</span></a></div></dd><dt class="dt-thefootnotes"><a id="note27" href="#text27">14</a></dt><dd class="dd-thefootnotes"><div class="footnotetext"><a ><span class="c010">#1</span></a></div></dd><dt class="dt-thefootnotes"><a id="note28" href="#text28">15</a></dt><dd class="dd-thefootnotes"><div class="footnotetext"><a ><span class="c010">#1</span></a></div></dd><dt class="dt-thefootnotes"><a id="note29" href="#text29">16</a></dt><dd class="dd-thefootnotes"><div class="footnotetext"><a href="https://github.com/AKSW/RDFUnit/issues/62"><span class="c010">https://github.com/AKSW/RDFUnit/issues/62</span></a></div></dd><dt class="dt-thefootnotes"><a id="note30" href="#text30">17</a></dt><dd class="dd-thefootnotes"><div class="footnotetext"><a ><span class="c010">#1</span></a></div></dd><dt class="dt-thefootnotes"><a id="note31" href="#text31">18</a></dt><dd class="dd-thefootnotes"><div class="footnotetext"><a ><span class="c010">#1</span></a></div></dd><dt class="dt-thefootnotes"><a id="note32" href="#text32">19</a></dt><dd class="dd-thefootnotes"><div class="footnotetext"><a ><span class="c010">#1</span></a></div></dd><dt class="dt-thefootnotes"><a id="note33" href="#text33">20</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">This example is similar to ShEx Example <a href="bookHtml011.html#ch040SimpleDatatypes">35</a>.</div></dd><dt class="dt-thefootnotes"><a id="note34" href="#text34">21</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">Technically, it is the <em>lexical form</em> of literals or the <em>codepoint representation</em> of IRIs.</div></dd><dt class="dt-thefootnotes"><a id="note35" href="#text35">22</a></dt><dd class="dd-thefootnotes"><div class="footnotetext"><a ><span class="c010">#1</span></a></div></dd><dt class="dt-thefootnotes"><a id="note36" href="#text36">23</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">This example is the same as Example <a href="bookHtml011.html#ch040ExtendingShapesShEx">75</a> for ShEx.</div></dd><dt class="dt-thefootnotes"><a id="note37" href="#text37">24</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">Notice that forcing this condition in general may not always be desirable in some contexts.</div></dd><dt class="dt-thefootnotes"><a id="note38" href="#text38">25</a></dt><dd class="dd-thefootnotes"><div class="footnotetext"><a href="http://W3C.github.io/data-shapes/shacl-js/"><span class="c010">http://W3C.github.io/data-shapes/shacl-js/</span></a></div></dd><dt class="dt-thefootnotes"><a id="note39" href="#text39">26</a></dt><dd class="dd-thefootnotes"><div class="footnotetext"><a ><span class="c010">#1</span></a></div></dd><dt class="dt-thefootnotes"><a id="note40" href="#text40">27</a></dt><dd class="dd-thefootnotes"><div class="footnotetext"><a ><span class="c010">#1</span></a></div></dd><dt class="dt-thefootnotes"><a id="note41" href="#text41">28</a></dt><dd class="dd-thefootnotes"><div class="footnotetext"><a ><span class="c010">#1</span></a></div></dd></dl>
<hr>
<a href="bookHtml011.html"><img src="previous_motif.gif" alt="Previous"></a>
<a href="index.html"><img src="contents_motif.gif" alt="Up"></a>
<a href="bookHtml013.html"><img src="next_motif.gif" alt="Next"></a>
</body>
</html>
